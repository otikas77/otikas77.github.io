!function(a){a(".burger").on("click",function(){var t;a(".buy-from-partners").hasClass("active")&&!a(".drop-menu").hasClass("drop-menu--active")?(a(".buy-from-partners").removeClass("active"),a(".burger").removeClass("burger--active span-color--black-buy-from-partners")):a(".recipies__popup").hasClass("active")?(a(".recipies__popup").removeClass("active"),setTimeout(function(){a(".burger").removeClass("burger--active")},300),a(".burger").addClass("burger--opacity-0")):a(".buy-from-partners").hasClass("active")&&a(".drop-menu").hasClass("drop-menu--active")?(a(".buy-from-partners").removeClass("active"),a(".burger").removeClass("span-color--black-buy-from-partners")):(a(this).toggleClass("burger--active"),a(this).toggleClass("span-color--black"),a(".drop-menu").toggleClass("drop-menu--active"),t=.1*a(".drop-menu--active nav li").length,a(".drop-menu--active nav li").each(function(){a(this).css("transition-delay",t+"s"),t-=.1}))});var e=a(".three-part-block .bottom-part .bottom-part__right .img").length,r=0,s=!0;a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){a(this).css("zIndex",e),--e});var o=function(){a(".main-page").addClass("prevSlide"),r<=a(".three-part-block .bottom-part .bottom-part__right .img").length-1?(1==r?a(".three-part-block .top-part").addClass("top-part--bg-position"):3==r&&setTimeout(function(){a(".burger").addClass("span-color--black-important")},1500),a(".three-part-block .top-part .text-scroll").css("transform","translate3d(-"+100*r+"vw, 0, 0)"),a(".text__wrapper").each(function(t){t==r?a(this).attr("data-curent","true"):t==r-1&&a(this).attr("data-curent","false")}),a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){t==r-1?a(this).attr("data-scroll","curent"):t==r-2?a(this).attr("data-scroll","prev"):t==r&&a(this).attr("data-scroll","next")}),a(".three-part-block").attr("data-scroll",r),r++):6==r?(r=7,a(".three-part-block").addClass("prev"),a(".video-with-handle").addClass("curent"),a(".burger").addClass("span-color--black"),a(".video-with-handle video").trigger("play"),a(".scroll-down").addClass("hide")):7==r?(r=8,a(".big-video").addClass("curent"),a(".video-with-handle").addClass("prev"),setTimeout(function(){a(".burger").removeClass("span-color--black-important"),a(".burger").removeClass("span-color--black")},1500)):8==r?(r=9,a(".big-video").addClass("prev"),a(".products-list").addClass("curent"),setTimeout(function(){a(".burger").addClass("span-color--black-important")},1500)):9==r&&(r=10,a(".recipies").addClass("curent"),a(".products-list").addClass("prev"),a(".burger").addClass("burger--opacity-0")),a(".three-part-block").addClass("animate")};a("body").on("swiperight",o),a(".slider").on("wheel",function(t){s&&(console.log(s),s=!1,o(),setTimeout(function(){s=!0},1505),t.originalEvent.wheelDelta<0||0<t.originalEvent.wheelDelta&&(a(".three-part-block").hasClass("animate")&&1<=r&&r<=6?(a(".three-part-block .top-part .text-scroll").css("transform","translate3d(-"+100*(r-2)+"vw, 0, 0)"),a(".text__wrapper").each(function(t){t==r-1?a(this).attr("data-curent",""):t==r-2&&a(this).attr("data-curent","true")}),0==+a(".animate").attr("data-scroll")?(a(".main-page").removeClass("prevSlide"),a(".three-part-block").removeClass("animate"),a(".scroll-down").removeClass("hide"),a(".text__wrapper").each(function(t){0==t&&a(this).attr("data-curent","true")})):r<=2?(a(".three-part-block .top-part").removeClass("top-part--bg-position"),a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){t==r-2?a(this).attr("data-scroll","next"):t==r-3&&a(this).attr("data-scroll","curent")})):4==r&&setTimeout(function(){a(".burger").removeClass("span-color--black-important")},1500),a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){t==r-2?a(this).attr("data-scroll","next"):t==r-3?a(this).attr("data-scroll","curent"):t==r-1?a(this).attr("data-scroll",""):t==r&&a(this).attr("data-scroll","")}),1<=--r&&a(".three-part-block").attr("data-scroll",r-1)):7==r?(r=6,a(".three-part-block").removeClass("prev"),a(".video-with-handle").removeClass("curent"),a(".video-with-handle video").trigger("pause"),a(".scroll-down").removeClass("hide")):8==r?(console.log("test"),r=7,a(".big-video").removeClass("curent"),a(".video-with-handle").removeClass("prev"),setTimeout(function(){a(".burger").addClass("span-color--black-important")},1500)):9==r?(r=8,a(".big-video").removeClass("prev"),a(".products-list").removeClass("curent"),setTimeout(function(){a(".burger").removeClass("span-color--black-important")},1500)):10==r&&(r=9,a(".products-list").removeClass("prev"),a(".recipies").removeClass("curent"),a(".burger").removeClass("burger--opacity-0"))))}),Splitting({target:"[data-splitting]"});var i=a(".video-with-handle video"),l=a(".seekBar"),t=a(".seekBar button");i.on("timeupdate",function(t){l.css("width",100/this.duration*this.currentTime+"%")}),t.on("click",function(t){t.preventDefault()}),t.mousedown(function(t){t.preventDefault(),i.trigger("pause"),l.css({transition:"none"}),a(window).mousemove(function(t){t.pageX>l.offset().left&&l.offset().left+t.pageX<=a(window).width()&&(l.css("width",t.pageX-l.offset().left),a(".video-with-handle video")[0].currentTime=l.width()/l.parent().width()*a(".video-with-handle video")[0].duration)})}),a(window).mouseup(function(t){i.trigger("play"),a(window).off("mousemove"),l.css("width",t.pageX-l.offset().left),l.css("transition","all .3s linear")});var n=!0;a(".big-video .play-stop-btn a").on("click",function(){n?(n=!1,a(".big-video .video__wrapper video").trigger("play"),a(".logo-and-title, .seo, .social-links, .play-stop-btn").addClass("video--played"),a(".big-video").addClass("cursor--none"),a(".big-video .play-stop-btn a i").removeClass("fa-play"),a(".big-video .play-stop-btn a i").addClass("fa-pause"),a(".big-video").mousemove(function(){a(".play-stop-btn").removeClass("video--played"),a(".big-video").removeClass("cursor--none"),n||setTimeout(function(){a(".play-stop-btn").addClass("video--played")},2e3)})):(n=!0,a(".big-video .play-stop-btn a i").addClass("fa-play"),a(".big-video .play-stop-btn a i").removeClass("fa-pause"),a(".big-video .video__wrapper video").trigger("pause"),a(".logo-and-title, .seo, .social-links, .play-stop-btn").removeClass("video--played"),a(".big-video").addClass("cursor--none"))}),a(".recipies .recipies__item .play-btn a, .recipies .recipies__item .more-btn a").on("click",function(t){t.preventDefault(),a(".recipies__popup video").attr("src",a(this).parent().parent().attr("data-video")),a(".recipies__popup").addClass("active"),a(".burger").addClass("burger--active"),setTimeout(function(){a(".burger").removeClass("burger--opacity-0")},300)}),a(".recipies .main-field").slick({infinite:!0,slidesToShow:2,slidesToScroll:2,dots:!0,arrows:!1,responsive:[{breakpoint:992,settings:{slidesToShow:1,slidesToScroll:1}}]});var c=null;function d(){a(".products-intro .categories a").each(function(t){t==c?a(this).addClass("active"):a(this).removeClass("active")})}a(".products-intro .categories a").on("click",function(t){var e=a(this).index();return c=e,d(),c}),d(),a(".buy-from-partners__btn a").on("click",function(t){t.preventDefault(),a(".buy-from-partners").addClass("active"),a(".burger").addClass("span-color--black-buy-from-partners burger--active")}),a(".buy-from-partners .close-btn a").on("click",function(t){t.preventDefault(),a(".buy-from-partners").removeClass("active")}),a(".products__slider").slick({infinite:!0,prevArrow:a(".products-slider .arrows .prev a"),nextArrow:a(".products-slider .arrows .next a"),dots:!0}),a(".products-list__item").on("mouseenter",function(){a(".products-list__item").each(function(){a(this).removeClass("active"),a(this).addClass("unactive")}),a(this).removeClass("unactive"),a(this).addClass("active")}),a(".products-list__item").on("mouseleave",function(){a(".products-list__item").each(function(){a(this).removeClass("active"),a(this).removeClass("unactive")})});var p=function(e){s=!1,a(".burger").removeClass("burger--active"),a(".slide").each(function(){a(this).removeClass("curent prev"),+a(this).attr("data-slide")==+e?(a(this).addClass("curent"),console.log("test1")):+a(this).attr("data-slide")<+e?(a(this).addClass("curent prev"),console.log("test2")):(a(this).remove("curent prev"),console.log("test3"))}),r=+e+4,setTimeout(function(){a(".main-page").addClass("prevSlide"),a(".three-part-block").addClass("animate prev"),a(".three-part-block").attr("data-scroll","5"),a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){t==r-+e?a(this).attr("data-scroll","curent"):t==r-(+e-1)?a(this).attr("data-scroll","next"):a(this).attr("data-scroll","prev")}),a(".three-part-block .top-part").addClass("top-part--bg-position"),a(".three-part-block .top-part .text-scroll").css("transform","translate3d(-"+100*r+"vw, 0, 0)"),a(".text__wrapper").each(function(t){t==r-2?a(this).attr("data-curent","true"):a(this).attr("data-curent","false")}),a(".burger").addClass("span-color--black-important")},1500),setTimeout(function(){s=!0},2500)};a(".drop-menu nav a").on("click",function(){var t=a(this).parent().attr("data-scrollTo");p(t),a(".drop-menu").removeClass("drop-menu--active")}),a(".scroll-down a").on("click",function(t){t.preventDefault();var e=a(this).parent().attr("data-scrollTo");a(this).parent().addClass("hide"),p(e)})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyIkIiwib24iLCJkZWxheSIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJzZXRUaW1lb3V0IiwiYWRkQ2xhc3MiLCJ0aGlzIiwidG9nZ2xlQ2xhc3MiLCJsZW5ndGgiLCJlYWNoIiwiY3NzIiwiaW1hZ2VaaW5kZXgiLCJjdXJlbnRTbGlkZSIsImNhblNjcm9sbCIsImluZGV4Iiwic2Nyb2xsVG9OZXhTbGlkZSIsImF0dHIiLCJ0cmlnZ2VyIiwiZSIsImNvbnNvbGUiLCJsb2ciLCJvcmlnaW5hbEV2ZW50Iiwid2hlZWxEZWx0YSIsIlNwbGl0dGluZyIsInRhcmdldCIsInZpZGVvIiwic2Vla0JhciIsInNlZWtCYXJCdG4iLCJldmVudCIsImR1cmF0aW9uIiwiY3VycmVudFRpbWUiLCJwcmV2ZW50RGVmYXVsdCIsIm1vdXNlZG93biIsInRyYW5zaXRpb24iLCJ3aW5kb3ciLCJtb3VzZW1vdmUiLCJwYWdlWCIsIm9mZnNldCIsImxlZnQiLCJ3aWR0aCIsInBhcmVudCIsIm1vdXNldXAiLCJvZmYiLCJiaWdWaWRlb1BsYXkiLCJzbGljayIsImluZmluaXRlIiwic2xpZGVzVG9TaG93Iiwic2xpZGVzVG9TY3JvbGwiLCJkb3RzIiwiYXJyb3dzIiwicmVzcG9uc2l2ZSIsImJyZWFrcG9pbnQiLCJzZXR0aW5ncyIsIndoaWNoQ2F0ZWdvcnkiLCJjaGFuZ2VDYXRlZ29ydSIsInByZXZBcnJvdyIsIm5leHRBcnJvdyIsInNjcm9sbFRvU29tZVNsaWRlIiwid2hpY2hTbGlkZSIsInJlbW92ZSIsInNsaWRlIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFVQSxHQWFSQSxFQUFFLFdBQVdDLEdBQUcsUUFBUyxXQVYzQixJQUNNQyxFQVVDRixFQUFFLHNCQUFzQkcsU0FBUyxZQUFjSCxFQUFFLGNBQWNHLFNBQVMsc0JBQ3pFSCxFQUFFLHNCQUFzQkksWUFBWSxVQUNwQ0osRUFBRSxXQUFXSSxZQUFZLHVEQUNsQkosRUFBRSxv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QUFTa0IsR0FDdkNBLEVBQUVhLGlCQUNGLElBQUk2QixFQUFRN0QsRUFBRU8sTUFBTWtDLFNBQVN4QixLQUFLLGlCQUNsQ2pCLEVBQUVPLE1BQU1rQyxTQUFTbkMsU0FBUyxRQUMxQm9ELEVBQWtCRyxLQTVmdEIsQ0ErZkdDIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oJCkge1xyXG4gIFxyXG4vLyAtLS0+IERST1AgRE9XTiBNRU5VXHJcbmZ1bmN0aW9uIGdpdmVOYXZpZ2F0aW9uRGVsYXkgKCl7IFxyXG4gIHZhciBkZWxheSA9IDAuMSAqICQoJy5kcm9wLW1lbnUtLWFjdGl2ZSBuYXYgbGknKS5sZW5ndGg7XHJcbiAgXHJcbiAgJCgnLmRyb3AtbWVudS0tYWN0aXZlIG5hdiBsaScpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICQodGhpcykuY3NzKCd0cmFuc2l0aW9uLWRlbGF5JywgZGVsYXkrJ3MnKVxyXG4gICAgZGVsYXkgPSBkZWxheSAtIDAuMVxyXG4gIH0pXHJcbn1cclxuXHJcbiBcclxuICAkKCcuYnVyZ2VyJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgIGlmKCQoJy5idXktZnJvbS1wYXJ0bmVycycpLmhhc0NsYXNzKCdhY3RpdmUnKSAmJiAhJCgnLmRyb3AtbWVudScpLmhhc0NsYXNzKCdkcm9wLW1lbnUtLWFjdGl2ZScpKXtcclxuICAgICAgJCgnLmJ1eS1mcm9tLXBhcnRuZXJzJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgICQoJy5idXJnZXInKS5yZW1vdmVDbGFzcygnYnVyZ2VyLS1hY3RpdmUgc3Bhbi1jb2xvci0tYmxhY2stYnV5LWZyb20tcGFydG5lcnMnKVxyXG4gICAgfWVsc2UgaWYoJCgnLnJlY2lwaWVzX19wb3B1cCcpLmhhc0NsYXNzKCdhY3RpdmUnKSl7XHJcbiAgICAgICQoJy5yZWNpcGllc19fcG9wdXAnKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcclxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICQoJy5idXJnZXInKS5yZW1vdmVDbGFzcygnYnVyZ2VyLS1hY3RpdmUnKVxyXG4gICAgICB9LCAzMDApXHJcbiAgICAgICQoJy5idXJnZXInKS5hZGRDbGFzcygnYnVyZ2VyLS1vcGFjaXR5LTAnKVxyXG4gICAgfWVsc2UgaWYoJCgnLmJ1eS1mcm9tLXBhcnRuZXJzJykuaGFzQ2xhc3MoJ2FjdGl2ZScpICYmICQoJy5kcm9wLW1lbnUnKS5oYXNDbGFzcygnZHJvcC1tZW51LS1hY3RpdmUnKSl7XHJcbiAgICAgICQoJy5idXktZnJvbS1wYXJ0bmVycycpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAkKCcuYnVyZ2VyJykucmVtb3ZlQ2xhc3MoJ3NwYW4tY29sb3ItLWJsYWNrLWJ1eS1mcm9tLXBhcnRuZXJzJylcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2J1cmdlci0tYWN0aXZlJyk7XHJcbiAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ3NwYW4tY29sb3ItLWJsYWNrJyk7XHJcbiAgICAgICQoJy5kcm9wLW1lbnUnKS50b2dnbGVDbGFzcygnZHJvcC1tZW51LS1hY3RpdmUnKTtcclxuICAgICAgZ2l2ZU5hdmlnYXRpb25EZWxheSgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgfSlcclxuLy8gPC0tLSBEUk9QIERPV04gTUVOVVxyXG5cclxuLy8gLS0tPiBTTElERVIgTE9HSUNLIFxyXG5cclxuICB2YXIgaW1hZ2VaaW5kZXggPSAkKCcudGhyZWUtcGFydC1ibG9jayAuYm90dG9tLXBhcnQgLmJvdHRvbS1wYXJ0X19yaWdodCAuaW1nJykubGVuZ3RoIFxyXG4gIHZhciBjdXJlbnRTbGlkZSA9IDA7XHJcbiAgdmFyIGNhblNjcm9sbCA9IHRydWU7XHJcbiAgdmFyIGFuaW1hdGl0b25FbmQgPSB0cnVlO1xyXG5cclxuICAvLyAtLS0+IEFERCBaLUlOREVYIEZPUiBBTEwgSU1BR0VTXHJcbiAgJCgnLnRocmVlLXBhcnQtYmxvY2sgLmJvdHRvbS1wYXJ0IC5ib3R0b20tcGFydF9fcmlnaHQgLmltZycpLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgJCh0aGlzKS5jc3MoJ3pJbmRleCcsIGltYWdlWmluZGV4KVxyXG4gICAgLS1pbWFnZVppbmRleFxyXG4gIH0pXHJcbiAgLy8gPC0tLSBBREQgWi1JTkRFWCBGT1IgQUxMIElNQUdFU1xyXG4vLyAgICQoJ2JvZHknKS5vbigndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kJywgZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4vLyAgICAgICBjb25zb2xlLmxvZygndGVzdCcpO1xyXG4vLyAgICAgICBhbmltYXRpdG9uRW5kID0gdHJ1ZVxyXG4vLyAgICAgfSwgMTUwMClcclxuLy8gICAgIHJldHVybiBcclxuLy8gfSk7IFxyXG5cclxuXHJcbiAgdmFyIHNjcm9sbFRvTmV4U2xpZGUgPSBmdW5jdGlvbigpe1xyXG4gICAgJCgnLm1haW4tcGFnZScpLmFkZENsYXNzKCdwcmV2U2xpZGUnKVxyXG4gICAgLy8gJCgnLnNjcm9sbC1kb3duJykuYWRkQ2xhc3MoJ2hpZGUnKVxyXG4gICAgICAgaWYoY3VyZW50U2xpZGUgPD0gJCgnLnRocmVlLXBhcnQtYmxvY2sgLmJvdHRvbS1wYXJ0IC5ib3R0b20tcGFydF9fcmlnaHQgLmltZycpLmxlbmd0aCAtIDEpe1xyXG4gICAgICAgIC8vIC0tLT4gQUREIEJHIEZPUiBGSVJTVCBTTElERVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKGN1cmVudFNsaWRlID09IDEpe1xyXG4gICAgICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2sgLnRvcC1wYXJ0JykuYWRkQ2xhc3MoJ3RvcC1wYXJ0LS1iZy1wb3NpdGlvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGN1cmVudFNsaWRlID09IDMpe1xyXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkKCcuYnVyZ2VyJykuYWRkQ2xhc3MoJ3NwYW4tY29sb3ItLWJsYWNrLWltcG9ydGFudCcpXHJcbiAgICAgICAgICB9LCAxNTAwKVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyA8LS0tIEFERCBCRyBGT1IgRklSU1QgU0xJREVcclxuXHJcbiAgICAgICAgLy8gLS0tPiBURVhUIEFOSU1BVElPTlxyXG4gICAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrIC50b3AtcGFydCAudGV4dC1zY3JvbGwnKS5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUzZCgtJysgKDEwMCAqIGN1cmVudFNsaWRlKSArJ3Z3LCAwLCAwKScpXHJcblxyXG4gICAgICAgICQoJy50ZXh0X193cmFwcGVyJykuZWFjaChmdW5jdGlvbihpbmRleCl7XHJcbiAgICAgICAgICBpZihpbmRleCA9PSBjdXJlbnRTbGlkZSl7XHJcbiAgICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1jdXJlbnQnLCAndHJ1ZScpXHJcbiAgICAgICAgICB9ZWxzZSBpZihpbmRleCA9PSBjdXJlbnRTbGlkZSAtIDEpe1xyXG4gICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtY3VyZW50JywgJ2ZhbHNlJylcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIDwtLS0gVEVYVCBBTklNQVRJT05cclxuXHJcbiAgICAgICAgLy8gLS0tPiBDSEFOR0UgREFUQS1BVFJJQlVURVMgRk9SIElNQUdFU1xyXG4gICAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrIC5ib3R0b20tcGFydCAuYm90dG9tLXBhcnRfX3JpZ2h0IC5pbWcnKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcclxuICAgICAgICAgIGlmKGluZGV4ID09IGN1cmVudFNsaWRlIC0gMSl7XHJcbiAgICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1zY3JvbGwnLCAnY3VyZW50JylcclxuICAgICAgICAgIH1lbHNlIGlmKGluZGV4ID09IGN1cmVudFNsaWRlIC0gMil7XHJcbiAgICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1zY3JvbGwnLCAncHJldicpXHJcbiAgICAgICAgICB9ZWxzZSBpZihpbmRleCA9PSBjdXJlbnRTbGlkZSl7XHJcbiAgICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1zY3JvbGwnLCAnbmV4dCcpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAvLyA8LS0tIENIQU5HRSBEQVRBLUFUUklCVVRFUyBGT1IgSU1BR0VTXHJcbiAgICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2snKS5hdHRyKCdkYXRhLXNjcm9sbCcsIGN1cmVudFNsaWRlKVxyXG4gICAgICAgIGN1cmVudFNsaWRlKytcclxuICAgICAgfSBcclxuICAgICAgXHJcbiAgICAgIGVsc2UgaWYoY3VyZW50U2xpZGUgPT0gNil7XHJcbiAgICAgICAgY3VyZW50U2xpZGUgPSA3XHJcbiAgICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2snKS5hZGRDbGFzcygncHJldicpXHJcbiAgICAgICAgJCgnLnZpZGVvLXdpdGgtaGFuZGxlJykuYWRkQ2xhc3MoJ2N1cmVudCcpXHJcbiAgICAgICAgJCgnLmJ1cmdlcicpLmFkZENsYXNzKCdzcGFuLWNvbG9yLS1ibGFjaycpXHJcbiAgICAgICAgJCgnLnZpZGVvLXdpdGgtaGFuZGxlIHZpZGVvJykudHJpZ2dlcigncGxheScpXHJcbiAgICAgICAgJCgnLnNjcm9sbC1kb3duJykuYWRkQ2xhc3MoJ2hpZGUnKVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYoY3VyZW50U2xpZGUgPT0gNyl7XHJcbiAgICAgICAgY3VyZW50U2xpZGUgPSA4XHJcbiAgICAgICAgJCgnLmJpZy12aWRlbycpLmFkZENsYXNzKCdjdXJlbnQnKTtcclxuICAgICAgICAkKCcudmlkZW8td2l0aC1oYW5kbGUnKS5hZGRDbGFzcygncHJldicpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICQoJy5idXJnZXInKS5yZW1vdmVDbGFzcygnc3Bhbi1jb2xvci0tYmxhY2staW1wb3J0YW50Jyk7XHJcbiAgICAgICAgICAkKCcuYnVyZ2VyJykucmVtb3ZlQ2xhc3MoJ3NwYW4tY29sb3ItLWJsYWNrJyk7XHJcbiAgICAgICAgfSwgMTUwMClcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmKGN1cmVudFNsaWRlID09IDgpe1xyXG4gICAgICAgIGN1cmVudFNsaWRlID0gOTtcclxuICAgICAgICAkKCcuYmlnLXZpZGVvJykuYWRkQ2xhc3MoJ3ByZXYnKTtcclxuICAgICAgICAkKCcucHJvZHVjdHMtbGlzdCcpLmFkZENsYXNzKCdjdXJlbnQnKVxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICQoJy5idXJnZXInKS5hZGRDbGFzcygnc3Bhbi1jb2xvci0tYmxhY2staW1wb3J0YW50JylcclxuICAgICAgICB9LCAxNTAwKVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYoY3VyZW50U2xpZGUgPT0gOSl7XHJcbiAgICAgICAgY3VyZW50U2xpZGUgPSAxMDtcclxuICAgICAgICAkKCcucmVjaXBpZXMnKS5hZGRDbGFzcygnY3VyZW50Jyk7XHJcbiAgICAgICAgJCgnLnByb2R1Y3RzLWxpc3QnKS5hZGRDbGFzcygncHJldicpOyBcclxuICAgICAgICAkKCcuYnVyZ2VyJykuYWRkQ2xhc3MoJ2J1cmdlci0tb3BhY2l0eS0wJylcclxuICAgICAgfVxyXG4gICAgICAkKCcudGhyZWUtcGFydC1ibG9jaycpLmFkZENsYXNzKCdhbmltYXRlJyk7XHJcbiAgfVxyXG5cclxuICAkKCBcImJvZHlcIiApLm9uKCBcInN3aXBlcmlnaHRcIiwgc2Nyb2xsVG9OZXhTbGlkZSApO1xyXG5cclxuXHJcbiAgJCgnLnNsaWRlcicpLm9uKCd3aGVlbCcsIGZ1bmN0aW9uKGUpe1xyXG5cclxuICAgICAgaWYoY2FuU2Nyb2xsKXtcclxuICAgICAgICAvLy0tLT4gU0NST0xMIFRPIE5FWFQgU0xJREVcclxuICAgICAgICBjb25zb2xlLmxvZyhjYW5TY3JvbGwpXHJcbiAgICAgICAgY2FuU2Nyb2xsID0gZmFsc2U7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc2Nyb2xsVG9OZXhTbGlkZSgpO1xyXG5cclxuICAgICAgICAvLyAtLS0+IEFERCBQT1NJQklMSVRZIFRPIFNDUk9MTCBBR0FJTiBUSFJPVUdIIE9ORSBTRUNPTkRcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICBjYW5TY3JvbGwgPSB0cnVlXHJcbiAgICAgICAgfSwgMTUwNSlcclxuICAgICAgLy8gPC0tLSBBREQgUE9TSUJJTElUWSBUTyBTQ1JPTEwgQUdBSU4gVEhST1VHSCBPTkUgU0VDT05EXHJcbiAgICAgICAgaWYoZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGEgPCAwKSB7XHJcbiAgICAgICAgICBcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIDwtLS0gU0NST0xMIFRPIE5FWFQgU0xJREVcclxuXHJcbiAgICAgICAgLy8gLS0tPiBTQ1JPTEwgVE8gUFJFVklPVVMgU0xJREUgXHJcbiAgICAgICAgZWxzZSBpZihlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSA+IDApe1xyXG4gICAgICAgICAgaWYoJCgnLnRocmVlLXBhcnQtYmxvY2snKS5oYXNDbGFzcygnYW5pbWF0ZScpICAmJiBjdXJlbnRTbGlkZSA+PSAxICYmIGN1cmVudFNsaWRlIDw9IDYpe1xyXG4gICAgICAgICAgICAvLyAtLS0+IFRFWFQgQU5JTUFUSU9OXHJcbiAgICAgICAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrIC50b3AtcGFydCAudGV4dC1zY3JvbGwnKS5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUzZCgtJysgKDEwMCAqIChjdXJlbnRTbGlkZSAtIDIpKSArJ3Z3LCAwLCAwKScpXHJcbiAgICAgICAgICAgICQoJy50ZXh0X193cmFwcGVyJykuZWFjaChmdW5jdGlvbihpbmRleCl7XHJcbiAgICAgICAgICAgICAgaWYoaW5kZXggPT0gY3VyZW50U2xpZGUtMSl7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtY3VyZW50JywgJycpXHJcbiAgICAgICAgICAgICAgfWVsc2UgaWYoaW5kZXggPT0gY3VyZW50U2xpZGUgLSAyKXtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1jdXJlbnQnLCAndHJ1ZScpXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvLyAtLS0+IFRFWFQgQU5JTUFUSU9OXHJcblxyXG4gICAgICAgICAgICAvLyBSRU1PVkUgSUYgSVQgRklSU1QgU0xJREVcclxuICAgICAgICAgICAgaWYoKygkKCcuYW5pbWF0ZScpLmF0dHIoJ2RhdGEtc2Nyb2xsJykpID09IDAgKXtcclxuICAgICAgICAgICAgICAkKCcubWFpbi1wYWdlJykucmVtb3ZlQ2xhc3MoJ3ByZXZTbGlkZScpXHJcbiAgICAgICAgICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2snKS5yZW1vdmVDbGFzcygnYW5pbWF0ZScpXHJcbiAgICAgICAgICAgICAgJCgnLnNjcm9sbC1kb3duJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKVxyXG4gICAgICAgICAgICAgICQoJy50ZXh0X193cmFwcGVyJykuZWFjaChmdW5jdGlvbihpbmRleCl7XHJcbiAgICAgICAgICAgICAgICBpZihpbmRleCA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLWN1cmVudCcsICd0cnVlJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAvLyBSRU1PVkUgSUYgSVQgRklSU1QgU0xJREVcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAvLyBSRVRVUk4gQkFDSyBCRyBJTUFHRVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIGVsc2UgaWYoY3VyZW50U2xpZGUgPD0gMil7XHJcbiAgICAgICAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrIC50b3AtcGFydCcpLnJlbW92ZUNsYXNzKCd0b3AtcGFydC0tYmctcG9zaXRpb24nKVxyXG4gICAgICAgICAgICAkKCcudGhyZWUtcGFydC1ibG9jayAuYm90dG9tLXBhcnQgLmJvdHRvbS1wYXJ0X19yaWdodCAuaW1nJykuZWFjaChmdW5jdGlvbihpbmRleCl7XHJcbiAgICAgICAgICAgICAgaWYoaW5kZXggPT0gY3VyZW50U2xpZGUgLSAyKXtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1zY3JvbGwnLCAnbmV4dCcpXHJcbiAgICAgICAgICAgICAgfWVsc2UgaWYoaW5kZXggPT0gY3VyZW50U2xpZGUgLSAzKXtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1zY3JvbGwnLCAnY3VyZW50JylcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBSRVRVUk4gQkFDSyBCRyBJTUFHRVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBpZihjdXJlbnRTbGlkZSA9PSA0KXtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICQoJy5idXJnZXInKS5yZW1vdmVDbGFzcygnc3Bhbi1jb2xvci0tYmxhY2staW1wb3J0YW50JylcclxuICAgICAgICAgICAgfSwgMTUwMClcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICAvLyAtLS0+IENIQU5HRSBEQVRBLUFUUklCVVRFUyBGT1IgSU1BR0VTXHJcbiAgICAgICAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrIC5ib3R0b20tcGFydCAuYm90dG9tLXBhcnRfX3JpZ2h0IC5pbWcnKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcclxuICAgICAgICAgICAgICBpZihpbmRleCA9PSBjdXJlbnRTbGlkZSAtIDIpe1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcsICduZXh0JylcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZSBpZihpbmRleCA9PSBjdXJlbnRTbGlkZSAtIDMpe1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcsICdjdXJlbnQnKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIGlmKCBpbmRleCA9PSBjdXJlbnRTbGlkZSAtIDEpe1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcsICcnKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIGlmKCBpbmRleCA9PSBjdXJlbnRTbGlkZSl7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJycpXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgLy8gPC0tLSBDSEFOR0UgREFUQS1BVFJJQlVURVMgRk9SIElNQUdFU1xyXG4gICAgICAgICAgICAtLWN1cmVudFNsaWRlXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoY3VyZW50U2xpZGUgPj0gMSl7XHJcbiAgICAgICAgICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2snKS5hdHRyKCdkYXRhLXNjcm9sbCcsIGN1cmVudFNsaWRlIC0gMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihjdXJlbnRTbGlkZSA9PSA3KXtcclxuICAgICAgICAgIGN1cmVudFNsaWRlID0gNlxyXG4gICAgICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2snKS5yZW1vdmVDbGFzcygncHJldicpO1xyXG4gICAgICAgICAgJCgnLnZpZGVvLXdpdGgtaGFuZGxlJykucmVtb3ZlQ2xhc3MoJ2N1cmVudCcpO1xyXG4gICAgICAgICAgJCgnLnZpZGVvLXdpdGgtaGFuZGxlIHZpZGVvJykudHJpZ2dlcigncGF1c2UnKVxyXG4gICAgICAgICAgJCgnLnNjcm9sbC1kb3duJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGN1cmVudFNsaWRlID09IDgpe1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ3Rlc3QnKVxyXG4gICAgICAgICAgY3VyZW50U2xpZGUgPSA3XHJcbiAgICAgICAgICAkKCcuYmlnLXZpZGVvJykucmVtb3ZlQ2xhc3MoJ2N1cmVudCcpO1xyXG4gICAgICAgICAgJCgnLnZpZGVvLXdpdGgtaGFuZGxlJykucmVtb3ZlQ2xhc3MoJ3ByZXYnKTtcclxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCgnLmJ1cmdlcicpLmFkZENsYXNzKCdzcGFuLWNvbG9yLS1ibGFjay1pbXBvcnRhbnQnKVxyXG4gICAgICAgICAgfSwgMTUwMClcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihjdXJlbnRTbGlkZSA9PSA5KXtcclxuICAgICAgICAgIGN1cmVudFNsaWRlID0gODtcclxuICAgICAgICAgICQoJy5iaWctdmlkZW8nKS5yZW1vdmVDbGFzcygncHJldicpO1xyXG4gICAgICAgICAgJCgnLnByb2R1Y3RzLWxpc3QnKS5yZW1vdmVDbGFzcygnY3VyZW50Jyk7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICQoJy5idXJnZXInKS5yZW1vdmVDbGFzcygnc3Bhbi1jb2xvci0tYmxhY2staW1wb3J0YW50JylcclxuICAgICAgICAgIH0sIDE1MDApXHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGN1cmVudFNsaWRlID09IDEwKXtcclxuICAgICAgICAgIGN1cmVudFNsaWRlID0gOTtcclxuICAgICAgICAgICQoJy5wcm9kdWN0cy1saXN0JykucmVtb3ZlQ2xhc3MoJ3ByZXYnKTtcclxuICAgICAgICAgICQoJy5yZWNpcGllcycpLnJlbW92ZUNsYXNzKCdjdXJlbnQnKTtcclxuICAgICAgICAgICQoJy5idXJnZXInKS5yZW1vdmVDbGFzcygnYnVyZ2VyLS1vcGFjaXR5LTAnKVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgICAvLyAtLS0+IEFERCBQT1NJQklMSVRZIFRPIFNDUk9MTCBBR0FJTiBUSFJPVUdIIE9ORSBTRUNPTkRcclxuICAgICAgICAgIC8vIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgIC8vICAgY2FuU2Nyb2xsID0gdHJ1ZVxyXG4gICAgICAgICAgLy8gfSwgMTAwMClcclxuICAgICAgICAgIC8vIDwtLS0gQUREIFBPU0lCSUxJVFkgVE8gU0NST0xMIEFHQUlOIFRIUk9VR0ggT05FIFNFQ09ORFxyXG5cclxuICAgICAgfVxyXG4gICAgICAvLyA8LS0tIFNDUk9MTCBUTyBQUkVWSU9VUyBTTElERVxyXG5cclxuICAgICAgLy8gLy8gLS0tPiBSRU1PVkUgUE9TSUJJTElUWSBUTyBTQ1JPTEwgQUdBSU5cclxuICAgICAgLy8gY2FuU2Nyb2xsID0gZmFsc2VcclxuICAgICAgLy8gLy8gPC0tLSBSRU1PVkUgUE9TSUJJTElUWSBUTyBTQ1JPTEwgQUdBSU5cclxuICB9KTtcclxuLy8gPC0tLSBTTElERVIgTE9HSUNLXHJcblxyXG4gIC8vIC0tLT4gVEVYVCBTUExJVElOR1xyXG4gIFNwbGl0dGluZyh7XHJcbiAgICB0YXJnZXQ6IFwiW2RhdGEtc3BsaXR0aW5nXVwiXHJcbiAgfSk7XHJcbiAgLy8gPC0tLSBURVhUIFNQTElUSU5HXHJcblxyXG4gIC8vIC0tLT4gU0VFSyBCQVIgRk9SICd2aWRlby13aXRoLWhhbmRsZSdcclxuICB2YXIgdmlkZW8gPSAkKCcudmlkZW8td2l0aC1oYW5kbGUgdmlkZW8nKTtcclxuICB2YXIgc2Vla0JhciA9ICQoXCIuc2Vla0JhclwiKTtcclxuICB2YXIgc2Vla0JhckJ0biA9ICQoXCIuc2Vla0JhciBidXR0b25cIilcclxuICAgXHJcbiAgdmlkZW8ub24oXHJcbiAgICBcInRpbWV1cGRhdGVcIiwgXHJcbiAgICBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgIHNlZWtCYXIuY3NzKCd3aWR0aCcsICcnKyAoKDEwMCAvIHRoaXMuZHVyYXRpb24pICogdGhpcy5jdXJyZW50VGltZSkgKyclJylcclxuICB9KTtcclxuXHJcbiAgc2Vla0JhckJ0bi5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gIH0pO1xyXG5cclxuICBzZWVrQmFyQnRuLm1vdXNlZG93bihmdW5jdGlvbihlKXtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZpZGVvLnRyaWdnZXIoJ3BhdXNlJyk7XHJcbiAgICBzZWVrQmFyLmNzcyh7XHJcbiAgICAgIHRyYW5zaXRpb246ICdub25lJyxcclxuICAgIH0pXHJcbiAgICBcclxuICAgICQod2luZG93KS5tb3VzZW1vdmUoZnVuY3Rpb24oZSkge1xyXG4gICAgICBpZihlLnBhZ2VYID4gc2Vla0Jhci5vZmZzZXQoKS5sZWZ0ICYmIChzZWVrQmFyLm9mZnNldCgpLmxlZnQgKyBlLnBhZ2VYKSA8PSAkKHdpbmRvdykud2lkdGgoKSl7XHJcbiAgICAgICAgc2Vla0Jhci5jc3MoJ3dpZHRoJywgIGUucGFnZVggLSBzZWVrQmFyLm9mZnNldCgpLmxlZnQpXHJcbiAgICAgICAgJCgnLnZpZGVvLXdpdGgtaGFuZGxlIHZpZGVvJylbMF0uY3VycmVudFRpbWUgPSAoKHNlZWtCYXIud2lkdGgoKSAvIHNlZWtCYXIucGFyZW50KCkud2lkdGgoKSkpICogJCgnLnZpZGVvLXdpdGgtaGFuZGxlIHZpZGVvJylbMF0uZHVyYXRpb25cclxuICAgICAgfSBcclxuICAgIH0pXHJcbiAgfSk7XHJcblxyXG4gICQod2luZG93KS5tb3VzZXVwKGZ1bmN0aW9uKGUpe1xyXG4gICAgdmlkZW8udHJpZ2dlcigncGxheScpO1xyXG4gICAgJCh3aW5kb3cpLm9mZignbW91c2Vtb3ZlJyk7XHJcbiAgICBzZWVrQmFyLmNzcygnd2lkdGgnLCAgZS5wYWdlWCAtIHNlZWtCYXIub2Zmc2V0KCkubGVmdClcclxuICAgIHNlZWtCYXIuY3NzKCd0cmFuc2l0aW9uJywgJ2FsbCAuM3MgbGluZWFyJylcclxuICB9KTtcclxuICAvLyA8LS0tIFNFRUsgQkFSIEZPUiAndmlkZW8td2l0aC1oYW5kbGUnXHJcblxyXG4gIC8vIC0tLT4gQklHIFZJREVPIEJMT0NLXHJcbiAgICB2YXIgYmlnVmlkZW9QbGF5ID0gdHJ1ZVxyXG5cclxuICAgICQoJy5iaWctdmlkZW8gLnBsYXktc3RvcC1idG4gYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgIGlmKGJpZ1ZpZGVvUGxheSl7XHJcbiAgICAgICAgYmlnVmlkZW9QbGF5ID0gZmFsc2U7XHJcbiAgICAgICAgJCgnLmJpZy12aWRlbyAudmlkZW9fX3dyYXBwZXIgdmlkZW8nKS50cmlnZ2VyKCdwbGF5Jyk7XHJcbiAgICAgICAgJCgnLmxvZ28tYW5kLXRpdGxlLCAuc2VvLCAuc29jaWFsLWxpbmtzLCAucGxheS1zdG9wLWJ0bicpLmFkZENsYXNzKCd2aWRlby0tcGxheWVkJyk7XHJcbiAgICAgICAgJCgnLmJpZy12aWRlbycpLmFkZENsYXNzKCdjdXJzb3ItLW5vbmUnKTtcclxuICAgICAgICAkKCcuYmlnLXZpZGVvIC5wbGF5LXN0b3AtYnRuIGEgaScpLnJlbW92ZUNsYXNzKCdmYS1wbGF5Jyk7XHJcbiAgICAgICAgJCgnLmJpZy12aWRlbyAucGxheS1zdG9wLWJ0biBhIGknKS5hZGRDbGFzcygnZmEtcGF1c2UnKTtcclxuICAgICAgICAkKCcuYmlnLXZpZGVvJykubW91c2Vtb3ZlKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAkKCcucGxheS1zdG9wLWJ0bicpLnJlbW92ZUNsYXNzKCd2aWRlby0tcGxheWVkJylcclxuICAgICAgICAgICQoJy5iaWctdmlkZW8nKS5yZW1vdmVDbGFzcygnY3Vyc29yLS1ub25lJylcclxuICAgICAgICAgIGlmKCFiaWdWaWRlb1BsYXkpe1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgJCgnLnBsYXktc3RvcC1idG4nKS5hZGRDbGFzcygndmlkZW8tLXBsYXllZCcpXHJcbiAgICAgICAgICAgIH0sIDIwMDApXHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIGJpZ1ZpZGVvUGxheSA9IHRydWU7XHJcbiAgICAgICAgJCgnLmJpZy12aWRlbyAucGxheS1zdG9wLWJ0biBhIGknKS5hZGRDbGFzcygnZmEtcGxheScpO1xyXG4gICAgICAgICQoJy5iaWctdmlkZW8gLnBsYXktc3RvcC1idG4gYSBpJykucmVtb3ZlQ2xhc3MoJ2ZhLXBhdXNlJyk7XHJcbiAgICAgICAgJCgnLmJpZy12aWRlbyAudmlkZW9fX3dyYXBwZXIgdmlkZW8nKS50cmlnZ2VyKCdwYXVzZScpO1xyXG4gICAgICAgICQoJy5sb2dvLWFuZC10aXRsZSwgLnNlbywgLnNvY2lhbC1saW5rcywgLnBsYXktc3RvcC1idG4nKS5yZW1vdmVDbGFzcygndmlkZW8tLXBsYXllZCcpXHJcbiAgICAgICAgJCgnLmJpZy12aWRlbycpLmFkZENsYXNzKCdjdXJzb3ItLW5vbmUnKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAvLyA8LS0tIEJJRyBWSURFTyBCTE9DS1xyXG5cclxuICAvLyAtLS0+IFJFQ0lQSUVTIEJMT0NLXHJcblxyXG4gICAgJCgnLnJlY2lwaWVzIC5yZWNpcGllc19faXRlbSAucGxheS1idG4gYSwgLnJlY2lwaWVzIC5yZWNpcGllc19faXRlbSAubW9yZS1idG4gYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICQoJy5yZWNpcGllc19fcG9wdXAgdmlkZW8nKS5hdHRyKCdzcmMnLCAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmF0dHIoJ2RhdGEtdmlkZW8nKSlcclxuICAgICAgJCgnLnJlY2lwaWVzX19wb3B1cCcpLmFkZENsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAkKCcuYnVyZ2VyJykuYWRkQ2xhc3MoJ2J1cmdlci0tYWN0aXZlJylcclxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICQoJy5idXJnZXInKS5yZW1vdmVDbGFzcygnYnVyZ2VyLS1vcGFjaXR5LTAnKVxyXG4gICAgICB9LCAzMDApXHJcbiAgICB9KVxyXG4gICAgLy8gLS0tPiBTTElERVJcclxuXHJcbiAgICAkKCcucmVjaXBpZXMgLm1haW4tZmllbGQnKS5zbGljayh7XHJcbiAgICAgIGluZmluaXRlOiB0cnVlLFxyXG4gICAgICBzbGlkZXNUb1Nob3c6IDIsXHJcbiAgICAgIHNsaWRlc1RvU2Nyb2xsOiAyLFxyXG4gICAgICBkb3RzOiB0cnVlLFxyXG4gICAgICBhcnJvd3M6IGZhbHNlLFxyXG4gICAgICByZXNwb25zaXZlOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgYnJlYWtwb2ludDogOTkyLFxyXG4gICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxyXG4gICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMSBcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIF1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIDwtLS0gU0xJREVSXHJcbiAgLy8gPC0tLSBSRUNJUElFUyBCTE9DS1xyXG5cclxuICAvLyAtLS0+IENBVEVHT1JJRVMgTE9HSUNcclxuICAgIHZhciB3aGljaENhdGVnb3J5ID0gbnVsbFxyXG5cclxuICAgICQoJy5wcm9kdWN0cy1pbnRybyAuY2F0ZWdvcmllcyBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgIHZhciBpbmRleCA9ICQodGhpcykuaW5kZXgoKVxyXG4gICAgICB3aGljaENhdGVnb3J5ID0gaW5kZXhcclxuICAgICAgY2hhbmdlQ2F0ZWdvcnUoKVxyXG4gICAgICByZXR1cm4gd2hpY2hDYXRlZ29yeVxyXG4gICAgfSlcclxuXHJcbiAgICBmdW5jdGlvbiBjaGFuZ2VDYXRlZ29ydSgpe1xyXG4gICAgICAkKCcucHJvZHVjdHMtaW50cm8gLmNhdGVnb3JpZXMgYScpLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgICAgIGlmIChpbmRleCA9PSB3aGljaENhdGVnb3J5KXtcclxuICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIGNoYW5nZUNhdGVnb3J1KClcclxuXHJcbiAgLy8gPC0tLSBDQVRFR09SSUVTIExPR0lDXHJcbiAgJCgnLmJ1eS1mcm9tLXBhcnRuZXJzX19idG4gYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgJCgnLmJ1eS1mcm9tLXBhcnRuZXJzJykuYWRkQ2xhc3MoXCJhY3RpdmVcIilcclxuICAgICQoJy5idXJnZXInKS5hZGRDbGFzcygnc3Bhbi1jb2xvci0tYmxhY2stYnV5LWZyb20tcGFydG5lcnMgYnVyZ2VyLS1hY3RpdmUnKVxyXG4gIH0pXHJcblxyXG4gICQoJy5idXktZnJvbS1wYXJ0bmVycyAuY2xvc2UtYnRuIGEnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICQoJy5idXktZnJvbS1wYXJ0bmVycycpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpXHJcbiAgfSlcclxuXHJcbiAgJCgnLnByb2R1Y3RzX19zbGlkZXInKS5zbGljayh7XHJcbiAgICBpbmZpbml0ZTogdHJ1ZSxcclxuICAgIHByZXZBcnJvdzogJCgnLnByb2R1Y3RzLXNsaWRlciAuYXJyb3dzIC5wcmV2IGEnKSxcclxuICAgIG5leHRBcnJvdzogJCgnLnByb2R1Y3RzLXNsaWRlciAuYXJyb3dzIC5uZXh0IGEnKSxcclxuICAgIGRvdHM6IHRydWVcclxuICB9KTtcclxuXHJcbiAgJCgnLnByb2R1Y3RzLWxpc3RfX2l0ZW0nKS5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uKCl7XHJcbiAgICAkKCcucHJvZHVjdHMtbGlzdF9faXRlbScpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcclxuICAgICAgJCh0aGlzKS5hZGRDbGFzcygndW5hY3RpdmUnKVxyXG4gICAgfSlcclxuICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3VuYWN0aXZlJylcclxuICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgfSlcclxuICAkKCcucHJvZHVjdHMtbGlzdF9faXRlbScpLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24oKXtcclxuICAgICQoJy5wcm9kdWN0cy1saXN0X19pdGVtJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCd1bmFjdGl2ZScpXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIC8vIC0tLT4gVVNFIFRISVMgRlVOQ1RJT04gSUYgWU9VIFdBTlQgVE8gU0NST0xMIE9OIFNPTUUgU0xJREUgV0hFTiBDTElDSyBPTiBCVE5cclxuICB2YXIgc2Nyb2xsVG9Tb21lU2xpZGUgPSBmdW5jdGlvbih3aGljaFNsaWRlKXtcclxuICAgIGNhblNjcm9sbCA9IGZhbHNlXHJcbiAgICAkKCcuYnVyZ2VyJykucmVtb3ZlQ2xhc3MoJ2J1cmdlci0tYWN0aXZlJykgXHJcblxyXG4gICAgJCgnLnNsaWRlJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdjdXJlbnQgcHJldicpXHJcbiAgICAgIGlmKCskKHRoaXMpLmF0dHIoJ2RhdGEtc2xpZGUnKSA9PSArd2hpY2hTbGlkZSl7XHJcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnY3VyZW50JylcclxuICAgICAgICBjb25zb2xlLmxvZygndGVzdDEnKVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYoKyQodGhpcykuYXR0cignZGF0YS1zbGlkZScpIDwgK3doaWNoU2xpZGUpe1xyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2N1cmVudCBwcmV2JylcclxuICAgICAgICBjb25zb2xlLmxvZygndGVzdDInKVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2V7XHJcbiAgICAgICAgJCh0aGlzKS5yZW1vdmUoJ2N1cmVudCBwcmV2JylcclxuICAgICAgICBjb25zb2xlLmxvZygndGVzdDMnKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGN1cmVudFNsaWRlID0gNCArICt3aGljaFNsaWRlO1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAkKCcubWFpbi1wYWdlJykuYWRkQ2xhc3MoJ3ByZXZTbGlkZScpXHJcbiAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrJykuYWRkQ2xhc3MoJ2FuaW1hdGUgcHJldicpXHJcbiAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrJykuYXR0cignZGF0YS1zY3JvbGwnLCAnNScpXHJcbiAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrIC5ib3R0b20tcGFydCAuYm90dG9tLXBhcnRfX3JpZ2h0IC5pbWcnKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcclxuICAgICAgICBpZihpbmRleCA9PSAoY3VyZW50U2xpZGUgLSAoICt3aGljaFNsaWRlKSkpe1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcsICdjdXJlbnQnKVxyXG4gICAgICAgIH1lbHNlIGlmKGluZGV4ID09IChjdXJlbnRTbGlkZSAtICgtMSArICt3aGljaFNsaWRlKSkpe1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcsICduZXh0JylcclxuICAgICAgICB9ZWxzZSBpZihpbmRleCA9PSAgKGN1cmVudFNsaWRlIC0gKDEgKyArd2hpY2hTbGlkZSkpKXtcclxuICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1zY3JvbGwnLCAncHJldicpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJ3ByZXYnKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2sgLnRvcC1wYXJ0JykuYWRkQ2xhc3MoJ3RvcC1wYXJ0LS1iZy1wb3NpdGlvbicpO1xyXG4gICAgICAkKCcudGhyZWUtcGFydC1ibG9jayAudG9wLXBhcnQgLnRleHQtc2Nyb2xsJykuY3NzKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlM2QoLScrICgxMDAgKiBjdXJlbnRTbGlkZSkgKyd2dywgMCwgMCknKVxyXG5cclxuICAgICAgJCgnLnRleHRfX3dyYXBwZXInKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcclxuICAgICAgICBpZihpbmRleCA9PSBjdXJlbnRTbGlkZSAtIDIpe1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLWN1cmVudCcsICd0cnVlJylcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1jdXJlbnQnLCAnZmFsc2UnKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgJCgnLmJ1cmdlcicpLmFkZENsYXNzKCdzcGFuLWNvbG9yLS1ibGFjay1pbXBvcnRhbnQnKVxyXG4gICAgICBcclxuICAgIH0sIDE1MDApXHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgIGNhblNjcm9sbCA9IHRydWVcclxuICAgIH0sIDI1MDApXHJcbiAgfVxyXG4gIC8vIDwtLS0gVVNFIFRISVMgRlVOQ1RJT04gSUYgWU9VIFdBTlQgVE8gU0NST0xMIE9OIFNPTUUgU0xJREUgV0hFTiBDTElDSyBPTiBCVE5cclxuXHJcbiAgJCgnLmRyb3AtbWVudSBuYXYgYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2xpZGUgPSAkKHRoaXMpLnBhcmVudCgpLmF0dHIoJ2RhdGEtc2Nyb2xsVG8nKVxyXG4gICAgc2Nyb2xsVG9Tb21lU2xpZGUoc2xpZGUpXHJcbiAgICAkKCcuZHJvcC1tZW51JykucmVtb3ZlQ2xhc3MoJ2Ryb3AtbWVudS0tYWN0aXZlJylcclxuICB9KVxyXG5cclxuICAkKCcuc2Nyb2xsLWRvd24gYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyIHNsaWRlID0gJCh0aGlzKS5wYXJlbnQoKS5hdHRyKCdkYXRhLXNjcm9sbFRvJylcclxuICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoJ2hpZGUnKVxyXG4gICAgc2Nyb2xsVG9Tb21lU2xpZGUoc2xpZGUpXHJcbiAgfSlcclxuXHJcbn0pKGpRdWVyeSk7Il19
