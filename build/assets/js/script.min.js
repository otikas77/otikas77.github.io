!function(a){a(".burger").on("click",function(){var t;a(".buy-from-partners").hasClass("active")&&!a(".drop-menu").hasClass("drop-menu--active")?(a(".buy-from-partners").removeClass("active"),a(".burger").removeClass("burger--active span-color--black-buy-from-partners")):a(".recipies__popup").hasClass("active")?(a(".recipies__popup").removeClass("active"),setTimeout(function(){a(".burger").removeClass("burger--active")},300),a(".burger").addClass("burger--opacity-0")):a(".buy-from-partners").hasClass("active")&&a(".drop-menu").hasClass("drop-menu--active")?(a(".buy-from-partners").removeClass("active"),a(".burger").removeClass("span-color--black-buy-from-partners")):(a(this).toggleClass("burger--active"),a(this).toggleClass("span-color--black"),a(".drop-menu").toggleClass("drop-menu--active"),t=.1*a(".drop-menu--active nav li").length,a(".drop-menu--active nav li").each(function(){a(this).css("transition-delay",t+"s"),t-=.1}))});var e=a(".three-part-block .bottom-part .bottom-part__right .img").length,r=0,s=!0;a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){a(this).css("zIndex",e),--e}),a("body").on("swipe",function(){alert("swiped")}),alert("test"),a(".slider").on("wheel",function(t){s&&(console.log(s),s=!1,setTimeout(function(){s=!0},1505),t.originalEvent.wheelDelta<0?(a(".main-page").addClass("prevSlide"),r<=a(".three-part-block .bottom-part .bottom-part__right .img").length-1?(1==r?a(".three-part-block .top-part").addClass("top-part--bg-position"):3==r&&setTimeout(function(){a(".burger").addClass("span-color--black-important")},1500),a(".three-part-block .top-part .text-scroll").css("transform","translate3d(-"+100*r+"vw, 0, 0)"),a(".text__wrapper").each(function(t){t==r?a(this).attr("data-curent","true"):t==r-1&&a(this).attr("data-curent","false")}),a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){t==r-1?a(this).attr("data-scroll","curent"):t==r-2?a(this).attr("data-scroll","prev"):t==r&&a(this).attr("data-scroll","next")}),a(".three-part-block").attr("data-scroll",r),r++):6==r?(r=7,a(".three-part-block").addClass("prev"),a(".video-with-handle").addClass("curent"),a(".burger").addClass("span-color--black"),a(".video-with-handle video").trigger("play"),a(".scroll-down").addClass("hide")):7==r?(r=8,a(".big-video").addClass("curent"),a(".video-with-handle").addClass("prev"),setTimeout(function(){a(".burger").removeClass("span-color--black-important"),a(".burger").removeClass("span-color--black")},1500)):8==r?(r=9,a(".big-video").addClass("prev"),a(".products-list").addClass("curent"),setTimeout(function(){a(".burger").addClass("span-color--black-important")},1500)):9==r&&(r=10,a(".recipies").addClass("curent"),a(".products-list").addClass("prev"),a(".burger").addClass("burger--opacity-0")),a(".three-part-block").addClass("animate")):0<t.originalEvent.wheelDelta&&(a(".three-part-block").hasClass("animate")&&1<=r&&r<=6?(a(".three-part-block .top-part .text-scroll").css("transform","translate3d(-"+100*(r-2)+"vw, 0, 0)"),a(".text__wrapper").each(function(t){t==r-1?a(this).attr("data-curent",""):t==r-2&&a(this).attr("data-curent","true")}),0==+a(".animate").attr("data-scroll")?(a(".main-page").removeClass("prevSlide"),a(".three-part-block").removeClass("animate"),a(".scroll-down").removeClass("hide"),a(".text__wrapper").each(function(t){0==t&&a(this).attr("data-curent","true")})):r<=2?(a(".three-part-block .top-part").removeClass("top-part--bg-position"),a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){t==r-2?a(this).attr("data-scroll","next"):t==r-3&&a(this).attr("data-scroll","curent")})):4==r&&setTimeout(function(){a(".burger").removeClass("span-color--black-important")},1500),a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){t==r-2?a(this).attr("data-scroll","next"):t==r-3?a(this).attr("data-scroll","curent"):t==r-1?a(this).attr("data-scroll",""):t==r&&a(this).attr("data-scroll","")}),1<=--r&&a(".three-part-block").attr("data-scroll",r-1)):7==r?(r=6,a(".three-part-block").removeClass("prev"),a(".video-with-handle").removeClass("curent"),a(".video-with-handle video").trigger("pause"),a(".scroll-down").removeClass("hide")):8==r?(console.log("test"),r=7,a(".big-video").removeClass("curent"),a(".video-with-handle").removeClass("prev"),setTimeout(function(){a(".burger").addClass("span-color--black-important")},1500)):9==r?(r=8,a(".big-video").removeClass("prev"),a(".products-list").removeClass("curent"),setTimeout(function(){a(".burger").removeClass("span-color--black-important")},1500)):10==r&&(r=9,a(".products-list").removeClass("prev"),a(".recipies").removeClass("curent"),a(".burger").removeClass("burger--opacity-0"))))}),Splitting({target:"[data-splitting]"});var o=a(".video-with-handle video"),i=a(".seekBar"),t=a(".seekBar button");o.on("timeupdate",function(t){i.css("width",100/this.duration*this.currentTime+"%")}),t.on("click",function(t){t.preventDefault()}),t.mousedown(function(t){t.preventDefault(),o.trigger("pause"),i.css({transition:"none"}),a(window).mousemove(function(t){t.pageX>i.offset().left&&i.offset().left+t.pageX<=a(window).width()&&(i.css("width",t.pageX-i.offset().left),a(".video-with-handle video")[0].currentTime=i.width()/i.parent().width()*a(".video-with-handle video")[0].duration)})}),a(window).mouseup(function(t){o.trigger("play"),a(window).off("mousemove"),i.css("width",t.pageX-i.offset().left),i.css("transition","all .3s linear")});var l=!0;a(".big-video .play-stop-btn a").on("click",function(){l?(l=!1,a(".big-video .video__wrapper video").trigger("play"),a(".logo-and-title, .seo, .social-links, .play-stop-btn").addClass("video--played"),a(".big-video").addClass("cursor--none"),a(".big-video .play-stop-btn a i").removeClass("fa-play"),a(".big-video .play-stop-btn a i").addClass("fa-pause"),a(".big-video").mousemove(function(){a(".play-stop-btn").removeClass("video--played"),a(".big-video").removeClass("cursor--none"),l||setTimeout(function(){a(".play-stop-btn").addClass("video--played")},2e3)})):(l=!0,a(".big-video .play-stop-btn a i").addClass("fa-play"),a(".big-video .play-stop-btn a i").removeClass("fa-pause"),a(".big-video .video__wrapper video").trigger("pause"),a(".logo-and-title, .seo, .social-links, .play-stop-btn").removeClass("video--played"),a(".big-video").addClass("cursor--none"))}),a(".recipies .recipies__item .play-btn a, .recipies .recipies__item .more-btn a").on("click",function(t){t.preventDefault(),a(".recipies__popup video").attr("src",a(this).parent().parent().attr("data-video")),a(".recipies__popup").addClass("active"),a(".burger").addClass("burger--active"),setTimeout(function(){a(".burger").removeClass("burger--opacity-0")},300)}),a(".recipies .main-field").slick({infinite:!0,slidesToShow:2,slidesToScroll:2,dots:!0,arrows:!1,responsive:[{breakpoint:992,settings:{slidesToShow:1,slidesToScroll:1}}]});var n=null;function c(){a(".products-intro .categories a").each(function(t){t==n?a(this).addClass("active"):a(this).removeClass("active")})}a(".products-intro .categories a").on("click",function(t){var e=a(this).index();return n=e,c(),n}),c(),a(".buy-from-partners__btn a").on("click",function(t){t.preventDefault(),a(".buy-from-partners").addClass("active"),a(".burger").addClass("span-color--black-buy-from-partners burger--active")}),a(".buy-from-partners .close-btn a").on("click",function(t){t.preventDefault(),a(".buy-from-partners").removeClass("active")}),a(".products__slider").slick({infinite:!0,prevArrow:a(".products-slider .arrows .prev a"),nextArrow:a(".products-slider .arrows .next a"),dots:!0}),a(".products-list__item").on("mouseenter",function(){a(".products-list__item").each(function(){a(this).removeClass("active"),a(this).addClass("unactive")}),a(this).removeClass("unactive"),a(this).addClass("active")}),a(".products-list__item").on("mouseleave",function(){a(".products-list__item").each(function(){a(this).removeClass("active"),a(this).removeClass("unactive")})});var d=function(e){s=!1,a(".burger").removeClass("burger--active"),a(".slide").each(function(){a(this).removeClass("curent prev"),+a(this).attr("data-slide")==+e?(a(this).addClass("curent"),console.log("test1")):+a(this).attr("data-slide")<+e?(a(this).addClass("curent prev"),console.log("test2")):(a(this).remove("curent prev"),console.log("test3"))}),r=+e+4,setTimeout(function(){a(".main-page").addClass("prevSlide"),a(".three-part-block").addClass("animate prev"),a(".three-part-block").attr("data-scroll","5"),a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){t==r-+e?a(this).attr("data-scroll","curent"):t==r-(+e-1)?a(this).attr("data-scroll","next"):a(this).attr("data-scroll","prev")}),a(".three-part-block .top-part").addClass("top-part--bg-position"),a(".three-part-block .top-part .text-scroll").css("transform","translate3d(-"+100*r+"vw, 0, 0)"),a(".text__wrapper").each(function(t){t==r-2?a(this).attr("data-curent","true"):a(this).attr("data-curent","false")}),a(".burger").addClass("span-color--black-important")},1500),setTimeout(function(){s=!0},2500)};a(".drop-menu nav a").on("click",function(){var t=a(this).parent().attr("data-scrollTo");d(t),a(".drop-menu").removeClass("drop-menu--active")}),a(".scroll-down a").on("click",function(t){t.preventDefault();var e=a(this).parent().attr("data-scrollTo");a(this).parent().addClass("hide"),d(e)})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyIkIiwib24iLCJkZWxheSIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJzZXRUaW1lb3V0IiwiYWRkQ2xhc3MiLCJ0aGlzIiwidG9nZ2xlQ2xhc3MiLCJsZW5ndGgiLCJlYWNoIiwiY3NzIiwiaW1hZ2VaaW5kZXgiLCJjdXJlbnRTbGlkZSIsImNhblNjcm9sbCIsImluZGV4IiwiYWxlcnQiLCJlIiwiY29uc29sZSIsImxvZyIsIm9yaWdpbmFsRXZlbnQiLCJ3aGVlbERlbHRhIiwiYXR0ciIsInRyaWdnZXIiLCJTcGxpdHRpbmciLCJ0YXJnZXQiLCJ2aWRlbyIsInNlZWtCYXIiLCJzZWVrQmFyQnRuIiwiZXZlbnQiLCJkdXJhdGlvbiIsImN1cnJlbnRUaW1lIiwicHJldmVudERlZmF1bHQiLCJtb3VzZWRvd24iLCJ0cmFuc2l0aW9uIiwid2luZG93IiwibW91c2Vtb3ZlIiwicGFnZVgiLCJvZmZzZXQiLCJsZWZ0Iiwid2lkdGgiLCJwYXJlbnQiLCJtb3VzZXVwIiwib2ZmIiwiYmlnVmlkZW9QbGF5Iiwic2xpY2siLCJpbmZpbml0ZSIsInNsaWRlc1RvU2hvdyIsInNsaWRlc1RvU2Nyb2xsIiwiZG90cyIsImFycm93cyIsInJlc3BvbnNpdmUiLCJicmVha3BvaW50Iiwic2V0dGluZ3MiLCJ3aGljaENhdGVnb3J5IiwiY2hhbmdlQ2F0ZWdvcnUiLCJwcmV2QXJyb3ciLCJuZXh0QXJyb3ciLCJzY3JvbGxUb1NvbWVTbGlkZSIsIndoaWNoU2xpZGUiLCJyZW1vdmUiLCJzbGlkZSIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBVUEsR0FhUkEsRUFBRSxXQUFXQyxHQUFHLFFBQVMsV0FWM0IsSUFDTUMsRUFVQ0YsRUFBRSxzQkFBc0JHLFNBQVMsWUFBY0gsRUFBRSxjQUFjRyxTQUFTLHNCQUN6RUgsRUFBRSxzQkFBc0JJLFlBQVksVUFDcENKLEVBQUUsV0FBV0ksWUFBWSx1REFDbEJKLEVBQUUsb0JBQW9CRyxTQUFT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RUFBRWUsaUJBQ0YsSUFBSTZCLEVBQVE3RCxFQUFFTyxNQUFNa0MsU0FBU25CLEtBQUssaUJBQ2xDdEIsRUFBRU8sTUFBTWtDLFNBQVNuQyxTQUFTLFFBQzFCb0QsRUFBa0JHLEtBeGZ0QixDQTJmR0MiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigkKSB7XHJcbiAgXHJcbi8vIC0tLT4gRFJPUCBET1dOIE1FTlVcclxuZnVuY3Rpb24gZ2l2ZU5hdmlnYXRpb25EZWxheSAoKXsgXHJcbiAgdmFyIGRlbGF5ID0gMC4xICogJCgnLmRyb3AtbWVudS0tYWN0aXZlIG5hdiBsaScpLmxlbmd0aDtcclxuICBcclxuICAkKCcuZHJvcC1tZW51LS1hY3RpdmUgbmF2IGxpJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgJCh0aGlzKS5jc3MoJ3RyYW5zaXRpb24tZGVsYXknLCBkZWxheSsncycpXHJcbiAgICBkZWxheSA9IGRlbGF5IC0gMC4xXHJcbiAgfSlcclxufVxyXG5cclxuIFxyXG4gICQoJy5idXJnZXInKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgaWYoJCgnLmJ1eS1mcm9tLXBhcnRuZXJzJykuaGFzQ2xhc3MoJ2FjdGl2ZScpICYmICEkKCcuZHJvcC1tZW51JykuaGFzQ2xhc3MoJ2Ryb3AtbWVudS0tYWN0aXZlJykpe1xyXG4gICAgICAkKCcuYnV5LWZyb20tcGFydG5lcnMnKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcclxuICAgICAgJCgnLmJ1cmdlcicpLnJlbW92ZUNsYXNzKCdidXJnZXItLWFjdGl2ZSBzcGFuLWNvbG9yLS1ibGFjay1idXktZnJvbS1wYXJ0bmVycycpXHJcbiAgICB9ZWxzZSBpZigkKCcucmVjaXBpZXNfX3BvcHVwJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKXtcclxuICAgICAgJCgnLnJlY2lwaWVzX19wb3B1cCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxyXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCgnLmJ1cmdlcicpLnJlbW92ZUNsYXNzKCdidXJnZXItLWFjdGl2ZScpXHJcbiAgICAgIH0sIDMwMClcclxuICAgICAgJCgnLmJ1cmdlcicpLmFkZENsYXNzKCdidXJnZXItLW9wYWNpdHktMCcpXHJcbiAgICB9ZWxzZSBpZigkKCcuYnV5LWZyb20tcGFydG5lcnMnKS5oYXNDbGFzcygnYWN0aXZlJykgJiYgJCgnLmRyb3AtbWVudScpLmhhc0NsYXNzKCdkcm9wLW1lbnUtLWFjdGl2ZScpKXtcclxuICAgICAgJCgnLmJ1eS1mcm9tLXBhcnRuZXJzJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgICQoJy5idXJnZXInKS5yZW1vdmVDbGFzcygnc3Bhbi1jb2xvci0tYmxhY2stYnV5LWZyb20tcGFydG5lcnMnKVxyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYnVyZ2VyLS1hY3RpdmUnKTtcclxuICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnc3Bhbi1jb2xvci0tYmxhY2snKTtcclxuICAgICAgJCgnLmRyb3AtbWVudScpLnRvZ2dsZUNsYXNzKCdkcm9wLW1lbnUtLWFjdGl2ZScpO1xyXG4gICAgICBnaXZlTmF2aWdhdGlvbkRlbGF5KCk7XHJcbiAgICB9XHJcbiAgICBcclxuICB9KVxyXG4vLyA8LS0tIERST1AgRE9XTiBNRU5VXHJcblxyXG4vLyAtLS0+IFNMSURFUiBMT0dJQ0sgXHJcblxyXG4gIHZhciBpbWFnZVppbmRleCA9ICQoJy50aHJlZS1wYXJ0LWJsb2NrIC5ib3R0b20tcGFydCAuYm90dG9tLXBhcnRfX3JpZ2h0IC5pbWcnKS5sZW5ndGggXHJcbiAgdmFyIGN1cmVudFNsaWRlID0gMDtcclxuICB2YXIgY2FuU2Nyb2xsID0gdHJ1ZTtcclxuICB2YXIgYW5pbWF0aXRvbkVuZCA9IHRydWU7XHJcblxyXG4gIC8vIC0tLT4gQUREIFotSU5ERVggRk9SIEFMTCBJTUFHRVNcclxuICAkKCcudGhyZWUtcGFydC1ibG9jayAuYm90dG9tLXBhcnQgLmJvdHRvbS1wYXJ0X19yaWdodCAuaW1nJykuZWFjaChmdW5jdGlvbihpbmRleCl7XHJcbiAgICAkKHRoaXMpLmNzcygnekluZGV4JywgaW1hZ2VaaW5kZXgpXHJcbiAgICAtLWltYWdlWmluZGV4XHJcbiAgfSlcclxuICAvLyA8LS0tIEFERCBaLUlOREVYIEZPUiBBTEwgSU1BR0VTXHJcbi8vICAgJCgnYm9keScpLm9uKCd0cmFuc2l0aW9uZW5kIHdlYmtpdFRyYW5zaXRpb25FbmQgb1RyYW5zaXRpb25FbmQnLCBmdW5jdGlvbiAoKSB7XHJcbi8vICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbi8vICAgICAgIGNvbnNvbGUubG9nKCd0ZXN0Jyk7XHJcbi8vICAgICAgIGFuaW1hdGl0b25FbmQgPSB0cnVlXHJcbi8vICAgICB9LCAxNTAwKVxyXG4vLyAgICAgcmV0dXJuIFxyXG4vLyB9KTsgXHJcblxyXG4gICQoXCJib2R5XCIpLm9uKFwic3dpcGVcIixmdW5jdGlvbigpIHtcclxuICAgIGFsZXJ0KCdzd2lwZWQnKVxyXG4gIH0pO1xyXG5cclxuICBhbGVydCgndGVzdCcpXHJcblxyXG4gICQoJy5zbGlkZXInKS5vbignd2hlZWwnLCBmdW5jdGlvbihlKXtcclxuXHJcbiAgICAgIGlmKGNhblNjcm9sbCl7XHJcbiAgICAgICAgLy8tLS0+IFNDUk9MTCBUTyBORVhUIFNMSURFXHJcbiAgICAgICAgY29uc29sZS5sb2coY2FuU2Nyb2xsKVxyXG4gICAgICAgIGNhblNjcm9sbCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGNhblNjcm9sbCwgYW5pbWF0aXRvbkVuZClcclxuICAgICAgICAvLyAtLS0+IEFERCBQT1NJQklMSVRZIFRPIFNDUk9MTCBBR0FJTiBUSFJPVUdIIE9ORSBTRUNPTkRcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICBjYW5TY3JvbGwgPSB0cnVlXHJcbiAgICAgICAgfSwgMTUwNSlcclxuICAgICAgLy8gPC0tLSBBREQgUE9TSUJJTElUWSBUTyBTQ1JPTEwgQUdBSU4gVEhST1VHSCBPTkUgU0VDT05EXHJcbiAgICAgICAgaWYoZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGEgPCAwKSB7XHJcbiAgICAgICAgICAkKCcubWFpbi1wYWdlJykuYWRkQ2xhc3MoJ3ByZXZTbGlkZScpXHJcbiAgICAgICAgICAvLyAkKCcuc2Nyb2xsLWRvd24nKS5hZGRDbGFzcygnaGlkZScpXHJcbiAgICAgICAgICAgICBpZihjdXJlbnRTbGlkZSA8PSAkKCcudGhyZWUtcGFydC1ibG9jayAuYm90dG9tLXBhcnQgLmJvdHRvbS1wYXJ0X19yaWdodCAuaW1nJykubGVuZ3RoIC0gMSl7XHJcbiAgICAgICAgICAgICAgLy8gLS0tPiBBREQgQkcgRk9SIEZJUlNUIFNMSURFXHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgaWYoY3VyZW50U2xpZGUgPT0gMSl7XHJcbiAgICAgICAgICAgICAgICAkKCcudGhyZWUtcGFydC1ibG9jayAudG9wLXBhcnQnKS5hZGRDbGFzcygndG9wLXBhcnQtLWJnLXBvc2l0aW9uJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2UgaWYoY3VyZW50U2xpZGUgPT0gMyl7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICQoJy5idXJnZXInKS5hZGRDbGFzcygnc3Bhbi1jb2xvci0tYmxhY2staW1wb3J0YW50JylcclxuICAgICAgICAgICAgICAgIH0sIDE1MDApXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vIDwtLS0gQUREIEJHIEZPUiBGSVJTVCBTTElERVxyXG5cclxuICAgICAgICAgICAgICAvLyAtLS0+IFRFWFQgQU5JTUFUSU9OXHJcbiAgICAgICAgICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2sgLnRvcC1wYXJ0IC50ZXh0LXNjcm9sbCcpLmNzcygndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZTNkKC0nKyAoMTAwICogY3VyZW50U2xpZGUpICsndncsIDAsIDApJylcclxuXHJcbiAgICAgICAgICAgICAgJCgnLnRleHRfX3dyYXBwZXInKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcclxuICAgICAgICAgICAgICAgIGlmKGluZGV4ID09IGN1cmVudFNsaWRlKXtcclxuICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLWN1cmVudCcsICd0cnVlJylcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKGluZGV4ID09IGN1cmVudFNsaWRlIC0gMSl7XHJcbiAgICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1jdXJlbnQnLCAnZmFsc2UnKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLy8gPC0tLSBURVhUIEFOSU1BVElPTlxyXG5cclxuICAgICAgICAgICAgICAvLyAtLS0+IENIQU5HRSBEQVRBLUFUUklCVVRFUyBGT1IgSU1BR0VTXHJcbiAgICAgICAgICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2sgLmJvdHRvbS1wYXJ0IC5ib3R0b20tcGFydF9fcmlnaHQgLmltZycpLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgICAgICAgICAgICAgaWYoaW5kZXggPT0gY3VyZW50U2xpZGUgLSAxKXtcclxuICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcsICdjdXJlbnQnKVxyXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoaW5kZXggPT0gY3VyZW50U2xpZGUgLSAyKXtcclxuICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcsICdwcmV2JylcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKGluZGV4ID09IGN1cmVudFNsaWRlKXtcclxuICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcsICduZXh0JylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC8vIDwtLS0gQ0hBTkdFIERBVEEtQVRSSUJVVEVTIEZPUiBJTUFHRVNcclxuICAgICAgICAgICAgICAkKCcudGhyZWUtcGFydC1ibG9jaycpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgY3VyZW50U2xpZGUpXHJcbiAgICAgICAgICAgICAgY3VyZW50U2xpZGUrK1xyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZWxzZSBpZihjdXJlbnRTbGlkZSA9PSA2KXtcclxuICAgICAgICAgICAgICBjdXJlbnRTbGlkZSA9IDdcclxuICAgICAgICAgICAgICAkKCcudGhyZWUtcGFydC1ibG9jaycpLmFkZENsYXNzKCdwcmV2JylcclxuICAgICAgICAgICAgICAkKCcudmlkZW8td2l0aC1oYW5kbGUnKS5hZGRDbGFzcygnY3VyZW50JylcclxuICAgICAgICAgICAgICAkKCcuYnVyZ2VyJykuYWRkQ2xhc3MoJ3NwYW4tY29sb3ItLWJsYWNrJylcclxuICAgICAgICAgICAgICAkKCcudmlkZW8td2l0aC1oYW5kbGUgdmlkZW8nKS50cmlnZ2VyKCdwbGF5JylcclxuICAgICAgICAgICAgICAkKCcuc2Nyb2xsLWRvd24nKS5hZGRDbGFzcygnaGlkZScpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZihjdXJlbnRTbGlkZSA9PSA3KXtcclxuICAgICAgICAgICAgICBjdXJlbnRTbGlkZSA9IDhcclxuICAgICAgICAgICAgICAkKCcuYmlnLXZpZGVvJykuYWRkQ2xhc3MoJ2N1cmVudCcpO1xyXG4gICAgICAgICAgICAgICQoJy52aWRlby13aXRoLWhhbmRsZScpLmFkZENsYXNzKCdwcmV2Jyk7XHJcbiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgJCgnLmJ1cmdlcicpLnJlbW92ZUNsYXNzKCdzcGFuLWNvbG9yLS1ibGFjay1pbXBvcnRhbnQnKTtcclxuICAgICAgICAgICAgICAgICQoJy5idXJnZXInKS5yZW1vdmVDbGFzcygnc3Bhbi1jb2xvci0tYmxhY2snKTtcclxuICAgICAgICAgICAgICB9LCAxNTAwKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYoY3VyZW50U2xpZGUgPT0gOCl7XHJcbiAgICAgICAgICAgICAgY3VyZW50U2xpZGUgPSA5O1xyXG4gICAgICAgICAgICAgICQoJy5iaWctdmlkZW8nKS5hZGRDbGFzcygncHJldicpO1xyXG4gICAgICAgICAgICAgICQoJy5wcm9kdWN0cy1saXN0JykuYWRkQ2xhc3MoJ2N1cmVudCcpXHJcbiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgJCgnLmJ1cmdlcicpLmFkZENsYXNzKCdzcGFuLWNvbG9yLS1ibGFjay1pbXBvcnRhbnQnKVxyXG4gICAgICAgICAgICAgIH0sIDE1MDApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZihjdXJlbnRTbGlkZSA9PSA5KXtcclxuICAgICAgICAgICAgICBjdXJlbnRTbGlkZSA9IDEwO1xyXG4gICAgICAgICAgICAgICQoJy5yZWNpcGllcycpLmFkZENsYXNzKCdjdXJlbnQnKTtcclxuICAgICAgICAgICAgICAkKCcucHJvZHVjdHMtbGlzdCcpLmFkZENsYXNzKCdwcmV2Jyk7IFxyXG4gICAgICAgICAgICAgICQoJy5idXJnZXInKS5hZGRDbGFzcygnYnVyZ2VyLS1vcGFjaXR5LTAnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrJykuYWRkQ2xhc3MoJ2FuaW1hdGUnKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIDwtLS0gU0NST0xMIFRPIE5FWFQgU0xJREVcclxuXHJcbiAgICAgICAgLy8gLS0tPiBTQ1JPTEwgVE8gUFJFVklPVVMgU0xJREUgXHJcbiAgICAgICAgZWxzZSBpZihlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSA+IDApe1xyXG4gICAgICAgICAgaWYoJCgnLnRocmVlLXBhcnQtYmxvY2snKS5oYXNDbGFzcygnYW5pbWF0ZScpICAmJiBjdXJlbnRTbGlkZSA+PSAxICYmIGN1cmVudFNsaWRlIDw9IDYpe1xyXG4gICAgICAgICAgICAvLyAtLS0+IFRFWFQgQU5JTUFUSU9OXHJcbiAgICAgICAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrIC50b3AtcGFydCAudGV4dC1zY3JvbGwnKS5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUzZCgtJysgKDEwMCAqIChjdXJlbnRTbGlkZSAtIDIpKSArJ3Z3LCAwLCAwKScpXHJcbiAgICAgICAgICAgICQoJy50ZXh0X193cmFwcGVyJykuZWFjaChmdW5jdGlvbihpbmRleCl7XHJcbiAgICAgICAgICAgICAgaWYoaW5kZXggPT0gY3VyZW50U2xpZGUtMSl7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtY3VyZW50JywgJycpXHJcbiAgICAgICAgICAgICAgfWVsc2UgaWYoaW5kZXggPT0gY3VyZW50U2xpZGUgLSAyKXtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1jdXJlbnQnLCAndHJ1ZScpXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvLyAtLS0+IFRFWFQgQU5JTUFUSU9OXHJcblxyXG4gICAgICAgICAgICAvLyBSRU1PVkUgSUYgSVQgRklSU1QgU0xJREVcclxuICAgICAgICAgICAgaWYoKygkKCcuYW5pbWF0ZScpLmF0dHIoJ2RhdGEtc2Nyb2xsJykpID09IDAgKXtcclxuICAgICAgICAgICAgICAkKCcubWFpbi1wYWdlJykucmVtb3ZlQ2xhc3MoJ3ByZXZTbGlkZScpXHJcbiAgICAgICAgICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2snKS5yZW1vdmVDbGFzcygnYW5pbWF0ZScpXHJcbiAgICAgICAgICAgICAgJCgnLnNjcm9sbC1kb3duJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKVxyXG4gICAgICAgICAgICAgICQoJy50ZXh0X193cmFwcGVyJykuZWFjaChmdW5jdGlvbihpbmRleCl7XHJcbiAgICAgICAgICAgICAgICBpZihpbmRleCA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLWN1cmVudCcsICd0cnVlJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAvLyBSRU1PVkUgSUYgSVQgRklSU1QgU0xJREVcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAvLyBSRVRVUk4gQkFDSyBCRyBJTUFHRVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIGVsc2UgaWYoY3VyZW50U2xpZGUgPD0gMil7XHJcbiAgICAgICAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrIC50b3AtcGFydCcpLnJlbW92ZUNsYXNzKCd0b3AtcGFydC0tYmctcG9zaXRpb24nKVxyXG4gICAgICAgICAgICAkKCcudGhyZWUtcGFydC1ibG9jayAuYm90dG9tLXBhcnQgLmJvdHRvbS1wYXJ0X19yaWdodCAuaW1nJykuZWFjaChmdW5jdGlvbihpbmRleCl7XHJcbiAgICAgICAgICAgICAgaWYoaW5kZXggPT0gY3VyZW50U2xpZGUgLSAyKXtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1zY3JvbGwnLCAnbmV4dCcpXHJcbiAgICAgICAgICAgICAgfWVsc2UgaWYoaW5kZXggPT0gY3VyZW50U2xpZGUgLSAzKXtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1zY3JvbGwnLCAnY3VyZW50JylcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBSRVRVUk4gQkFDSyBCRyBJTUFHRVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBpZihjdXJlbnRTbGlkZSA9PSA0KXtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICQoJy5idXJnZXInKS5yZW1vdmVDbGFzcygnc3Bhbi1jb2xvci0tYmxhY2staW1wb3J0YW50JylcclxuICAgICAgICAgICAgfSwgMTUwMClcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICAvLyAtLS0+IENIQU5HRSBEQVRBLUFUUklCVVRFUyBGT1IgSU1BR0VTXHJcbiAgICAgICAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrIC5ib3R0b20tcGFydCAuYm90dG9tLXBhcnRfX3JpZ2h0IC5pbWcnKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcclxuICAgICAgICAgICAgICBpZihpbmRleCA9PSBjdXJlbnRTbGlkZSAtIDIpe1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcsICduZXh0JylcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZSBpZihpbmRleCA9PSBjdXJlbnRTbGlkZSAtIDMpe1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcsICdjdXJlbnQnKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIGlmKCBpbmRleCA9PSBjdXJlbnRTbGlkZSAtIDEpe1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcsICcnKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIGlmKCBpbmRleCA9PSBjdXJlbnRTbGlkZSl7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJycpXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgLy8gPC0tLSBDSEFOR0UgREFUQS1BVFJJQlVURVMgRk9SIElNQUdFU1xyXG4gICAgICAgICAgICAtLWN1cmVudFNsaWRlXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoY3VyZW50U2xpZGUgPj0gMSl7XHJcbiAgICAgICAgICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2snKS5hdHRyKCdkYXRhLXNjcm9sbCcsIGN1cmVudFNsaWRlIC0gMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihjdXJlbnRTbGlkZSA9PSA3KXtcclxuICAgICAgICAgIGN1cmVudFNsaWRlID0gNlxyXG4gICAgICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2snKS5yZW1vdmVDbGFzcygncHJldicpO1xyXG4gICAgICAgICAgJCgnLnZpZGVvLXdpdGgtaGFuZGxlJykucmVtb3ZlQ2xhc3MoJ2N1cmVudCcpO1xyXG4gICAgICAgICAgJCgnLnZpZGVvLXdpdGgtaGFuZGxlIHZpZGVvJykudHJpZ2dlcigncGF1c2UnKVxyXG4gICAgICAgICAgJCgnLnNjcm9sbC1kb3duJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGN1cmVudFNsaWRlID09IDgpe1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ3Rlc3QnKVxyXG4gICAgICAgICAgY3VyZW50U2xpZGUgPSA3XHJcbiAgICAgICAgICAkKCcuYmlnLXZpZGVvJykucmVtb3ZlQ2xhc3MoJ2N1cmVudCcpO1xyXG4gICAgICAgICAgJCgnLnZpZGVvLXdpdGgtaGFuZGxlJykucmVtb3ZlQ2xhc3MoJ3ByZXYnKTtcclxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCgnLmJ1cmdlcicpLmFkZENsYXNzKCdzcGFuLWNvbG9yLS1ibGFjay1pbXBvcnRhbnQnKVxyXG4gICAgICAgICAgfSwgMTUwMClcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihjdXJlbnRTbGlkZSA9PSA5KXtcclxuICAgICAgICAgIGN1cmVudFNsaWRlID0gODtcclxuICAgICAgICAgICQoJy5iaWctdmlkZW8nKS5yZW1vdmVDbGFzcygncHJldicpO1xyXG4gICAgICAgICAgJCgnLnByb2R1Y3RzLWxpc3QnKS5yZW1vdmVDbGFzcygnY3VyZW50Jyk7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICQoJy5idXJnZXInKS5yZW1vdmVDbGFzcygnc3Bhbi1jb2xvci0tYmxhY2staW1wb3J0YW50JylcclxuICAgICAgICAgIH0sIDE1MDApXHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGN1cmVudFNsaWRlID09IDEwKXtcclxuICAgICAgICAgIGN1cmVudFNsaWRlID0gOTtcclxuICAgICAgICAgICQoJy5wcm9kdWN0cy1saXN0JykucmVtb3ZlQ2xhc3MoJ3ByZXYnKTtcclxuICAgICAgICAgICQoJy5yZWNpcGllcycpLnJlbW92ZUNsYXNzKCdjdXJlbnQnKTtcclxuICAgICAgICAgICQoJy5idXJnZXInKS5yZW1vdmVDbGFzcygnYnVyZ2VyLS1vcGFjaXR5LTAnKVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgICAvLyAtLS0+IEFERCBQT1NJQklMSVRZIFRPIFNDUk9MTCBBR0FJTiBUSFJPVUdIIE9ORSBTRUNPTkRcclxuICAgICAgICAgIC8vIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgIC8vICAgY2FuU2Nyb2xsID0gdHJ1ZVxyXG4gICAgICAgICAgLy8gfSwgMTAwMClcclxuICAgICAgICAgIC8vIDwtLS0gQUREIFBPU0lCSUxJVFkgVE8gU0NST0xMIEFHQUlOIFRIUk9VR0ggT05FIFNFQ09ORFxyXG5cclxuICAgICAgfVxyXG4gICAgICAvLyA8LS0tIFNDUk9MTCBUTyBQUkVWSU9VUyBTTElERVxyXG5cclxuICAgICAgLy8gLy8gLS0tPiBSRU1PVkUgUE9TSUJJTElUWSBUTyBTQ1JPTEwgQUdBSU5cclxuICAgICAgLy8gY2FuU2Nyb2xsID0gZmFsc2VcclxuICAgICAgLy8gLy8gPC0tLSBSRU1PVkUgUE9TSUJJTElUWSBUTyBTQ1JPTEwgQUdBSU5cclxuICB9KTtcclxuLy8gPC0tLSBTTElERVIgTE9HSUNLXHJcblxyXG4gIC8vIC0tLT4gVEVYVCBTUExJVElOR1xyXG4gIFNwbGl0dGluZyh7XHJcbiAgICB0YXJnZXQ6IFwiW2RhdGEtc3BsaXR0aW5nXVwiXHJcbiAgfSk7XHJcbiAgLy8gPC0tLSBURVhUIFNQTElUSU5HXHJcblxyXG4gIC8vIC0tLT4gU0VFSyBCQVIgRk9SICd2aWRlby13aXRoLWhhbmRsZSdcclxuICB2YXIgdmlkZW8gPSAkKCcudmlkZW8td2l0aC1oYW5kbGUgdmlkZW8nKTtcclxuICB2YXIgc2Vla0JhciA9ICQoXCIuc2Vla0JhclwiKTtcclxuICB2YXIgc2Vla0JhckJ0biA9ICQoXCIuc2Vla0JhciBidXR0b25cIilcclxuICAgXHJcbiAgdmlkZW8ub24oXHJcbiAgICBcInRpbWV1cGRhdGVcIiwgXHJcbiAgICBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgIHNlZWtCYXIuY3NzKCd3aWR0aCcsICcnKyAoKDEwMCAvIHRoaXMuZHVyYXRpb24pICogdGhpcy5jdXJyZW50VGltZSkgKyclJylcclxuICB9KTtcclxuXHJcbiAgc2Vla0JhckJ0bi5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gIH0pO1xyXG5cclxuICBzZWVrQmFyQnRuLm1vdXNlZG93bihmdW5jdGlvbihlKXtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZpZGVvLnRyaWdnZXIoJ3BhdXNlJyk7XHJcbiAgICBzZWVrQmFyLmNzcyh7XHJcbiAgICAgIHRyYW5zaXRpb246ICdub25lJyxcclxuICAgIH0pXHJcbiAgICBcclxuICAgICQod2luZG93KS5tb3VzZW1vdmUoZnVuY3Rpb24oZSkge1xyXG4gICAgICBpZihlLnBhZ2VYID4gc2Vla0Jhci5vZmZzZXQoKS5sZWZ0ICYmIChzZWVrQmFyLm9mZnNldCgpLmxlZnQgKyBlLnBhZ2VYKSA8PSAkKHdpbmRvdykud2lkdGgoKSl7XHJcbiAgICAgICAgc2Vla0Jhci5jc3MoJ3dpZHRoJywgIGUucGFnZVggLSBzZWVrQmFyLm9mZnNldCgpLmxlZnQpXHJcbiAgICAgICAgJCgnLnZpZGVvLXdpdGgtaGFuZGxlIHZpZGVvJylbMF0uY3VycmVudFRpbWUgPSAoKHNlZWtCYXIud2lkdGgoKSAvIHNlZWtCYXIucGFyZW50KCkud2lkdGgoKSkpICogJCgnLnZpZGVvLXdpdGgtaGFuZGxlIHZpZGVvJylbMF0uZHVyYXRpb25cclxuICAgICAgfSBcclxuICAgIH0pXHJcbiAgfSk7XHJcblxyXG4gICQod2luZG93KS5tb3VzZXVwKGZ1bmN0aW9uKGUpe1xyXG4gICAgdmlkZW8udHJpZ2dlcigncGxheScpO1xyXG4gICAgJCh3aW5kb3cpLm9mZignbW91c2Vtb3ZlJyk7XHJcbiAgICBzZWVrQmFyLmNzcygnd2lkdGgnLCAgZS5wYWdlWCAtIHNlZWtCYXIub2Zmc2V0KCkubGVmdClcclxuICAgIHNlZWtCYXIuY3NzKCd0cmFuc2l0aW9uJywgJ2FsbCAuM3MgbGluZWFyJylcclxuICB9KTtcclxuICAvLyA8LS0tIFNFRUsgQkFSIEZPUiAndmlkZW8td2l0aC1oYW5kbGUnXHJcblxyXG4gIC8vIC0tLT4gQklHIFZJREVPIEJMT0NLXHJcbiAgICB2YXIgYmlnVmlkZW9QbGF5ID0gdHJ1ZVxyXG5cclxuICAgICQoJy5iaWctdmlkZW8gLnBsYXktc3RvcC1idG4gYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgIGlmKGJpZ1ZpZGVvUGxheSl7XHJcbiAgICAgICAgYmlnVmlkZW9QbGF5ID0gZmFsc2U7XHJcbiAgICAgICAgJCgnLmJpZy12aWRlbyAudmlkZW9fX3dyYXBwZXIgdmlkZW8nKS50cmlnZ2VyKCdwbGF5Jyk7XHJcbiAgICAgICAgJCgnLmxvZ28tYW5kLXRpdGxlLCAuc2VvLCAuc29jaWFsLWxpbmtzLCAucGxheS1zdG9wLWJ0bicpLmFkZENsYXNzKCd2aWRlby0tcGxheWVkJyk7XHJcbiAgICAgICAgJCgnLmJpZy12aWRlbycpLmFkZENsYXNzKCdjdXJzb3ItLW5vbmUnKTtcclxuICAgICAgICAkKCcuYmlnLXZpZGVvIC5wbGF5LXN0b3AtYnRuIGEgaScpLnJlbW92ZUNsYXNzKCdmYS1wbGF5Jyk7XHJcbiAgICAgICAgJCgnLmJpZy12aWRlbyAucGxheS1zdG9wLWJ0biBhIGknKS5hZGRDbGFzcygnZmEtcGF1c2UnKTtcclxuICAgICAgICAkKCcuYmlnLXZpZGVvJykubW91c2Vtb3ZlKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAkKCcucGxheS1zdG9wLWJ0bicpLnJlbW92ZUNsYXNzKCd2aWRlby0tcGxheWVkJylcclxuICAgICAgICAgICQoJy5iaWctdmlkZW8nKS5yZW1vdmVDbGFzcygnY3Vyc29yLS1ub25lJylcclxuICAgICAgICAgIGlmKCFiaWdWaWRlb1BsYXkpe1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgJCgnLnBsYXktc3RvcC1idG4nKS5hZGRDbGFzcygndmlkZW8tLXBsYXllZCcpXHJcbiAgICAgICAgICAgIH0sIDIwMDApXHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgIGJpZ1ZpZGVvUGxheSA9IHRydWU7XHJcbiAgICAgICAgJCgnLmJpZy12aWRlbyAucGxheS1zdG9wLWJ0biBhIGknKS5hZGRDbGFzcygnZmEtcGxheScpO1xyXG4gICAgICAgICQoJy5iaWctdmlkZW8gLnBsYXktc3RvcC1idG4gYSBpJykucmVtb3ZlQ2xhc3MoJ2ZhLXBhdXNlJyk7XHJcbiAgICAgICAgJCgnLmJpZy12aWRlbyAudmlkZW9fX3dyYXBwZXIgdmlkZW8nKS50cmlnZ2VyKCdwYXVzZScpO1xyXG4gICAgICAgICQoJy5sb2dvLWFuZC10aXRsZSwgLnNlbywgLnNvY2lhbC1saW5rcywgLnBsYXktc3RvcC1idG4nKS5yZW1vdmVDbGFzcygndmlkZW8tLXBsYXllZCcpXHJcbiAgICAgICAgJCgnLmJpZy12aWRlbycpLmFkZENsYXNzKCdjdXJzb3ItLW5vbmUnKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAvLyA8LS0tIEJJRyBWSURFTyBCTE9DS1xyXG5cclxuICAvLyAtLS0+IFJFQ0lQSUVTIEJMT0NLXHJcblxyXG4gICAgJCgnLnJlY2lwaWVzIC5yZWNpcGllc19faXRlbSAucGxheS1idG4gYSwgLnJlY2lwaWVzIC5yZWNpcGllc19faXRlbSAubW9yZS1idG4gYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICQoJy5yZWNpcGllc19fcG9wdXAgdmlkZW8nKS5hdHRyKCdzcmMnLCAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmF0dHIoJ2RhdGEtdmlkZW8nKSlcclxuICAgICAgJCgnLnJlY2lwaWVzX19wb3B1cCcpLmFkZENsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAkKCcuYnVyZ2VyJykuYWRkQ2xhc3MoJ2J1cmdlci0tYWN0aXZlJylcclxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICQoJy5idXJnZXInKS5yZW1vdmVDbGFzcygnYnVyZ2VyLS1vcGFjaXR5LTAnKVxyXG4gICAgICB9LCAzMDApXHJcbiAgICB9KVxyXG4gICAgLy8gLS0tPiBTTElERVJcclxuXHJcbiAgICAkKCcucmVjaXBpZXMgLm1haW4tZmllbGQnKS5zbGljayh7XHJcbiAgICAgIGluZmluaXRlOiB0cnVlLFxyXG4gICAgICBzbGlkZXNUb1Nob3c6IDIsXHJcbiAgICAgIHNsaWRlc1RvU2Nyb2xsOiAyLFxyXG4gICAgICBkb3RzOiB0cnVlLFxyXG4gICAgICBhcnJvd3M6IGZhbHNlLFxyXG4gICAgICByZXNwb25zaXZlOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgYnJlYWtwb2ludDogOTkyLFxyXG4gICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxyXG4gICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMSBcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIF1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIDwtLS0gU0xJREVSXHJcbiAgLy8gPC0tLSBSRUNJUElFUyBCTE9DS1xyXG5cclxuICAvLyAtLS0+IENBVEVHT1JJRVMgTE9HSUNcclxuICAgIHZhciB3aGljaENhdGVnb3J5ID0gbnVsbFxyXG5cclxuICAgICQoJy5wcm9kdWN0cy1pbnRybyAuY2F0ZWdvcmllcyBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgIHZhciBpbmRleCA9ICQodGhpcykuaW5kZXgoKVxyXG4gICAgICB3aGljaENhdGVnb3J5ID0gaW5kZXhcclxuICAgICAgY2hhbmdlQ2F0ZWdvcnUoKVxyXG4gICAgICByZXR1cm4gd2hpY2hDYXRlZ29yeVxyXG4gICAgfSlcclxuXHJcbiAgICBmdW5jdGlvbiBjaGFuZ2VDYXRlZ29ydSgpe1xyXG4gICAgICAkKCcucHJvZHVjdHMtaW50cm8gLmNhdGVnb3JpZXMgYScpLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgICAgIGlmIChpbmRleCA9PSB3aGljaENhdGVnb3J5KXtcclxuICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIGNoYW5nZUNhdGVnb3J1KClcclxuXHJcbiAgLy8gPC0tLSBDQVRFR09SSUVTIExPR0lDXHJcbiAgJCgnLmJ1eS1mcm9tLXBhcnRuZXJzX19idG4gYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgJCgnLmJ1eS1mcm9tLXBhcnRuZXJzJykuYWRkQ2xhc3MoXCJhY3RpdmVcIilcclxuICAgICQoJy5idXJnZXInKS5hZGRDbGFzcygnc3Bhbi1jb2xvci0tYmxhY2stYnV5LWZyb20tcGFydG5lcnMgYnVyZ2VyLS1hY3RpdmUnKVxyXG4gIH0pXHJcblxyXG4gICQoJy5idXktZnJvbS1wYXJ0bmVycyAuY2xvc2UtYnRuIGEnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICQoJy5idXktZnJvbS1wYXJ0bmVycycpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpXHJcbiAgfSlcclxuXHJcbiAgJCgnLnByb2R1Y3RzX19zbGlkZXInKS5zbGljayh7XHJcbiAgICBpbmZpbml0ZTogdHJ1ZSxcclxuICAgIHByZXZBcnJvdzogJCgnLnByb2R1Y3RzLXNsaWRlciAuYXJyb3dzIC5wcmV2IGEnKSxcclxuICAgIG5leHRBcnJvdzogJCgnLnByb2R1Y3RzLXNsaWRlciAuYXJyb3dzIC5uZXh0IGEnKSxcclxuICAgIGRvdHM6IHRydWVcclxuICB9KTtcclxuXHJcbiAgJCgnLnByb2R1Y3RzLWxpc3RfX2l0ZW0nKS5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uKCl7XHJcbiAgICAkKCcucHJvZHVjdHMtbGlzdF9faXRlbScpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcclxuICAgICAgJCh0aGlzKS5hZGRDbGFzcygndW5hY3RpdmUnKVxyXG4gICAgfSlcclxuICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3VuYWN0aXZlJylcclxuICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgfSlcclxuICAkKCcucHJvZHVjdHMtbGlzdF9faXRlbScpLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24oKXtcclxuICAgICQoJy5wcm9kdWN0cy1saXN0X19pdGVtJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCd1bmFjdGl2ZScpXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIC8vIC0tLT4gVVNFIFRISVMgRlVOQ1RJT04gSUYgWU9VIFdBTlQgVE8gU0NST0xMIE9OIFNPTUUgU0xJREUgV0hFTiBDTElDSyBPTiBCVE5cclxuICB2YXIgc2Nyb2xsVG9Tb21lU2xpZGUgPSBmdW5jdGlvbih3aGljaFNsaWRlKXtcclxuICAgIGNhblNjcm9sbCA9IGZhbHNlXHJcbiAgICAkKCcuYnVyZ2VyJykucmVtb3ZlQ2xhc3MoJ2J1cmdlci0tYWN0aXZlJykgXHJcblxyXG4gICAgJCgnLnNsaWRlJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdjdXJlbnQgcHJldicpXHJcbiAgICAgIGlmKCskKHRoaXMpLmF0dHIoJ2RhdGEtc2xpZGUnKSA9PSArd2hpY2hTbGlkZSl7XHJcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnY3VyZW50JylcclxuICAgICAgICBjb25zb2xlLmxvZygndGVzdDEnKVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYoKyQodGhpcykuYXR0cignZGF0YS1zbGlkZScpIDwgK3doaWNoU2xpZGUpe1xyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2N1cmVudCBwcmV2JylcclxuICAgICAgICBjb25zb2xlLmxvZygndGVzdDInKVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2V7XHJcbiAgICAgICAgJCh0aGlzKS5yZW1vdmUoJ2N1cmVudCBwcmV2JylcclxuICAgICAgICBjb25zb2xlLmxvZygndGVzdDMnKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGN1cmVudFNsaWRlID0gNCArICt3aGljaFNsaWRlO1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAkKCcubWFpbi1wYWdlJykuYWRkQ2xhc3MoJ3ByZXZTbGlkZScpXHJcbiAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrJykuYWRkQ2xhc3MoJ2FuaW1hdGUgcHJldicpXHJcbiAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrJykuYXR0cignZGF0YS1zY3JvbGwnLCAnNScpXHJcbiAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrIC5ib3R0b20tcGFydCAuYm90dG9tLXBhcnRfX3JpZ2h0IC5pbWcnKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcclxuICAgICAgICBpZihpbmRleCA9PSAoY3VyZW50U2xpZGUgLSAoICt3aGljaFNsaWRlKSkpe1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcsICdjdXJlbnQnKVxyXG4gICAgICAgIH1lbHNlIGlmKGluZGV4ID09IChjdXJlbnRTbGlkZSAtICgtMSArICt3aGljaFNsaWRlKSkpe1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcsICduZXh0JylcclxuICAgICAgICB9ZWxzZSBpZihpbmRleCA9PSAgKGN1cmVudFNsaWRlIC0gKDEgKyArd2hpY2hTbGlkZSkpKXtcclxuICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1zY3JvbGwnLCAncHJldicpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJ3ByZXYnKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2sgLnRvcC1wYXJ0JykuYWRkQ2xhc3MoJ3RvcC1wYXJ0LS1iZy1wb3NpdGlvbicpO1xyXG4gICAgICAkKCcudGhyZWUtcGFydC1ibG9jayAudG9wLXBhcnQgLnRleHQtc2Nyb2xsJykuY3NzKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlM2QoLScrICgxMDAgKiBjdXJlbnRTbGlkZSkgKyd2dywgMCwgMCknKVxyXG5cclxuICAgICAgJCgnLnRleHRfX3dyYXBwZXInKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcclxuICAgICAgICBpZihpbmRleCA9PSBjdXJlbnRTbGlkZSAtIDIpe1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLWN1cmVudCcsICd0cnVlJylcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1jdXJlbnQnLCAnZmFsc2UnKVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgJCgnLmJ1cmdlcicpLmFkZENsYXNzKCdzcGFuLWNvbG9yLS1ibGFjay1pbXBvcnRhbnQnKVxyXG4gICAgICBcclxuICAgIH0sIDE1MDApXHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgIGNhblNjcm9sbCA9IHRydWVcclxuICAgIH0sIDI1MDApXHJcbiAgfVxyXG4gIC8vIDwtLS0gVVNFIFRISVMgRlVOQ1RJT04gSUYgWU9VIFdBTlQgVE8gU0NST0xMIE9OIFNPTUUgU0xJREUgV0hFTiBDTElDSyBPTiBCVE5cclxuXHJcbiAgJCgnLmRyb3AtbWVudSBuYXYgYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2xpZGUgPSAkKHRoaXMpLnBhcmVudCgpLmF0dHIoJ2RhdGEtc2Nyb2xsVG8nKVxyXG4gICAgc2Nyb2xsVG9Tb21lU2xpZGUoc2xpZGUpXHJcbiAgICAkKCcuZHJvcC1tZW51JykucmVtb3ZlQ2xhc3MoJ2Ryb3AtbWVudS0tYWN0aXZlJylcclxuICB9KVxyXG5cclxuICAkKCcuc2Nyb2xsLWRvd24gYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyIHNsaWRlID0gJCh0aGlzKS5wYXJlbnQoKS5hdHRyKCdkYXRhLXNjcm9sbFRvJylcclxuICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoJ2hpZGUnKVxyXG4gICAgc2Nyb2xsVG9Tb21lU2xpZGUoc2xpZGUpXHJcbiAgfSlcclxuXHJcbn0pKGpRdWVyeSk7Il19
