!function(a){a(".burger").on("click",function(){var t;a(".buy-from-partners").hasClass("active")&&!a(".drop-menu").hasClass("drop-menu--active")?(a(".buy-from-partners").removeClass("active"),a(".burger").removeClass("burger--active span-color--black-buy-from-partners")):a(".recipies__popup").hasClass("active")?(a(".recipies__popup").removeClass("active"),setTimeout(function(){a(".burger").removeClass("burger--active")},300),a(".burger").addClass("burger--opacity-0")):a(".buy-from-partners").hasClass("active")&&a(".drop-menu").hasClass("drop-menu--active")?(a(".buy-from-partners").removeClass("active"),a(".burger").removeClass("span-color--black-buy-from-partners")):(a(this).toggleClass("burger--active"),a(this).toggleClass("span-color--black"),a(".drop-menu").toggleClass("drop-menu--active"),t=.1*a(".drop-menu--active nav li").length,a(".drop-menu--active nav li").each(function(){a(this).css("transition-delay",t+"s"),t-=.1}))});var e=a(".three-part-block .bottom-part .bottom-part__right .img").length,r=0,s=!0;a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){a(this).css("zIndex",e),--e});var o=function(){a(".main-page").addClass("prevSlide"),r<=a(".three-part-block .bottom-part .bottom-part__right .img").length-1?(1==r?a(".three-part-block .top-part").addClass("top-part--bg-position"):3==r&&setTimeout(function(){a(".burger").addClass("span-color--black-important")},1500),a(".three-part-block .top-part .text-scroll").css("transform","translate3d(-"+100*r+"vw, 0, 0)"),a(".text__wrapper").each(function(t){t==r?a(this).attr("data-curent","true"):t==r-1&&a(this).attr("data-curent","false")}),a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){t==r-1?a(this).attr("data-scroll","curent"):t==r-2?a(this).attr("data-scroll","prev"):t==r&&a(this).attr("data-scroll","next")}),a(".three-part-block").attr("data-scroll",r),r++):6==r?(r=7,a(".three-part-block").addClass("prev"),a(".video-with-handle").addClass("curent"),a(".burger").addClass("span-color--black"),a(".video-with-handle video").trigger("play"),a(".scroll-down").addClass("hide")):7==r?(r=8,a(".big-video").addClass("curent"),a(".video-with-handle").addClass("prev"),setTimeout(function(){a(".burger").removeClass("span-color--black-important"),a(".burger").removeClass("span-color--black")},1500)):8==r?(r=9,a(".big-video").addClass("prev"),a(".products-list").addClass("curent"),setTimeout(function(){a(".burger").addClass("span-color--black-important")},1500)):9==r&&(r=10,a(".recipies").addClass("curent"),a(".products-list").addClass("prev"),a(".burger").addClass("burger--opacity-0")),a(".three-part-block").addClass("animate")};a("body").on("swiperight",function(){o()}),alert("tolik"),a(".slider").on("wheel",function(t){s&&(console.log(s),s=!1,o(),setTimeout(function(){s=!0},1505),t.originalEvent.wheelDelta<0||0<t.originalEvent.wheelDelta&&(a(".three-part-block").hasClass("animate")&&1<=r&&r<=6?(a(".three-part-block .top-part .text-scroll").css("transform","translate3d(-"+100*(r-2)+"vw, 0, 0)"),a(".text__wrapper").each(function(t){t==r-1?a(this).attr("data-curent",""):t==r-2&&a(this).attr("data-curent","true")}),0==+a(".animate").attr("data-scroll")?(a(".main-page").removeClass("prevSlide"),a(".three-part-block").removeClass("animate"),a(".scroll-down").removeClass("hide"),a(".text__wrapper").each(function(t){0==t&&a(this).attr("data-curent","true")})):r<=2?(a(".three-part-block .top-part").removeClass("top-part--bg-position"),a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){t==r-2?a(this).attr("data-scroll","next"):t==r-3&&a(this).attr("data-scroll","curent")})):4==r&&setTimeout(function(){a(".burger").removeClass("span-color--black-important")},1500),a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){t==r-2?a(this).attr("data-scroll","next"):t==r-3?a(this).attr("data-scroll","curent"):t==r-1?a(this).attr("data-scroll",""):t==r&&a(this).attr("data-scroll","")}),1<=--r&&a(".three-part-block").attr("data-scroll",r-1)):7==r?(r=6,a(".three-part-block").removeClass("prev"),a(".video-with-handle").removeClass("curent"),a(".video-with-handle video").trigger("pause"),a(".scroll-down").removeClass("hide")):8==r?(console.log("test"),r=7,a(".big-video").removeClass("curent"),a(".video-with-handle").removeClass("prev"),setTimeout(function(){a(".burger").addClass("span-color--black-important")},1500)):9==r?(r=8,a(".big-video").removeClass("prev"),a(".products-list").removeClass("curent"),setTimeout(function(){a(".burger").removeClass("span-color--black-important")},1500)):10==r&&(r=9,a(".products-list").removeClass("prev"),a(".recipies").removeClass("curent"),a(".burger").removeClass("burger--opacity-0"))))}),Splitting({target:"[data-splitting]"});var i=a(".video-with-handle video"),l=a(".seekBar"),t=a(".seekBar button");i.on("timeupdate",function(t){l.css("width",100/this.duration*this.currentTime+"%")}),t.on("click",function(t){t.preventDefault()}),t.mousedown(function(t){t.preventDefault(),i.trigger("pause"),l.css({transition:"none"}),a(window).mousemove(function(t){t.pageX>l.offset().left&&l.offset().left+t.pageX<=a(window).width()&&(l.css("width",t.pageX-l.offset().left),a(".video-with-handle video")[0].currentTime=l.width()/l.parent().width()*a(".video-with-handle video")[0].duration)})}),a(window).mouseup(function(t){i.trigger("play"),a(window).off("mousemove"),l.css("width",t.pageX-l.offset().left),l.css("transition","all .3s linear")});var n=!0;a(".big-video .play-stop-btn a").on("click",function(){n?(n=!1,a(".big-video .video__wrapper video").trigger("play"),a(".logo-and-title, .seo, .social-links, .play-stop-btn").addClass("video--played"),a(".big-video").addClass("cursor--none"),a(".big-video .play-stop-btn a i").removeClass("fa-play"),a(".big-video .play-stop-btn a i").addClass("fa-pause"),a(".big-video").mousemove(function(){a(".play-stop-btn").removeClass("video--played"),a(".big-video").removeClass("cursor--none"),n||setTimeout(function(){a(".play-stop-btn").addClass("video--played")},2e3)})):(n=!0,a(".big-video .play-stop-btn a i").addClass("fa-play"),a(".big-video .play-stop-btn a i").removeClass("fa-pause"),a(".big-video .video__wrapper video").trigger("pause"),a(".logo-and-title, .seo, .social-links, .play-stop-btn").removeClass("video--played"),a(".big-video").addClass("cursor--none"))}),a(".recipies .recipies__item .play-btn a, .recipies .recipies__item .more-btn a").on("click",function(t){t.preventDefault(),a(".recipies__popup video").attr("src",a(this).parent().parent().attr("data-video")),a(".recipies__popup").addClass("active"),a(".burger").addClass("burger--active"),setTimeout(function(){a(".burger").removeClass("burger--opacity-0")},300)}),a(".recipies .main-field").slick({infinite:!0,slidesToShow:2,slidesToScroll:2,dots:!0,arrows:!1,responsive:[{breakpoint:992,settings:{slidesToShow:1,slidesToScroll:1}}]});var c=null;function d(){a(".products-intro .categories a").each(function(t){t==c?a(this).addClass("active"):a(this).removeClass("active")})}a(".products-intro .categories a").on("click",function(t){var e=a(this).index();return c=e,d(),c}),d(),a(".buy-from-partners__btn a").on("click",function(t){t.preventDefault(),a(".buy-from-partners").addClass("active"),a(".burger").addClass("span-color--black-buy-from-partners burger--active")}),a(".buy-from-partners .close-btn a").on("click",function(t){t.preventDefault(),a(".buy-from-partners").removeClass("active")}),a(".products__slider").slick({infinite:!0,prevArrow:a(".products-slider .arrows .prev a"),nextArrow:a(".products-slider .arrows .next a"),dots:!0}),a(".products-list__item").on("mouseenter",function(){a(".products-list__item").each(function(){a(this).removeClass("active"),a(this).addClass("unactive")}),a(this).removeClass("unactive"),a(this).addClass("active")}),a(".products-list__item").on("mouseleave",function(){a(".products-list__item").each(function(){a(this).removeClass("active"),a(this).removeClass("unactive")})});var p=function(e){s=!1,a(".burger").removeClass("burger--active"),a(".slide").each(function(){a(this).removeClass("curent prev"),+a(this).attr("data-slide")==+e?(a(this).addClass("curent"),console.log("test1")):+a(this).attr("data-slide")<+e?(a(this).addClass("curent prev"),console.log("test2")):(a(this).remove("curent prev"),console.log("test3"))}),r=+e+4,setTimeout(function(){a(".main-page").addClass("prevSlide"),a(".three-part-block").addClass("animate prev"),a(".three-part-block").attr("data-scroll","5"),a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){t==r-+e?a(this).attr("data-scroll","curent"):t==r-(+e-1)?a(this).attr("data-scroll","next"):a(this).attr("data-scroll","prev")}),a(".three-part-block .top-part").addClass("top-part--bg-position"),a(".three-part-block .top-part .text-scroll").css("transform","translate3d(-"+100*r+"vw, 0, 0)"),a(".text__wrapper").each(function(t){t==r-2?a(this).attr("data-curent","true"):a(this).attr("data-curent","false")}),a(".burger").addClass("span-color--black-important")},1500),setTimeout(function(){s=!0},2500)};a(".drop-menu nav a").on("click",function(){var t=a(this).parent().attr("data-scrollTo");p(t),a(".drop-menu").removeClass("drop-menu--active")}),a(".scroll-down a").on("click",function(t){t.preventDefault();var e=a(this).parent().attr("data-scrollTo");a(this).parent().addClass("hide"),p(e)})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyIkIiwib24iLCJkZWxheSIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJzZXRUaW1lb3V0IiwiYWRkQ2xhc3MiLCJ0aGlzIiwidG9nZ2xlQ2xhc3MiLCJsZW5ndGgiLCJlYWNoIiwiY3NzIiwiaW1hZ2VaaW5kZXgiLCJjdXJlbnRTbGlkZSIsImNhblNjcm9sbCIsImluZGV4Iiwic2Nyb2xsVG9OZXhTbGlkZSIsImF0dHIiLCJ0cmlnZ2VyIiwiYWxlcnQiLCJlIiwiY29uc29sZSIsImxvZyIsIm9yaWdpbmFsRXZlbnQiLCJ3aGVlbERlbHRhIiwiU3BsaXR0aW5nIiwidGFyZ2V0IiwidmlkZW8iLCJzZWVrQmFyIiwic2Vla0JhckJ0biIsImV2ZW50IiwiZHVyYXRpb24iLCJjdXJyZW50VGltZSIsInByZXZlbnREZWZhdWx0IiwibW91c2Vkb3duIiwidHJhbnNpdGlvbiIsIndpbmRvdyIsIm1vdXNlbW92ZSIsInBhZ2VYIiwib2Zmc2V0IiwibGVmdCIsIndpZHRoIiwicGFyZW50IiwibW91c2V1cCIsIm9mZiIsImJpZ1ZpZGVvUGxheSIsInNsaWNrIiwiaW5maW5pdGUiLCJzbGlkZXNUb1Nob3ciLCJzbGlkZXNUb1Njcm9sbCIsImRvdHMiLCJhcnJvd3MiLCJyZXNwb25zaXZlIiwiYnJlYWtwb2ludCIsInNldHRpbmdzIiwid2hpY2hDYXRlZ29yeSIsImNoYW5nZUNhdGVnb3J1IiwicHJldkFycm93IiwibmV4dEFycm93Iiwic2Nyb2xsVG9Tb21lU2xpZGUiLCJ3aGljaFNsaWRlIiwicmVtb3ZlIiwic2xpZGUiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJDQUFBLFNBQVVBLEdBYVJBLEVBQUUsV0FBV0MsR0FBRyxRQUFTLFdBVjNCLElBQ01DLEVBVUNGLEVBQUUsc0JBQXNCRyxTQUFTLFlBQWNILEVBQUUsY0FBY0csU0FBUyxzQkFDekVILEVBQUUsc0JBQXNCSSxZQUFZLFVBQ3BDSixFQUFFLFdBQVdJLFlBQVksdURBQ2xC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RUFBRSxrQkFBa0JDLEdBQUcsUUFBUyxTQUFTbUIsR0FDdkNBLEVBQUVhLGlCQUNGLElBQUk2QixFQUFROUQsRUFBRU8sTUFBTW1DLFNBQVN6QixLQUFLLGlCQUNsQ2pCLEVBQUVPLE1BQU1tQyxTQUFTcEMsU0FBUyxRQUMxQnFELEVBQWtCRyxLQS9mdEIsQ0FrZ0JHQyIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCQpIHtcclxuICBcclxuLy8gLS0tPiBEUk9QIERPV04gTUVOVVxyXG5mdW5jdGlvbiBnaXZlTmF2aWdhdGlvbkRlbGF5ICgpeyBcclxuICB2YXIgZGVsYXkgPSAwLjEgKiAkKCcuZHJvcC1tZW51LS1hY3RpdmUgbmF2IGxpJykubGVuZ3RoO1xyXG4gIFxyXG4gICQoJy5kcm9wLW1lbnUtLWFjdGl2ZSBuYXYgbGknKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAkKHRoaXMpLmNzcygndHJhbnNpdGlvbi1kZWxheScsIGRlbGF5KydzJylcclxuICAgIGRlbGF5ID0gZGVsYXkgLSAwLjFcclxuICB9KVxyXG59XHJcblxyXG4gXHJcbiAgJCgnLmJ1cmdlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICBpZigkKCcuYnV5LWZyb20tcGFydG5lcnMnKS5oYXNDbGFzcygnYWN0aXZlJykgJiYgISQoJy5kcm9wLW1lbnUnKS5oYXNDbGFzcygnZHJvcC1tZW51LS1hY3RpdmUnKSl7XHJcbiAgICAgICQoJy5idXktZnJvbS1wYXJ0bmVycycpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAkKCcuYnVyZ2VyJykucmVtb3ZlQ2xhc3MoJ2J1cmdlci0tYWN0aXZlIHNwYW4tY29sb3ItLWJsYWNrLWJ1eS1mcm9tLXBhcnRuZXJzJylcclxuICAgIH1lbHNlIGlmKCQoJy5yZWNpcGllc19fcG9wdXAnKS5oYXNDbGFzcygnYWN0aXZlJykpe1xyXG4gICAgICAkKCcucmVjaXBpZXNfX3BvcHVwJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAkKCcuYnVyZ2VyJykucmVtb3ZlQ2xhc3MoJ2J1cmdlci0tYWN0aXZlJylcclxuICAgICAgfSwgMzAwKVxyXG4gICAgICAkKCcuYnVyZ2VyJykuYWRkQ2xhc3MoJ2J1cmdlci0tb3BhY2l0eS0wJylcclxuICAgIH1lbHNlIGlmKCQoJy5idXktZnJvbS1wYXJ0bmVycycpLmhhc0NsYXNzKCdhY3RpdmUnKSAmJiAkKCcuZHJvcC1tZW51JykuaGFzQ2xhc3MoJ2Ryb3AtbWVudS0tYWN0aXZlJykpe1xyXG4gICAgICAkKCcuYnV5LWZyb20tcGFydG5lcnMnKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcclxuICAgICAgJCgnLmJ1cmdlcicpLnJlbW92ZUNsYXNzKCdzcGFuLWNvbG9yLS1ibGFjay1idXktZnJvbS1wYXJ0bmVycycpXHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdidXJnZXItLWFjdGl2ZScpO1xyXG4gICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdzcGFuLWNvbG9yLS1ibGFjaycpO1xyXG4gICAgICAkKCcuZHJvcC1tZW51JykudG9nZ2xlQ2xhc3MoJ2Ryb3AtbWVudS0tYWN0aXZlJyk7XHJcbiAgICAgIGdpdmVOYXZpZ2F0aW9uRGVsYXkoKTtcclxuICAgIH1cclxuICAgIFxyXG4gIH0pXHJcbi8vIDwtLS0gRFJPUCBET1dOIE1FTlVcclxuXHJcbi8vIC0tLT4gU0xJREVSIExPR0lDSyBcclxuXHJcbiAgdmFyIGltYWdlWmluZGV4ID0gJCgnLnRocmVlLXBhcnQtYmxvY2sgLmJvdHRvbS1wYXJ0IC5ib3R0b20tcGFydF9fcmlnaHQgLmltZycpLmxlbmd0aCBcclxuICB2YXIgY3VyZW50U2xpZGUgPSAwO1xyXG4gIHZhciBjYW5TY3JvbGwgPSB0cnVlO1xyXG4gIHZhciBhbmltYXRpdG9uRW5kID0gdHJ1ZTtcclxuXHJcbiAgLy8gLS0tPiBBREQgWi1JTkRFWCBGT1IgQUxMIElNQUdFU1xyXG4gICQoJy50aHJlZS1wYXJ0LWJsb2NrIC5ib3R0b20tcGFydCAuYm90dG9tLXBhcnRfX3JpZ2h0IC5pbWcnKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcclxuICAgICQodGhpcykuY3NzKCd6SW5kZXgnLCBpbWFnZVppbmRleClcclxuICAgIC0taW1hZ2VaaW5kZXhcclxuICB9KVxyXG4gIC8vIDwtLS0gQUREIFotSU5ERVggRk9SIEFMTCBJTUFHRVNcclxuLy8gICAkKCdib2R5Jykub24oJ3RyYW5zaXRpb25lbmQgd2Via2l0VHJhbnNpdGlvbkVuZCBvVHJhbnNpdGlvbkVuZCcsIGZ1bmN0aW9uICgpIHtcclxuLy8gICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuLy8gICAgICAgY29uc29sZS5sb2coJ3Rlc3QnKTtcclxuLy8gICAgICAgYW5pbWF0aXRvbkVuZCA9IHRydWVcclxuLy8gICAgIH0sIDE1MDApXHJcbi8vICAgICByZXR1cm4gXHJcbi8vIH0pOyBcclxuXHJcblxyXG4gIHZhciBzY3JvbGxUb05leFNsaWRlID0gZnVuY3Rpb24oKXtcclxuICAgICQoJy5tYWluLXBhZ2UnKS5hZGRDbGFzcygncHJldlNsaWRlJylcclxuICAgIC8vICQoJy5zY3JvbGwtZG93bicpLmFkZENsYXNzKCdoaWRlJylcclxuICAgICAgIGlmKGN1cmVudFNsaWRlIDw9ICQoJy50aHJlZS1wYXJ0LWJsb2NrIC5ib3R0b20tcGFydCAuYm90dG9tLXBhcnRfX3JpZ2h0IC5pbWcnKS5sZW5ndGggLSAxKXtcclxuICAgICAgICAvLyAtLS0+IEFERCBCRyBGT1IgRklSU1QgU0xJREVcclxuICAgICAgICBcclxuICAgICAgICBpZihjdXJlbnRTbGlkZSA9PSAxKXtcclxuICAgICAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrIC50b3AtcGFydCcpLmFkZENsYXNzKCd0b3AtcGFydC0tYmctcG9zaXRpb24nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihjdXJlbnRTbGlkZSA9PSAzKXtcclxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCgnLmJ1cmdlcicpLmFkZENsYXNzKCdzcGFuLWNvbG9yLS1ibGFjay1pbXBvcnRhbnQnKVxyXG4gICAgICAgICAgfSwgMTUwMClcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gPC0tLSBBREQgQkcgRk9SIEZJUlNUIFNMSURFXHJcblxyXG4gICAgICAgIC8vIC0tLT4gVEVYVCBBTklNQVRJT05cclxuICAgICAgICAkKCcudGhyZWUtcGFydC1ibG9jayAudG9wLXBhcnQgLnRleHQtc2Nyb2xsJykuY3NzKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlM2QoLScrICgxMDAgKiBjdXJlbnRTbGlkZSkgKyd2dywgMCwgMCknKVxyXG5cclxuICAgICAgICAkKCcudGV4dF9fd3JhcHBlcicpLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgICAgICAgaWYoaW5kZXggPT0gY3VyZW50U2xpZGUpe1xyXG4gICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtY3VyZW50JywgJ3RydWUnKVxyXG4gICAgICAgICAgfWVsc2UgaWYoaW5kZXggPT0gY3VyZW50U2xpZGUgLSAxKXtcclxuICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLWN1cmVudCcsICdmYWxzZScpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAvLyA8LS0tIFRFWFQgQU5JTUFUSU9OXHJcblxyXG4gICAgICAgIC8vIC0tLT4gQ0hBTkdFIERBVEEtQVRSSUJVVEVTIEZPUiBJTUFHRVNcclxuICAgICAgICAkKCcudGhyZWUtcGFydC1ibG9jayAuYm90dG9tLXBhcnQgLmJvdHRvbS1wYXJ0X19yaWdodCAuaW1nJykuZWFjaChmdW5jdGlvbihpbmRleCl7XHJcbiAgICAgICAgICBpZihpbmRleCA9PSBjdXJlbnRTbGlkZSAtIDEpe1xyXG4gICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJ2N1cmVudCcpXHJcbiAgICAgICAgICB9ZWxzZSBpZihpbmRleCA9PSBjdXJlbnRTbGlkZSAtIDIpe1xyXG4gICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJ3ByZXYnKVxyXG4gICAgICAgICAgfWVsc2UgaWYoaW5kZXggPT0gY3VyZW50U2xpZGUpe1xyXG4gICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJ25leHQnKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy8gPC0tLSBDSEFOR0UgREFUQS1BVFJJQlVURVMgRk9SIElNQUdFU1xyXG4gICAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrJykuYXR0cignZGF0YS1zY3JvbGwnLCBjdXJlbnRTbGlkZSlcclxuICAgICAgICBjdXJlbnRTbGlkZSsrXHJcbiAgICAgIH0gXHJcbiAgICAgIFxyXG4gICAgICBlbHNlIGlmKGN1cmVudFNsaWRlID09IDYpe1xyXG4gICAgICAgIGN1cmVudFNsaWRlID0gN1xyXG4gICAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrJykuYWRkQ2xhc3MoJ3ByZXYnKVxyXG4gICAgICAgICQoJy52aWRlby13aXRoLWhhbmRsZScpLmFkZENsYXNzKCdjdXJlbnQnKVxyXG4gICAgICAgICQoJy5idXJnZXInKS5hZGRDbGFzcygnc3Bhbi1jb2xvci0tYmxhY2snKVxyXG4gICAgICAgICQoJy52aWRlby13aXRoLWhhbmRsZSB2aWRlbycpLnRyaWdnZXIoJ3BsYXknKVxyXG4gICAgICAgICQoJy5zY3JvbGwtZG93bicpLmFkZENsYXNzKCdoaWRlJylcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmKGN1cmVudFNsaWRlID09IDcpe1xyXG4gICAgICAgIGN1cmVudFNsaWRlID0gOFxyXG4gICAgICAgICQoJy5iaWctdmlkZW8nKS5hZGRDbGFzcygnY3VyZW50Jyk7XHJcbiAgICAgICAgJCgnLnZpZGVvLXdpdGgtaGFuZGxlJykuYWRkQ2xhc3MoJ3ByZXYnKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAkKCcuYnVyZ2VyJykucmVtb3ZlQ2xhc3MoJ3NwYW4tY29sb3ItLWJsYWNrLWltcG9ydGFudCcpO1xyXG4gICAgICAgICAgJCgnLmJ1cmdlcicpLnJlbW92ZUNsYXNzKCdzcGFuLWNvbG9yLS1ibGFjaycpO1xyXG4gICAgICAgIH0sIDE1MDApXHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZihjdXJlbnRTbGlkZSA9PSA4KXtcclxuICAgICAgICBjdXJlbnRTbGlkZSA9IDk7XHJcbiAgICAgICAgJCgnLmJpZy12aWRlbycpLmFkZENsYXNzKCdwcmV2Jyk7XHJcbiAgICAgICAgJCgnLnByb2R1Y3RzLWxpc3QnKS5hZGRDbGFzcygnY3VyZW50JylcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAkKCcuYnVyZ2VyJykuYWRkQ2xhc3MoJ3NwYW4tY29sb3ItLWJsYWNrLWltcG9ydGFudCcpXHJcbiAgICAgICAgfSwgMTUwMClcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmKGN1cmVudFNsaWRlID09IDkpe1xyXG4gICAgICAgIGN1cmVudFNsaWRlID0gMTA7XHJcbiAgICAgICAgJCgnLnJlY2lwaWVzJykuYWRkQ2xhc3MoJ2N1cmVudCcpO1xyXG4gICAgICAgICQoJy5wcm9kdWN0cy1saXN0JykuYWRkQ2xhc3MoJ3ByZXYnKTsgXHJcbiAgICAgICAgJCgnLmJ1cmdlcicpLmFkZENsYXNzKCdidXJnZXItLW9wYWNpdHktMCcpXHJcbiAgICAgIH1cclxuICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2snKS5hZGRDbGFzcygnYW5pbWF0ZScpO1xyXG4gIH1cclxuXHJcbiAgJCggXCJib2R5XCIgKS5vbiggXCJzd2lwZXJpZ2h0XCIsIGZ1bmN0aW9uKCl7XHJcbiAgICBzY3JvbGxUb05leFNsaWRlKClcclxuICB9ICk7XHJcbiBcclxuICBhbGVydCgndG9saWsnKVxyXG5cclxuICAkKCcuc2xpZGVyJykub24oJ3doZWVsJywgZnVuY3Rpb24oZSl7XHJcblxyXG4gICAgICBpZihjYW5TY3JvbGwpe1xyXG4gICAgICAgIC8vLS0tPiBTQ1JPTEwgVE8gTkVYVCBTTElERVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGNhblNjcm9sbClcclxuICAgICAgICBjYW5TY3JvbGwgPSBmYWxzZTtcclxuICAgICAgICBcclxuICAgICAgICBzY3JvbGxUb05leFNsaWRlKCk7XHJcblxyXG4gICAgICAgIC8vIC0tLT4gQUREIFBPU0lCSUxJVFkgVE8gU0NST0xMIEFHQUlOIFRIUk9VR0ggT05FIFNFQ09ORFxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgIGNhblNjcm9sbCA9IHRydWVcclxuICAgICAgICB9LCAxNTA1KVxyXG4gICAgICAvLyA8LS0tIEFERCBQT1NJQklMSVRZIFRPIFNDUk9MTCBBR0FJTiBUSFJPVUdIIE9ORSBTRUNPTkRcclxuICAgICAgICBpZihlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSA8IDApIHtcclxuICAgICAgICAgIFxyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gPC0tLSBTQ1JPTEwgVE8gTkVYVCBTTElERVxyXG5cclxuICAgICAgICAvLyAtLS0+IFNDUk9MTCBUTyBQUkVWSU9VUyBTTElERSBcclxuICAgICAgICBlbHNlIGlmKGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhID4gMCl7XHJcbiAgICAgICAgICBpZigkKCcudGhyZWUtcGFydC1ibG9jaycpLmhhc0NsYXNzKCdhbmltYXRlJykgICYmIGN1cmVudFNsaWRlID49IDEgJiYgY3VyZW50U2xpZGUgPD0gNil7XHJcbiAgICAgICAgICAgIC8vIC0tLT4gVEVYVCBBTklNQVRJT05cclxuICAgICAgICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2sgLnRvcC1wYXJ0IC50ZXh0LXNjcm9sbCcpLmNzcygndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZTNkKC0nKyAoMTAwICogKGN1cmVudFNsaWRlIC0gMikpICsndncsIDAsIDApJylcclxuICAgICAgICAgICAgJCgnLnRleHRfX3dyYXBwZXInKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcclxuICAgICAgICAgICAgICBpZihpbmRleCA9PSBjdXJlbnRTbGlkZS0xKXtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1jdXJlbnQnLCAnJylcclxuICAgICAgICAgICAgICB9ZWxzZSBpZihpbmRleCA9PSBjdXJlbnRTbGlkZSAtIDIpe1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLWN1cmVudCcsICd0cnVlJylcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC8vIC0tLT4gVEVYVCBBTklNQVRJT05cclxuXHJcbiAgICAgICAgICAgIC8vIFJFTU9WRSBJRiBJVCBGSVJTVCBTTElERVxyXG4gICAgICAgICAgICBpZigrKCQoJy5hbmltYXRlJykuYXR0cignZGF0YS1zY3JvbGwnKSkgPT0gMCApe1xyXG4gICAgICAgICAgICAgICQoJy5tYWluLXBhZ2UnKS5yZW1vdmVDbGFzcygncHJldlNsaWRlJylcclxuICAgICAgICAgICAgICAkKCcudGhyZWUtcGFydC1ibG9jaycpLnJlbW92ZUNsYXNzKCdhbmltYXRlJylcclxuICAgICAgICAgICAgICAkKCcuc2Nyb2xsLWRvd24nKS5yZW1vdmVDbGFzcygnaGlkZScpXHJcbiAgICAgICAgICAgICAgJCgnLnRleHRfX3dyYXBwZXInKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcclxuICAgICAgICAgICAgICAgIGlmKGluZGV4ID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtY3VyZW50JywgJ3RydWUnKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIC8vIFJFTU9WRSBJRiBJVCBGSVJTVCBTTElERVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIC8vIFJFVFVSTiBCQUNLIEJHIElNQUdFXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgZWxzZSBpZihjdXJlbnRTbGlkZSA8PSAyKXtcclxuICAgICAgICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2sgLnRvcC1wYXJ0JykucmVtb3ZlQ2xhc3MoJ3RvcC1wYXJ0LS1iZy1wb3NpdGlvbicpXHJcbiAgICAgICAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrIC5ib3R0b20tcGFydCAuYm90dG9tLXBhcnRfX3JpZ2h0IC5pbWcnKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcclxuICAgICAgICAgICAgICBpZihpbmRleCA9PSBjdXJlbnRTbGlkZSAtIDIpe1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcsICduZXh0JylcclxuICAgICAgICAgICAgICB9ZWxzZSBpZihpbmRleCA9PSBjdXJlbnRTbGlkZSAtIDMpe1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcsICdjdXJlbnQnKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIFJFVFVSTiBCQUNLIEJHIElNQUdFXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIGlmKGN1cmVudFNsaWRlID09IDQpe1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgJCgnLmJ1cmdlcicpLnJlbW92ZUNsYXNzKCdzcGFuLWNvbG9yLS1ibGFjay1pbXBvcnRhbnQnKVxyXG4gICAgICAgICAgICB9LCAxNTAwKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgIC8vIC0tLT4gQ0hBTkdFIERBVEEtQVRSSUJVVEVTIEZPUiBJTUFHRVNcclxuICAgICAgICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2sgLmJvdHRvbS1wYXJ0IC5ib3R0b20tcGFydF9fcmlnaHQgLmltZycpLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgICAgICAgICAgIGlmKGluZGV4ID09IGN1cmVudFNsaWRlIC0gMil7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJ25leHQnKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIGlmKGluZGV4ID09IGN1cmVudFNsaWRlIC0gMyl7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJ2N1cmVudCcpXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2UgaWYoIGluZGV4ID09IGN1cmVudFNsaWRlIC0gMSl7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJycpXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2UgaWYoIGluZGV4ID09IGN1cmVudFNsaWRlKXtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1zY3JvbGwnLCAnJylcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAvLyA8LS0tIENIQU5HRSBEQVRBLUFUUklCVVRFUyBGT1IgSU1BR0VTXHJcbiAgICAgICAgICAgIC0tY3VyZW50U2xpZGVcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChjdXJlbnRTbGlkZSA+PSAxKXtcclxuICAgICAgICAgICAgICAkKCcudGhyZWUtcGFydC1ibG9jaycpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgY3VyZW50U2xpZGUgLSAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGN1cmVudFNsaWRlID09IDcpe1xyXG4gICAgICAgICAgY3VyZW50U2xpZGUgPSA2XHJcbiAgICAgICAgICAkKCcudGhyZWUtcGFydC1ibG9jaycpLnJlbW92ZUNsYXNzKCdwcmV2Jyk7XHJcbiAgICAgICAgICAkKCcudmlkZW8td2l0aC1oYW5kbGUnKS5yZW1vdmVDbGFzcygnY3VyZW50Jyk7XHJcbiAgICAgICAgICAkKCcudmlkZW8td2l0aC1oYW5kbGUgdmlkZW8nKS50cmlnZ2VyKCdwYXVzZScpXHJcbiAgICAgICAgICAkKCcuc2Nyb2xsLWRvd24nKS5yZW1vdmVDbGFzcygnaGlkZScpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoY3VyZW50U2xpZGUgPT0gOCl7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygndGVzdCcpXHJcbiAgICAgICAgICBjdXJlbnRTbGlkZSA9IDdcclxuICAgICAgICAgICQoJy5iaWctdmlkZW8nKS5yZW1vdmVDbGFzcygnY3VyZW50Jyk7XHJcbiAgICAgICAgICAkKCcudmlkZW8td2l0aC1oYW5kbGUnKS5yZW1vdmVDbGFzcygncHJldicpO1xyXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkKCcuYnVyZ2VyJykuYWRkQ2xhc3MoJ3NwYW4tY29sb3ItLWJsYWNrLWltcG9ydGFudCcpXHJcbiAgICAgICAgICB9LCAxNTAwKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGN1cmVudFNsaWRlID09IDkpe1xyXG4gICAgICAgICAgY3VyZW50U2xpZGUgPSA4O1xyXG4gICAgICAgICAgJCgnLmJpZy12aWRlbycpLnJlbW92ZUNsYXNzKCdwcmV2Jyk7XHJcbiAgICAgICAgICAkKCcucHJvZHVjdHMtbGlzdCcpLnJlbW92ZUNsYXNzKCdjdXJlbnQnKTtcclxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCgnLmJ1cmdlcicpLnJlbW92ZUNsYXNzKCdzcGFuLWNvbG9yLS1ibGFjay1pbXBvcnRhbnQnKVxyXG4gICAgICAgICAgfSwgMTUwMClcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoY3VyZW50U2xpZGUgPT0gMTApe1xyXG4gICAgICAgICAgY3VyZW50U2xpZGUgPSA5O1xyXG4gICAgICAgICAgJCgnLnByb2R1Y3RzLWxpc3QnKS5yZW1vdmVDbGFzcygncHJldicpO1xyXG4gICAgICAgICAgJCgnLnJlY2lwaWVzJykucmVtb3ZlQ2xhc3MoJ2N1cmVudCcpO1xyXG4gICAgICAgICAgJCgnLmJ1cmdlcicpLnJlbW92ZUNsYXNzKCdidXJnZXItLW9wYWNpdHktMCcpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICAgIC8vIC0tLT4gQUREIFBPU0lCSUxJVFkgVE8gU0NST0xMIEFHQUlOIFRIUk9VR0ggT05FIFNFQ09ORFxyXG4gICAgICAgICAgLy8gc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgLy8gICBjYW5TY3JvbGwgPSB0cnVlXHJcbiAgICAgICAgICAvLyB9LCAxMDAwKVxyXG4gICAgICAgICAgLy8gPC0tLSBBREQgUE9TSUJJTElUWSBUTyBTQ1JPTEwgQUdBSU4gVEhST1VHSCBPTkUgU0VDT05EXHJcblxyXG4gICAgICB9XHJcbiAgICAgIC8vIDwtLS0gU0NST0xMIFRPIFBSRVZJT1VTIFNMSURFXHJcblxyXG4gICAgICAvLyAvLyAtLS0+IFJFTU9WRSBQT1NJQklMSVRZIFRPIFNDUk9MTCBBR0FJTlxyXG4gICAgICAvLyBjYW5TY3JvbGwgPSBmYWxzZVxyXG4gICAgICAvLyAvLyA8LS0tIFJFTU9WRSBQT1NJQklMSVRZIFRPIFNDUk9MTCBBR0FJTlxyXG4gIH0pO1xyXG4vLyA8LS0tIFNMSURFUiBMT0dJQ0tcclxuXHJcbiAgLy8gLS0tPiBURVhUIFNQTElUSU5HXHJcbiAgU3BsaXR0aW5nKHtcclxuICAgIHRhcmdldDogXCJbZGF0YS1zcGxpdHRpbmddXCJcclxuICB9KTtcclxuICAvLyA8LS0tIFRFWFQgU1BMSVRJTkdcclxuXHJcbiAgLy8gLS0tPiBTRUVLIEJBUiBGT1IgJ3ZpZGVvLXdpdGgtaGFuZGxlJ1xyXG4gIHZhciB2aWRlbyA9ICQoJy52aWRlby13aXRoLWhhbmRsZSB2aWRlbycpO1xyXG4gIHZhciBzZWVrQmFyID0gJChcIi5zZWVrQmFyXCIpO1xyXG4gIHZhciBzZWVrQmFyQnRuID0gJChcIi5zZWVrQmFyIGJ1dHRvblwiKVxyXG4gICBcclxuICB2aWRlby5vbihcclxuICAgIFwidGltZXVwZGF0ZVwiLCBcclxuICAgIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgc2Vla0Jhci5jc3MoJ3dpZHRoJywgJycrICgoMTAwIC8gdGhpcy5kdXJhdGlvbikgKiB0aGlzLmN1cnJlbnRUaW1lKSArJyUnKVxyXG4gIH0pO1xyXG5cclxuICBzZWVrQmFyQnRuLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgfSk7XHJcblxyXG4gIHNlZWtCYXJCdG4ubW91c2Vkb3duKGZ1bmN0aW9uKGUpe1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmlkZW8udHJpZ2dlcigncGF1c2UnKTtcclxuICAgIHNlZWtCYXIuY3NzKHtcclxuICAgICAgdHJhbnNpdGlvbjogJ25vbmUnLFxyXG4gICAgfSlcclxuICAgIFxyXG4gICAgJCh3aW5kb3cpLm1vdXNlbW92ZShmdW5jdGlvbihlKSB7XHJcbiAgICAgIGlmKGUucGFnZVggPiBzZWVrQmFyLm9mZnNldCgpLmxlZnQgJiYgKHNlZWtCYXIub2Zmc2V0KCkubGVmdCArIGUucGFnZVgpIDw9ICQod2luZG93KS53aWR0aCgpKXtcclxuICAgICAgICBzZWVrQmFyLmNzcygnd2lkdGgnLCAgZS5wYWdlWCAtIHNlZWtCYXIub2Zmc2V0KCkubGVmdClcclxuICAgICAgICAkKCcudmlkZW8td2l0aC1oYW5kbGUgdmlkZW8nKVswXS5jdXJyZW50VGltZSA9ICgoc2Vla0Jhci53aWR0aCgpIC8gc2Vla0Jhci5wYXJlbnQoKS53aWR0aCgpKSkgKiAkKCcudmlkZW8td2l0aC1oYW5kbGUgdmlkZW8nKVswXS5kdXJhdGlvblxyXG4gICAgICB9IFxyXG4gICAgfSlcclxuICB9KTtcclxuXHJcbiAgJCh3aW5kb3cpLm1vdXNldXAoZnVuY3Rpb24oZSl7XHJcbiAgICB2aWRlby50cmlnZ2VyKCdwbGF5Jyk7XHJcbiAgICAkKHdpbmRvdykub2ZmKCdtb3VzZW1vdmUnKTtcclxuICAgIHNlZWtCYXIuY3NzKCd3aWR0aCcsICBlLnBhZ2VYIC0gc2Vla0Jhci5vZmZzZXQoKS5sZWZ0KVxyXG4gICAgc2Vla0Jhci5jc3MoJ3RyYW5zaXRpb24nLCAnYWxsIC4zcyBsaW5lYXInKVxyXG4gIH0pO1xyXG4gIC8vIDwtLS0gU0VFSyBCQVIgRk9SICd2aWRlby13aXRoLWhhbmRsZSdcclxuXHJcbiAgLy8gLS0tPiBCSUcgVklERU8gQkxPQ0tcclxuICAgIHZhciBiaWdWaWRlb1BsYXkgPSB0cnVlXHJcblxyXG4gICAgJCgnLmJpZy12aWRlbyAucGxheS1zdG9wLWJ0biBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgaWYoYmlnVmlkZW9QbGF5KXtcclxuICAgICAgICBiaWdWaWRlb1BsYXkgPSBmYWxzZTtcclxuICAgICAgICAkKCcuYmlnLXZpZGVvIC52aWRlb19fd3JhcHBlciB2aWRlbycpLnRyaWdnZXIoJ3BsYXknKTtcclxuICAgICAgICAkKCcubG9nby1hbmQtdGl0bGUsIC5zZW8sIC5zb2NpYWwtbGlua3MsIC5wbGF5LXN0b3AtYnRuJykuYWRkQ2xhc3MoJ3ZpZGVvLS1wbGF5ZWQnKTtcclxuICAgICAgICAkKCcuYmlnLXZpZGVvJykuYWRkQ2xhc3MoJ2N1cnNvci0tbm9uZScpO1xyXG4gICAgICAgICQoJy5iaWctdmlkZW8gLnBsYXktc3RvcC1idG4gYSBpJykucmVtb3ZlQ2xhc3MoJ2ZhLXBsYXknKTtcclxuICAgICAgICAkKCcuYmlnLXZpZGVvIC5wbGF5LXN0b3AtYnRuIGEgaScpLmFkZENsYXNzKCdmYS1wYXVzZScpO1xyXG4gICAgICAgICQoJy5iaWctdmlkZW8nKS5tb3VzZW1vdmUoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICQoJy5wbGF5LXN0b3AtYnRuJykucmVtb3ZlQ2xhc3MoJ3ZpZGVvLS1wbGF5ZWQnKVxyXG4gICAgICAgICAgJCgnLmJpZy12aWRlbycpLnJlbW92ZUNsYXNzKCdjdXJzb3ItLW5vbmUnKVxyXG4gICAgICAgICAgaWYoIWJpZ1ZpZGVvUGxheSl7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAkKCcucGxheS1zdG9wLWJ0bicpLmFkZENsYXNzKCd2aWRlby0tcGxheWVkJylcclxuICAgICAgICAgICAgfSwgMjAwMClcclxuICAgICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgYmlnVmlkZW9QbGF5ID0gdHJ1ZTtcclxuICAgICAgICAkKCcuYmlnLXZpZGVvIC5wbGF5LXN0b3AtYnRuIGEgaScpLmFkZENsYXNzKCdmYS1wbGF5Jyk7XHJcbiAgICAgICAgJCgnLmJpZy12aWRlbyAucGxheS1zdG9wLWJ0biBhIGknKS5yZW1vdmVDbGFzcygnZmEtcGF1c2UnKTtcclxuICAgICAgICAkKCcuYmlnLXZpZGVvIC52aWRlb19fd3JhcHBlciB2aWRlbycpLnRyaWdnZXIoJ3BhdXNlJyk7XHJcbiAgICAgICAgJCgnLmxvZ28tYW5kLXRpdGxlLCAuc2VvLCAuc29jaWFsLWxpbmtzLCAucGxheS1zdG9wLWJ0bicpLnJlbW92ZUNsYXNzKCd2aWRlby0tcGxheWVkJylcclxuICAgICAgICAkKCcuYmlnLXZpZGVvJykuYWRkQ2xhc3MoJ2N1cnNvci0tbm9uZScpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gIC8vIDwtLS0gQklHIFZJREVPIEJMT0NLXHJcblxyXG4gIC8vIC0tLT4gUkVDSVBJRVMgQkxPQ0tcclxuXHJcbiAgICAkKCcucmVjaXBpZXMgLnJlY2lwaWVzX19pdGVtIC5wbGF5LWJ0biBhLCAucmVjaXBpZXMgLnJlY2lwaWVzX19pdGVtIC5tb3JlLWJ0biBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgJCgnLnJlY2lwaWVzX19wb3B1cCB2aWRlbycpLmF0dHIoJ3NyYycsICQodGhpcykucGFyZW50KCkucGFyZW50KCkuYXR0cignZGF0YS12aWRlbycpKVxyXG4gICAgICAkKCcucmVjaXBpZXNfX3BvcHVwJykuYWRkQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgICQoJy5idXJnZXInKS5hZGRDbGFzcygnYnVyZ2VyLS1hY3RpdmUnKVxyXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCgnLmJ1cmdlcicpLnJlbW92ZUNsYXNzKCdidXJnZXItLW9wYWNpdHktMCcpXHJcbiAgICAgIH0sIDMwMClcclxuICAgIH0pXHJcbiAgICAvLyAtLS0+IFNMSURFUlxyXG5cclxuICAgICQoJy5yZWNpcGllcyAubWFpbi1maWVsZCcpLnNsaWNrKHtcclxuICAgICAgaW5maW5pdGU6IHRydWUsXHJcbiAgICAgIHNsaWRlc1RvU2hvdzogMixcclxuICAgICAgc2xpZGVzVG9TY3JvbGw6IDIsXHJcbiAgICAgIGRvdHM6IHRydWUsXHJcbiAgICAgIGFycm93czogZmFsc2UsXHJcbiAgICAgIHJlc3BvbnNpdmU6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBicmVha3BvaW50OiA5OTIsXHJcbiAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxIFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgXVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gPC0tLSBTTElERVJcclxuICAvLyA8LS0tIFJFQ0lQSUVTIEJMT0NLXHJcblxyXG4gIC8vIC0tLT4gQ0FURUdPUklFUyBMT0dJQ1xyXG4gICAgdmFyIHdoaWNoQ2F0ZWdvcnkgPSBudWxsXHJcblxyXG4gICAgJCgnLnByb2R1Y3RzLWludHJvIC5jYXRlZ29yaWVzIGEnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgdmFyIGluZGV4ID0gJCh0aGlzKS5pbmRleCgpXHJcbiAgICAgIHdoaWNoQ2F0ZWdvcnkgPSBpbmRleFxyXG4gICAgICBjaGFuZ2VDYXRlZ29ydSgpXHJcbiAgICAgIHJldHVybiB3aGljaENhdGVnb3J5XHJcbiAgICB9KVxyXG5cclxuICAgIGZ1bmN0aW9uIGNoYW5nZUNhdGVnb3J1KCl7XHJcbiAgICAgICQoJy5wcm9kdWN0cy1pbnRybyAuY2F0ZWdvcmllcyBhJykuZWFjaChmdW5jdGlvbihpbmRleCl7XHJcbiAgICAgICAgaWYgKGluZGV4ID09IHdoaWNoQ2F0ZWdvcnkpe1xyXG4gICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJylcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgY2hhbmdlQ2F0ZWdvcnUoKVxyXG5cclxuICAvLyA8LS0tIENBVEVHT1JJRVMgTE9HSUNcclxuICAkKCcuYnV5LWZyb20tcGFydG5lcnNfX2J0biBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAkKCcuYnV5LWZyb20tcGFydG5lcnMnKS5hZGRDbGFzcyhcImFjdGl2ZVwiKVxyXG4gICAgJCgnLmJ1cmdlcicpLmFkZENsYXNzKCdzcGFuLWNvbG9yLS1ibGFjay1idXktZnJvbS1wYXJ0bmVycyBidXJnZXItLWFjdGl2ZScpXHJcbiAgfSlcclxuXHJcbiAgJCgnLmJ1eS1mcm9tLXBhcnRuZXJzIC5jbG9zZS1idG4gYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgJCgnLmJ1eS1mcm9tLXBhcnRuZXJzJykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIilcclxuICB9KVxyXG5cclxuICAkKCcucHJvZHVjdHNfX3NsaWRlcicpLnNsaWNrKHtcclxuICAgIGluZmluaXRlOiB0cnVlLFxyXG4gICAgcHJldkFycm93OiAkKCcucHJvZHVjdHMtc2xpZGVyIC5hcnJvd3MgLnByZXYgYScpLFxyXG4gICAgbmV4dEFycm93OiAkKCcucHJvZHVjdHMtc2xpZGVyIC5hcnJvd3MgLm5leHQgYScpLFxyXG4gICAgZG90czogdHJ1ZVxyXG4gIH0pO1xyXG5cclxuICAkKCcucHJvZHVjdHMtbGlzdF9faXRlbScpLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24oKXtcclxuICAgICQoJy5wcm9kdWN0cy1saXN0X19pdGVtJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAkKHRoaXMpLmFkZENsYXNzKCd1bmFjdGl2ZScpXHJcbiAgICB9KVxyXG4gICAgJCh0aGlzKS5yZW1vdmVDbGFzcygndW5hY3RpdmUnKVxyXG4gICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJylcclxuICB9KVxyXG4gICQoJy5wcm9kdWN0cy1saXN0X19pdGVtJykub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbigpe1xyXG4gICAgJCgnLnByb2R1Y3RzLWxpc3RfX2l0ZW0nKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3VuYWN0aXZlJylcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgLy8gLS0tPiBVU0UgVEhJUyBGVU5DVElPTiBJRiBZT1UgV0FOVCBUTyBTQ1JPTEwgT04gU09NRSBTTElERSBXSEVOIENMSUNLIE9OIEJUTlxyXG4gIHZhciBzY3JvbGxUb1NvbWVTbGlkZSA9IGZ1bmN0aW9uKHdoaWNoU2xpZGUpe1xyXG4gICAgY2FuU2Nyb2xsID0gZmFsc2VcclxuICAgICQoJy5idXJnZXInKS5yZW1vdmVDbGFzcygnYnVyZ2VyLS1hY3RpdmUnKSBcclxuXHJcbiAgICAkKCcuc2xpZGUnKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2N1cmVudCBwcmV2JylcclxuICAgICAgaWYoKyQodGhpcykuYXR0cignZGF0YS1zbGlkZScpID09ICt3aGljaFNsaWRlKXtcclxuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdjdXJlbnQnKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCd0ZXN0MScpXHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZigrJCh0aGlzKS5hdHRyKCdkYXRhLXNsaWRlJykgPCArd2hpY2hTbGlkZSl7XHJcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnY3VyZW50IHByZXYnKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCd0ZXN0MicpXHJcbiAgICAgIH1cclxuICAgICAgZWxzZXtcclxuICAgICAgICAkKHRoaXMpLnJlbW92ZSgnY3VyZW50IHByZXYnKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCd0ZXN0MycpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgY3VyZW50U2xpZGUgPSA0ICsgK3doaWNoU2xpZGU7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICQoJy5tYWluLXBhZ2UnKS5hZGRDbGFzcygncHJldlNsaWRlJylcclxuICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2snKS5hZGRDbGFzcygnYW5pbWF0ZSBwcmV2JylcclxuICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2snKS5hdHRyKCdkYXRhLXNjcm9sbCcsICc1JylcclxuICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2sgLmJvdHRvbS1wYXJ0IC5ib3R0b20tcGFydF9fcmlnaHQgLmltZycpLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgICAgIGlmKGluZGV4ID09IChjdXJlbnRTbGlkZSAtICggK3doaWNoU2xpZGUpKSl7XHJcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJ2N1cmVudCcpXHJcbiAgICAgICAgfWVsc2UgaWYoaW5kZXggPT0gKGN1cmVudFNsaWRlIC0gKC0xICsgK3doaWNoU2xpZGUpKSl7XHJcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJ25leHQnKVxyXG4gICAgICAgIH1lbHNlIGlmKGluZGV4ID09ICAoY3VyZW50U2xpZGUgLSAoMSArICt3aGljaFNsaWRlKSkpe1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcsICdwcmV2JylcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1zY3JvbGwnLCAncHJldicpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAkKCcudGhyZWUtcGFydC1ibG9jayAudG9wLXBhcnQnKS5hZGRDbGFzcygndG9wLXBhcnQtLWJnLXBvc2l0aW9uJyk7XHJcbiAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrIC50b3AtcGFydCAudGV4dC1zY3JvbGwnKS5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUzZCgtJysgKDEwMCAqIGN1cmVudFNsaWRlKSArJ3Z3LCAwLCAwKScpXHJcblxyXG4gICAgICAkKCcudGV4dF9fd3JhcHBlcicpLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgICAgIGlmKGluZGV4ID09IGN1cmVudFNsaWRlIC0gMil7XHJcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtY3VyZW50JywgJ3RydWUnKVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLWN1cmVudCcsICdmYWxzZScpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAkKCcuYnVyZ2VyJykuYWRkQ2xhc3MoJ3NwYW4tY29sb3ItLWJsYWNrLWltcG9ydGFudCcpXHJcbiAgICAgIFxyXG4gICAgfSwgMTUwMClcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgY2FuU2Nyb2xsID0gdHJ1ZVxyXG4gICAgfSwgMjUwMClcclxuICB9XHJcbiAgLy8gPC0tLSBVU0UgVEhJUyBGVU5DVElPTiBJRiBZT1UgV0FOVCBUTyBTQ1JPTEwgT04gU09NRSBTTElERSBXSEVOIENMSUNLIE9OIEJUTlxyXG5cclxuICAkKCcuZHJvcC1tZW51IG5hdiBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgIHZhciBzbGlkZSA9ICQodGhpcykucGFyZW50KCkuYXR0cignZGF0YS1zY3JvbGxUbycpXHJcbiAgICBzY3JvbGxUb1NvbWVTbGlkZShzbGlkZSlcclxuICAgICQoJy5kcm9wLW1lbnUnKS5yZW1vdmVDbGFzcygnZHJvcC1tZW51LS1hY3RpdmUnKVxyXG4gIH0pXHJcblxyXG4gICQoJy5zY3JvbGwtZG93biBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB2YXIgc2xpZGUgPSAkKHRoaXMpLnBhcmVudCgpLmF0dHIoJ2RhdGEtc2Nyb2xsVG8nKVxyXG4gICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnaGlkZScpXHJcbiAgICBzY3JvbGxUb1NvbWVTbGlkZShzbGlkZSlcclxuICB9KVxyXG5cclxufSkoalF1ZXJ5KTsiXX0=
