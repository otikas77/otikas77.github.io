!function(a){a(".burger").on("click",function(){var t;a(".buy-from-partners").hasClass("active")&&!a(".drop-menu").hasClass("drop-menu--active")?(a(".buy-from-partners").removeClass("active"),a(".burger").removeClass("burger--active span-color--black-buy-from-partners")):a(".recipies__popup").hasClass("active")?(a(".recipies__popup").removeClass("active"),setTimeout(function(){a(".burger").removeClass("burger--active")},300),a(".burger").addClass("burger--opacity-0")):a(".buy-from-partners").hasClass("active")&&a(".drop-menu").hasClass("drop-menu--active")?(a(".buy-from-partners").removeClass("active"),a(".burger").removeClass("span-color--black-buy-from-partners")):(a(this).toggleClass("burger--active"),a(this).toggleClass("span-color--black"),a(".drop-menu").toggleClass("drop-menu--active"),t=.1*a(".drop-menu--active nav li").length,a(".drop-menu--active nav li").each(function(){a(this).css("transition-delay",t+"s"),t-=.1}))});var e=a(".three-part-block .bottom-part .bottom-part__right .img").length,r=0,s=!0;a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){a(this).css("zIndex",e),--e}),a(".slider").on("wheel",function(t){s&&(console.log(s),s=!1,setTimeout(function(){s=!0},1505),t.originalEvent.wheelDelta<0?(a(".main-page").addClass("prevSlide"),r<=a(".three-part-block .bottom-part .bottom-part__right .img").length-1?(1==r?a(".three-part-block .top-part").addClass("top-part--bg-position"):3==r&&setTimeout(function(){a(".burger").addClass("span-color--black-important")},1500),a(".three-part-block .top-part .text-scroll").css("transform","translate3d(-"+100*r+"vw, 0, 0)"),a(".text__wrapper").each(function(t){t==r?a(this).attr("data-curent","true"):t==r-1&&a(this).attr("data-curent","false")}),a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){t==r-1?a(this).attr("data-scroll","curent"):t==r-2?a(this).attr("data-scroll","prev"):t==r&&a(this).attr("data-scroll","next")}),a(".three-part-block").attr("data-scroll",r),r++):6==r?(r=7,a(".three-part-block").addClass("prev"),a(".video-with-handle").addClass("curent"),a(".burger").addClass("span-color--black"),a(".video-with-handle video").trigger("play"),a(".scroll-down").addClass("hide")):7==r?(r=8,a(".big-video").addClass("curent"),a(".video-with-handle").addClass("prev"),setTimeout(function(){a(".burger").removeClass("span-color--black-important"),a(".burger").removeClass("span-color--black")},1500)):8==r?(r=9,a(".big-video").addClass("prev"),a(".products-list").addClass("curent"),setTimeout(function(){a(".burger").addClass("span-color--black-important")},1500)):9==r&&(r=10,a(".recipies").addClass("curent"),a(".products-list").addClass("prev"),a(".burger").addClass("burger--opacity-0")),a(".three-part-block").addClass("animate")):0<t.originalEvent.wheelDelta&&(a(".three-part-block").hasClass("animate")&&1<=r&&r<=6?(a(".three-part-block .top-part .text-scroll").css("transform","translate3d(-"+100*(r-2)+"vw, 0, 0)"),a(".text__wrapper").each(function(t){t==r-1?a(this).attr("data-curent",""):t==r-2&&a(this).attr("data-curent","true")}),0==+a(".animate").attr("data-scroll")?(a(".main-page").removeClass("prevSlide"),a(".three-part-block").removeClass("animate"),a(".scroll-down").removeClass("hide"),a(".text__wrapper").each(function(t){0==t&&a(this).attr("data-curent","true")})):r<=2?(a(".three-part-block .top-part").removeClass("top-part--bg-position"),a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){t==r-2?a(this).attr("data-scroll","next"):t==r-3&&a(this).attr("data-scroll","curent")})):4==r&&setTimeout(function(){a(".burger").removeClass("span-color--black-important")},1500),a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){t==r-2?a(this).attr("data-scroll","next"):t==r-3?a(this).attr("data-scroll","curent"):t==r-1?a(this).attr("data-scroll",""):t==r&&a(this).attr("data-scroll","")}),1<=--r&&a(".three-part-block").attr("data-scroll",r-1)):7==r?(r=6,a(".three-part-block").removeClass("prev"),a(".video-with-handle").removeClass("curent"),a(".video-with-handle video").trigger("pause"),a(".scroll-down").removeClass("hide")):8==r?(console.log("test"),r=7,a(".big-video").removeClass("curent"),a(".video-with-handle").removeClass("prev"),setTimeout(function(){a(".burger").addClass("span-color--black-important")},1500)):9==r?(r=8,a(".big-video").removeClass("prev"),a(".products-list").removeClass("curent"),setTimeout(function(){a(".burger").removeClass("span-color--black-important")},1500)):10==r&&(r=9,a(".products-list").removeClass("prev"),a(".recipies").removeClass("curent"),a(".burger").removeClass("burger--opacity-0"))))}),Splitting({target:"[data-splitting]"});var o=a(".video-with-handle video"),i=a(".seekBar"),t=a(".seekBar button");o.on("timeupdate",function(t){i.css("width",100/this.duration*this.currentTime+"%")}),t.on("click",function(t){t.preventDefault()}),t.mousedown(function(t){t.preventDefault(),o.trigger("pause"),i.css({transition:"none"}),a(window).mousemove(function(t){t.pageX>i.offset().left&&i.offset().left+t.pageX<=a(window).width()&&(i.css("width",t.pageX-i.offset().left),a(".video-with-handle video")[0].currentTime=i.width()/i.parent().width()*a(".video-with-handle video")[0].duration)})}),a(window).mouseup(function(t){o.trigger("play"),a(window).off("mousemove"),i.css("width",t.pageX-i.offset().left),i.css("transition","all .3s linear")});var l=!0;a(".big-video .play-stop-btn a").on("click",function(){l?(l=!1,a(".big-video .video__wrapper video").trigger("play"),a(".logo-and-title, .seo, .social-links, .play-stop-btn").addClass("video--played"),a(".big-video").addClass("cursor--none"),a(".big-video .play-stop-btn a i").removeClass("fa-play"),a(".big-video .play-stop-btn a i").addClass("fa-pause"),a(".big-video").mousemove(function(){a(".play-stop-btn").removeClass("video--played"),a(".big-video").removeClass("cursor--none"),l||setTimeout(function(){a(".play-stop-btn").addClass("video--played")},2e3)})):(l=!0,a(".big-video .play-stop-btn a i").addClass("fa-play"),a(".big-video .play-stop-btn a i").removeClass("fa-pause"),a(".big-video .video__wrapper video").trigger("pause"),a(".logo-and-title, .seo, .social-links, .play-stop-btn").removeClass("video--played"),a(".big-video").addClass("cursor--none"))}),a(".recipies .recipies__item .play-btn a, .recipies .recipies__item .more-btn a").on("click",function(t){t.preventDefault(),a(".recipies__popup video").attr("src",a(this).parent().parent().attr("data-video")),a(".recipies__popup").addClass("active"),a(".burger").addClass("burger--active"),setTimeout(function(){a(".burger").removeClass("burger--opacity-0")},300)}),a(".recipies .main-field").slick({infinite:!0,slidesToShow:2,slidesToScroll:2,dots:!0,arrows:!1,responsive:[{breakpoint:992,settings:{slidesToShow:1,slidesToScroll:1}}]});var n=null;function c(){a(".products-intro .categories a").each(function(t){t==n?a(this).addClass("active"):a(this).removeClass("active")})}a(".products-intro .categories a").on("click",function(t){var e=a(this).index();return n=e,c(),n}),c(),a(".buy-from-partners__btn a").on("click",function(t){t.preventDefault(),a(".buy-from-partners").addClass("active"),a(".burger").addClass("span-color--black-buy-from-partners burger--active")}),a(".buy-from-partners .close-btn a").on("click",function(t){t.preventDefault(),a(".buy-from-partners").removeClass("active")}),a(".products__slider").slick({infinite:!0,prevArrow:a(".products-slider .arrows .prev a"),nextArrow:a(".products-slider .arrows .next a"),dots:!0}),a(".products-list__item").on("mouseenter",function(){a(".products-list__item").each(function(){a(this).removeClass("active"),a(this).addClass("unactive")}),a(this).removeClass("unactive"),a(this).addClass("active")}),a(".products-list__item").on("mouseleave",function(){a(".products-list__item").each(function(){a(this).removeClass("active"),a(this).removeClass("unactive")})});var d=function(e){s=!1,a(".burger").removeClass("burger--active"),a(".slide").each(function(){a(this).removeClass("curent prev"),+a(this).attr("data-slide")==+e?(a(this).addClass("curent"),console.log("test1")):+a(this).attr("data-slide")<+e?(a(this).addClass("curent prev"),console.log("test2")):(a(this).remove("curent prev"),console.log("test3"))}),r=+e+4,setTimeout(function(){a(".main-page").addClass("prevSlide"),a(".three-part-block").addClass("animate prev"),a(".three-part-block").attr("data-scroll","5"),a(".three-part-block .bottom-part .bottom-part__right .img").each(function(t){t==r-+e?a(this).attr("data-scroll","curent"):t==r-(+e-1)?a(this).attr("data-scroll","next"):a(this).attr("data-scroll","prev")}),a(".three-part-block .top-part").addClass("top-part--bg-position"),a(".three-part-block .top-part .text-scroll").css("transform","translate3d(-"+100*r+"vw, 0, 0)"),a(".text__wrapper").each(function(t){t==r-2?a(this).attr("data-curent","true"):a(this).attr("data-curent","false")}),a(".burger").addClass("span-color--black-important")},1500),setTimeout(function(){s=!0},2500)};a(".drop-menu nav a").on("click",function(){var t=a(this).parent().attr("data-scrollTo");d(t),a(".drop-menu").removeClass("drop-menu--active")}),a(".scroll-down a").on("click",function(t){t.preventDefault();var e=a(this).parent().attr("data-scrollTo");a(this).parent().addClass("hide"),d(e)})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyIkIiwib24iLCJkZWxheSIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJzZXRUaW1lb3V0IiwiYWRkQ2xhc3MiLCJ0aGlzIiwidG9nZ2xlQ2xhc3MiLCJsZW5ndGgiLCJlYWNoIiwiY3NzIiwiaW1hZ2VaaW5kZXgiLCJjdXJlbnRTbGlkZSIsImNhblNjcm9sbCIsImluZGV4IiwiZSIsImNvbnNvbGUiLCJsb2ciLCJvcmlnaW5hbEV2ZW50Iiwid2hlZWxEZWx0YSIsImF0dHIiLCJ0cmlnZ2VyIiwiU3BsaXR0aW5nIiwidGFyZ2V0IiwidmlkZW8iLCJzZWVrQmFyIiwic2Vla0JhckJ0biIsImV2ZW50IiwiZHVyYXRpb24iLCJjdXJyZW50VGltZSIsInByZXZlbnREZWZhdWx0IiwibW91c2Vkb3duIiwidHJhbnNpdGlvbiIsIndpbmRvdyIsIm1vdXNlbW92ZSIsInBhZ2VYIiwib2Zmc2V0IiwibGVmdCIsIndpZHRoIiwicGFyZW50IiwibW91c2V1cCIsIm9mZiIsImJpZ1ZpZGVvUGxheSIsInNsaWNrIiwiaW5maW5pdGUiLCJzbGlkZXNUb1Nob3ciLCJzbGlkZXNUb1Njcm9sbCIsImRvdHMiLCJhcnJvd3MiLCJyZXNwb25zaXZlIiwiYnJlYWtwb2ludCIsInNldHRpbmdzIiwid2hpY2hDYXRlZ29yeSIsImNoYW5nZUNhdGVnb3J1IiwicHJldkFycm93IiwibmV4dEFycm93Iiwic2Nyb2xsVG9Tb21lU2xpZGUiLCJ3aGljaFNsaWRlIiwicmVtb3ZlIiwic2xpZGUiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJDQUFBLFNBQVVBLEdBYVJBLEVBQUUsV0FBV0MsR0FBRyxRQUFTLFdBVjNCLElBQ01DLEVBVUNGLEVBQUUsc0JBQXNCRyxTQUFTLFlBQWNILEVBQUUsY0FBY0csU0FBUyxzQkFDekVILEVBQUUsc0JBQXNCSSxZQUFZLFVBQ3BDSixFQUFFLFdBQVdJLFlBQVksdURBQ2xCSixFQUFFLG9CQUFvQkcsU0FBUyxXQUN0Q0gsRUFBRSxvQkFBb0JJLFlBQVksVUFDbENDLFdBQVcsV0FDVEwsRUFBRSxXQUFXSSxZQUFZLG1CQUN4QixLQUNISixFQUFFLFdBQVdNLFNBQVMsc0JBQ2ZOLEVBQUUsc0JBQXNCRyxTQUFTLFdBQWFILEVBQUUsY0FBY0csU0FBUyxzQkFDOUVILEVBQUUsc0JBQXNCSSxZQUFZLFVBQ3BDSixFQUFFLFdBQVdJLFlBQVkseUNBR3pCSixFQUFFTyxNQUFNQyxZQUFZLGtCQUNwQlIsRUFBRU8sTUFBTUMsWUFBWSxxQkFDcEJSLEVBQUUsY0FBY1EsWUFBWSxxQkExQjVCTixFQUFRLEdBQU1GLEVBQUUsNkJBQTZCUyxPQUVqRFQsRUFBRSw2QkFBNkJVLEtBQUssV0FDbENWLEVBQUVPLE1BQU1JLElBQUksbUJBQW9CVCxFQUFNLEtBQ3RDQSxHQUFnQixRQStCbEIsSUFBSVUsRUFBY1osRUFBRSwyREFBMkRTLE9BQzNFSSxFQUFjLEVBQ2RDLEdBQVksRUFJaEJkLEVBQUUsMkRBQTJEVSxLQUFLLFNBQVNLLEdBQ3pFZixFQUFFTyxNQUFNSSxJQUFJLFNBQVVDLEtBQ3BCQSxJQVlKWixFQUFFLFdBQVdDLEdBQUcsUUFBUyxTQUFTZSxHQUUzQkYsSUFFREcsUUFBUUMsSUFBSUosR0FDWkEsR0FBWSxFQUdaVCxXQUFXLFdBQ1RTLEdBQVksR0FDWCxNQUVBRSxFQUFFRyxjQUFjQyxXQUFhLEdBQzlCcEIsRUFBRSxjQUFjTSxTQUFTLGFBRW5CTyxHQUFlYixFQUFFLDJEQUEyRFMsT0FBUyxHQUdyRSxHQUFmSSxFQUNEYixFQUFFLCtCQUErQk0sU0FBUyx5QkFFckIsR0FBZk8sR0FDTlIsV0FBVyxXQUNUTCxFQUFFLFdBQVdNLFNBQVMsZ0NBQ3JCLE1BS0xOLEVBQUUsNENBQTRDVyxJQUFJLFlBQWEsZ0JBQWtCLElBQU1FLEVBQWMsYUFFckdiLEVBQUUsa0JBQWtCVSxLQUFLLFNBQVNLLEdBQzdCQSxHQUFTRixFQUNWYixFQUFFTyxNQUFNYyxLQUFLLGNBQWUsUUFDckJOLEdBQVNGLEVBQWMsR0FDOUJiLEVBQUVPLE1BQU1jLEtBQUssY0FBZSxXQU1oQ3JCLEVBQUUsMkRBQTJEVSxLQUFLLFNBQVNLLEdBQ3RFQSxHQUFTRixFQUFjLEVBQ3hCYixFQUFFTyxNQUFNYyxLQUFLLGNBQWUsVUFDckJOLEdBQVNGLEVBQWMsRUFDOUJiLEVBQUVPLE1BQU1jLEtBQUssY0FBZSxRQUNyQk4sR0FBU0YsR0FDaEJiLEVBQUVPLE1BQU1jLEtBQUssY0FBZSxVQUloQ3JCLEVBQUUscUJBQXFCcUIsS0FBSyxjQUFlUixHQUMzQ0EsS0FHcUIsR0FBZkEsR0FDTkEsRUFBYyxFQUNkYixFQUFFLHFCQUFxQk0sU0FBUyxRQUNoQ04sRUFBRSxzQkFBc0JNLFNBQVMsVUFDakNOLEVBQUUsV0FBV00sU0FBUyxxQkFDdEJOLEVBQUUsNEJBQTRCc0IsUUFBUSxRQUN0Q3RCLEVBQUUsZ0JBQWdCTSxTQUFTLFNBRU4sR0FBZk8sR0FDTkEsRUFBYyxFQUNkYixFQUFFLGNBQWNNLFNBQVMsVUFDekJOLEVBQUUsc0JBQXNCTSxTQUFTLFFBQ2pDRCxXQUFXLFdBQ1RMLEVBQUUsV0FBV0ksWUFBWSwrQkFDekJKLEVBQUUsV0FBV0ksWUFBWSxzQkFDeEIsT0FFa0IsR0FBZlMsR0FDTkEsRUFBYyxFQUNkYixFQUFFLGNBQWNNLFNBQVMsUUFDekJOLEVBQUUsa0JBQWtCTSxTQUFTLFVBQzdCRCxXQUFXLFdBQ1RMLEVBQUUsV0FBV00sU0FBUyxnQ0FDckIsT0FFa0IsR0FBZk8sSUFDTkEsRUFBYyxHQUNkYixFQUFFLGFBQWFNLFNBQVMsVUFDeEJOLEVBQUUsa0JBQWtCTSxTQUFTLFFBQzdCTixFQUFFLFdBQVdNLFNBQVMsc0JBRXhCTixFQUFFLHFCQUFxQk0sU0FBUyxZQU1DLEVBQTdCVSxFQUFFRyxjQUFjQyxhQUNuQnBCLEVBQUUscUJBQXFCRyxTQUFTLFlBQThCLEdBQWZVLEdBQW9CQSxHQUFlLEdBRW5GYixFQUFFLDRDQUE0Q1csSUFBSSxZQUFhLGdCQUFrQixLQUFPRSxFQUFjLEdBQUssYUFDM0diLEVBQUUsa0JBQWtCVSxLQUFLLFNBQVNLLEdBQzdCQSxHQUFTRixFQUFZLEVBQ3RCYixFQUFFTyxNQUFNYyxLQUFLLGNBQWUsSUFDckJOLEdBQVNGLEVBQWMsR0FDOUJiLEVBQUVPLE1BQU1jLEtBQUssY0FBZSxVQU1XLElBQXRDckIsRUFBRSxZQUFZcUIsS0FBSyxnQkFDdEJyQixFQUFFLGNBQWNJLFlBQVksYUFDNUJKLEVBQUUscUJBQXFCSSxZQUFZLFdBQ25DSixFQUFFLGdCQUFnQkksWUFBWSxRQUM5QkosRUFBRSxrQkFBa0JVLEtBQUssU0FBU0ssR0FDcEIsR0FBVEEsR0FDRGYsRUFBRU8sTUFBTWMsS0FBSyxjQUFlLFdBUTVCUixHQUFlLEdBQ3JCYixFQUFFLCtCQUErQkksWUFBWSx5QkFDN0NKLEVBQUUsMkRBQTJEVSxLQUFLLFNBQVNLLEdBQ3RFQSxHQUFTRixFQUFjLEVBQ3hCYixFQUFFTyxNQUFNYyxLQUFLLGNBQWUsUUFDckJOLEdBQVNGLEVBQWMsR0FDOUJiLEVBQUVPLE1BQU1jLEtBQUssY0FBZSxhQU1YLEdBQWZSLEdBQ05SLFdBQVcsV0FDVEwsRUFBRSxXQUFXSSxZQUFZLGdDQUN4QixNQUdISixFQUFFLDJEQUEyRFUsS0FBSyxTQUFTSyxHQUN0RUEsR0FBU0YsRUFBYyxFQUN4QmIsRUFBRU8sTUFBTWMsS0FBSyxjQUFlLFFBRXRCTixHQUFTRixFQUFjLEVBQzdCYixFQUFFTyxNQUFNYyxLQUFLLGNBQWUsVUFFckJOLEdBQVNGLEVBQWMsRUFDOUJiLEVBQUVPLE1BQU1jLEtBQUssY0FBZSxJQUVyQk4sR0FBU0YsR0FDaEJiLEVBQUVPLE1BQU1jLEtBQUssY0FBZSxNQU1iLEtBRmpCUixHQUdBYixFQUFFLHFCQUFxQnFCLEtBQUssY0FBZVIsRUFBYyxJQUt4QyxHQUFmQSxHQUNOQSxFQUFjLEVBQ2RiLEVBQUUscUJBQXFCSSxZQUFZLFFBQ25DSixFQUFFLHNCQUFzQkksWUFBWSxVQUNwQ0osRUFBRSw0QkFBNEJzQixRQUFRLFNBQ3RDdEIsRUFBRSxnQkFBZ0JJLFlBQVksU0FFVCxHQUFmUyxHQUNOSSxRQUFRQyxJQUFJLFFBQ1pMLEVBQWMsRUFDZGIsRUFBRSxjQUFjSSxZQUFZLFVBQzVCSixFQUFFLHNCQUFzQkksWUFBWSxRQUNwQ0MsV0FBVyxXQUNUTCxFQUFFLFdBQVdNLFNBQVMsZ0NBQ3JCLE9BRWtCLEdBQWZPLEdBQ05BLEVBQWMsRUFDZGIsRUFBRSxjQUFjSSxZQUFZLFFBQzVCSixFQUFFLGtCQUFrQkksWUFBWSxVQUNoQ0MsV0FBVyxXQUNUTCxFQUFFLFdBQVdJLFlBQVksZ0NBQ3hCLE9BR2tCLElBQWZTLElBQ05BLEVBQWMsRUFDZGIsRUFBRSxrQkFBa0JJLFlBQVksUUFDaENKLEVBQUUsYUFBYUksWUFBWSxVQUMzQkosRUFBRSxXQUFXSSxZQUFZLDBCQW9CakNtQixVQUFVLENBQ1JDLE9BQVEscUJBS1YsSUFBSUMsRUFBUXpCLEVBQUUsNEJBQ1YwQixFQUFVMUIsRUFBRSxZQUNaMkIsRUFBYTNCLEVBQUUsbUJBRW5CeUIsRUFBTXhCLEdBQ0osYUFDQSxTQUFTMkIsR0FDUEYsRUFBUWYsSUFBSSxRQUFlLElBQU1KLEtBQUtzQixTQUFZdEIsS0FBS3VCLFlBQWMsT0FHekVILEVBQVcxQixHQUFHLFFBQVMsU0FBU2UsR0FDOUJBLEVBQUVlLG1CQUdKSixFQUFXSyxVQUFVLFNBQVNoQixHQUM1QkEsRUFBRWUsaUJBQ0ZOLEVBQU1ILFFBQVEsU0FDZEksRUFBUWYsSUFBSSxDQUNWc0IsV0FBWSxTQUdkakMsRUFBRWtDLFFBQVFDLFVBQVUsU0FBU25CLEdBQ3hCQSxFQUFFb0IsTUFBUVYsRUFBUVcsU0FBU0MsTUFBU1osRUFBUVcsU0FBU0MsS0FBT3RCLEVBQUVvQixPQUFVcEMsRUFBRWtDLFFBQVFLLFVBQ25GYixFQUFRZixJQUFJLFFBQVVLLEVBQUVvQixNQUFRVixFQUFRVyxTQUFTQyxNQUNqRHRDLEVBQUUsNEJBQTRCLEdBQUc4QixZQUFnQkosRUFBUWEsUUFBVWIsRUFBUWMsU0FBU0QsUUFBWXZDLEVBQUUsNEJBQTRCLEdBQUc2QixjQUt2STdCLEVBQUVrQyxRQUFRTyxRQUFRLFNBQVN6QixHQUN6QlMsRUFBTUgsUUFBUSxRQUNkdEIsRUFBRWtDLFFBQVFRLElBQUksYUFDZGhCLEVBQVFmLElBQUksUUFBVUssRUFBRW9CLE1BQVFWLEVBQVFXLFNBQVNDLE1BQ2pEWixFQUFRZixJQUFJLGFBQWMsb0JBSzFCLElBQUlnQyxHQUFlLEVBRW5CM0MsRUFBRSwrQkFBK0JDLEdBQUcsUUFBUyxXQUN4QzBDLEdBQ0RBLEdBQWUsRUFDZjNDLEVBQUUsb0NBQW9Dc0IsUUFBUSxRQUM5Q3RCLEVBQUUsd0RBQXdETSxTQUFTLGlCQUNuRU4sRUFBRSxjQUFjTSxTQUFTLGdCQUN6Qk4sRUFBRSxpQ0FBaUNJLFlBQVksV0FDL0NKLEVBQUUsaUNBQWlDTSxTQUFTLFlBQzVDTixFQUFFLGNBQWNtQyxVQUFVLFdBQ3hCbkMsRUFBRSxrQkFBa0JJLFlBQVksaUJBQ2hDSixFQUFFLGNBQWNJLFlBQVksZ0JBQ3hCdUMsR0FDRnRDLFdBQVcsV0FDVEwsRUFBRSxrQkFBa0JNLFNBQVMsa0JBQzVCLFNBSVBxQyxHQUFlLEVBQ2YzQyxFQUFFLGlDQUFpQ00sU0FBUyxXQUM1Q04sRUFBRSxpQ0FBaUNJLFlBQVksWUFDL0NKLEVBQUUsb0NBQW9Dc0IsUUFBUSxTQUM5Q3RCLEVBQUUsd0RBQXdESSxZQUFZLGlCQUN0RUosRUFBRSxjQUFjTSxTQUFTLG1CQVE3Qk4sRUFBRSxnRkFBZ0ZDLEdBQUcsUUFBUyxTQUFTZSxHQUNyR0EsRUFBRWUsaUJBQ0YvQixFQUFFLDBCQUEwQnFCLEtBQUssTUFBT3JCLEVBQUVPLE1BQU1pQyxTQUFTQSxTQUFTbkIsS0FBSyxlQUN2RXJCLEVBQUUsb0JBQW9CTSxTQUFTLFVBQy9CTixFQUFFLFdBQVdNLFNBQVMsa0JBQ3RCRCxXQUFXLFdBQ1RMLEVBQUUsV0FBV0ksWUFBWSxzQkFDeEIsT0FJTEosRUFBRSx5QkFBeUI0QyxNQUFNLENBQy9CQyxVQUFVLEVBQ1ZDLGFBQWMsRUFDZEMsZUFBZ0IsRUFDaEJDLE1BQU0sRUFDTkMsUUFBUSxFQUNSQyxXQUFZLENBQ1YsQ0FDRUMsV0FBWSxJQUNaQyxTQUFVLENBQ1JOLGFBQWMsRUFDZEMsZUFBZ0IsT0FVeEIsSUFBSU0sRUFBZ0IsS0FTcEIsU0FBU0MsSUFDUHRELEVBQUUsaUNBQWlDVSxLQUFLLFNBQVNLLEdBQzNDQSxHQUFTc0MsRUFDWHJELEVBQUVPLE1BQU1ELFNBQVMsVUFFakJOLEVBQUVPLE1BQU1ILFlBQVksWUFaMUJKLEVBQUUsaUNBQWlDQyxHQUFHLFFBQVMsU0FBU2UsR0FDdEQsSUFBSUQsRUFBUWYsRUFBRU8sTUFBTVEsUUFHcEIsT0FGQXNDLEVBQWdCdEMsRUFDaEJ1QyxJQUNPRCxJQVlUQyxJQUdGdEQsRUFBRSw2QkFBNkJDLEdBQUcsUUFBUyxTQUFTZSxHQUNsREEsRUFBRWUsaUJBQ0YvQixFQUFFLHNCQUFzQk0sU0FBUyxVQUNqQ04sRUFBRSxXQUFXTSxTQUFTLHdEQUd4Qk4sRUFBRSxtQ0FBbUNDLEdBQUcsUUFBUyxTQUFTZSxHQUN4REEsRUFBRWUsaUJBQ0YvQixFQUFFLHNCQUFzQkksWUFBWSxZQUd0Q0osRUFBRSxxQkFBcUI0QyxNQUFNLENBQzNCQyxVQUFVLEVBQ1ZVLFVBQVd2RCxFQUFFLG9DQUNid0QsVUFBV3hELEVBQUUsb0NBQ2JnRCxNQUFNLElBR1JoRCxFQUFFLHdCQUF3QkMsR0FBRyxhQUFjLFdBQ3pDRCxFQUFFLHdCQUF3QlUsS0FBSyxXQUM3QlYsRUFBRU8sTUFBTUgsWUFBWSxVQUNwQkosRUFBRU8sTUFBTUQsU0FBUyxjQUVuQk4sRUFBRU8sTUFBTUgsWUFBWSxZQUNwQkosRUFBRU8sTUFBTUQsU0FBUyxZQUVuQk4sRUFBRSx3QkFBd0JDLEdBQUcsYUFBYyxXQUN6Q0QsRUFBRSx3QkFBd0JVLEtBQUssV0FDN0JWLEVBQUVPLE1BQU1ILFlBQVksVUFDcEJKLEVBQUVPLE1BQU1ILFlBQVksZ0JBS3hCLElBQUlxRCxFQUFvQixTQUFTQyxHQUMvQjVDLEdBQVksRUFDWmQsRUFBRSxXQUFXSSxZQUFZLGtCQUV6QkosRUFBRSxVQUFVVSxLQUFLLFdBQ2ZWLEVBQUVPLE1BQU1ILFlBQVksZ0JBQ2hCSixFQUFFTyxNQUFNYyxLQUFLLGdCQUFrQnFDLEdBQ2pDMUQsRUFBRU8sTUFBTUQsU0FBUyxVQUNqQlcsUUFBUUMsSUFBSSxXQUVMbEIsRUFBRU8sTUFBTWMsS0FBSyxlQUFpQnFDLEdBQ3JDMUQsRUFBRU8sTUFBTUQsU0FBUyxlQUNqQlcsUUFBUUMsSUFBSSxXQUdabEIsRUFBRU8sTUFBTW9ELE9BQU8sZUFDZjFDLFFBQVFDLElBQUksWUFJaEJMLEdBQW1CNkMsRUFBTCxFQUNkckQsV0FBVyxXQUNUTCxFQUFFLGNBQWNNLFNBQVMsYUFDekJOLEVBQUUscUJBQXFCTSxTQUFTLGdCQUNoQ04sRUFBRSxxQkFBcUJxQixLQUFLLGNBQWUsS0FDM0NyQixFQUFFLDJEQUEyRFUsS0FBSyxTQUFTSyxHQUN0RUEsR0FBVUYsR0FBaUI2QyxFQUM1QjFELEVBQUVPLE1BQU1jLEtBQUssY0FBZSxVQUNyQk4sR0FBVUYsSUFBcUI2QyxFQUFMLEdBQ2pDMUQsRUFBRU8sTUFBTWMsS0FBSyxjQUFlLFFBRTVCckIsRUFBRU8sTUFBTWMsS0FBSyxjQUFlLFVBTWhDckIsRUFBRSwrQkFBK0JNLFNBQVMseUJBQzFDTixFQUFFLDRDQUE0Q1csSUFBSSxZQUFhLGdCQUFrQixJQUFNRSxFQUFjLGFBRXJHYixFQUFFLGtCQUFrQlUsS0FBSyxTQUFTSyxHQUM3QkEsR0FBU0YsRUFBYyxFQUN4QmIsRUFBRU8sTUFBTWMsS0FBSyxjQUFlLFFBRTVCckIsRUFBRU8sTUFBTWMsS0FBSyxjQUFlLFdBR2hDckIsRUFBRSxXQUFXTSxTQUFTLGdDQUVyQixNQUNIRCxXQUFXLFdBQ1RTLEdBQVksR0FDWCxPQUlMZCxFQUFFLG9CQUFvQkMsR0FBRyxRQUFTLFdBQ2hDLElBQUkyRCxFQUFRNUQsRUFBRU8sTUFBTWlDLFNBQVNuQixLQUFLLGlCQUNsQ29DLEVBQWtCRyxHQUNsQjVELEVBQUUsY0FBY0ksWUFBWSx1QkFHOUJKLEVBQUUsa0JBQWtCQyxHQUFHLFFBQVMsU0FBU2UsR0FDdkNBLEVBQUVlLGlCQUNGLElBQUk2QixFQUFRNUQsRUFBRU8sTUFBTWlDLFNBQVNuQixLQUFLLGlCQUNsQ3JCLEVBQUVPLE1BQU1pQyxTQUFTbEMsU0FBUyxRQUMxQm1ELEVBQWtCRyxLQW5mdEIsQ0FzZkdDIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oJCkge1xyXG4gIFxyXG4vLyAtLS0+IERST1AgRE9XTiBNRU5VXHJcbmZ1bmN0aW9uIGdpdmVOYXZpZ2F0aW9uRGVsYXkgKCl7IFxyXG4gIHZhciBkZWxheSA9IDAuMSAqICQoJy5kcm9wLW1lbnUtLWFjdGl2ZSBuYXYgbGknKS5sZW5ndGg7XHJcbiAgXHJcbiAgJCgnLmRyb3AtbWVudS0tYWN0aXZlIG5hdiBsaScpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICQodGhpcykuY3NzKCd0cmFuc2l0aW9uLWRlbGF5JywgZGVsYXkrJ3MnKVxyXG4gICAgZGVsYXkgPSBkZWxheSAtIDAuMVxyXG4gIH0pXHJcbn1cclxuXHJcbiBcclxuICAkKCcuYnVyZ2VyJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgIGlmKCQoJy5idXktZnJvbS1wYXJ0bmVycycpLmhhc0NsYXNzKCdhY3RpdmUnKSAmJiAhJCgnLmRyb3AtbWVudScpLmhhc0NsYXNzKCdkcm9wLW1lbnUtLWFjdGl2ZScpKXtcclxuICAgICAgJCgnLmJ1eS1mcm9tLXBhcnRuZXJzJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgICQoJy5idXJnZXInKS5yZW1vdmVDbGFzcygnYnVyZ2VyLS1hY3RpdmUgc3Bhbi1jb2xvci0tYmxhY2stYnV5LWZyb20tcGFydG5lcnMnKVxyXG4gICAgfWVsc2UgaWYoJCgnLnJlY2lwaWVzX19wb3B1cCcpLmhhc0NsYXNzKCdhY3RpdmUnKSl7XHJcbiAgICAgICQoJy5yZWNpcGllc19fcG9wdXAnKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcclxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICQoJy5idXJnZXInKS5yZW1vdmVDbGFzcygnYnVyZ2VyLS1hY3RpdmUnKVxyXG4gICAgICB9LCAzMDApXHJcbiAgICAgICQoJy5idXJnZXInKS5hZGRDbGFzcygnYnVyZ2VyLS1vcGFjaXR5LTAnKVxyXG4gICAgfWVsc2UgaWYoJCgnLmJ1eS1mcm9tLXBhcnRuZXJzJykuaGFzQ2xhc3MoJ2FjdGl2ZScpICYmICQoJy5kcm9wLW1lbnUnKS5oYXNDbGFzcygnZHJvcC1tZW51LS1hY3RpdmUnKSl7XHJcbiAgICAgICQoJy5idXktZnJvbS1wYXJ0bmVycycpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAkKCcuYnVyZ2VyJykucmVtb3ZlQ2xhc3MoJ3NwYW4tY29sb3ItLWJsYWNrLWJ1eS1mcm9tLXBhcnRuZXJzJylcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2J1cmdlci0tYWN0aXZlJyk7XHJcbiAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ3NwYW4tY29sb3ItLWJsYWNrJyk7XHJcbiAgICAgICQoJy5kcm9wLW1lbnUnKS50b2dnbGVDbGFzcygnZHJvcC1tZW51LS1hY3RpdmUnKTtcclxuICAgICAgZ2l2ZU5hdmlnYXRpb25EZWxheSgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgfSlcclxuLy8gPC0tLSBEUk9QIERPV04gTUVOVVxyXG5cclxuLy8gLS0tPiBTTElERVIgTE9HSUNLIFxyXG5cclxuICB2YXIgaW1hZ2VaaW5kZXggPSAkKCcudGhyZWUtcGFydC1ibG9jayAuYm90dG9tLXBhcnQgLmJvdHRvbS1wYXJ0X19yaWdodCAuaW1nJykubGVuZ3RoIFxyXG4gIHZhciBjdXJlbnRTbGlkZSA9IDA7XHJcbiAgdmFyIGNhblNjcm9sbCA9IHRydWU7XHJcbiAgdmFyIGFuaW1hdGl0b25FbmQgPSB0cnVlO1xyXG5cclxuICAvLyAtLS0+IEFERCBaLUlOREVYIEZPUiBBTEwgSU1BR0VTXHJcbiAgJCgnLnRocmVlLXBhcnQtYmxvY2sgLmJvdHRvbS1wYXJ0IC5ib3R0b20tcGFydF9fcmlnaHQgLmltZycpLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgJCh0aGlzKS5jc3MoJ3pJbmRleCcsIGltYWdlWmluZGV4KVxyXG4gICAgLS1pbWFnZVppbmRleFxyXG4gIH0pXHJcbiAgLy8gPC0tLSBBREQgWi1JTkRFWCBGT1IgQUxMIElNQUdFU1xyXG4vLyAgICQoJ2JvZHknKS5vbigndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kJywgZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4vLyAgICAgICBjb25zb2xlLmxvZygndGVzdCcpO1xyXG4vLyAgICAgICBhbmltYXRpdG9uRW5kID0gdHJ1ZVxyXG4vLyAgICAgfSwgMTUwMClcclxuLy8gICAgIHJldHVybiBcclxuLy8gfSk7IFxyXG5cclxuXHJcbiAgJCgnLnNsaWRlcicpLm9uKCd3aGVlbCcsIGZ1bmN0aW9uKGUpe1xyXG5cclxuICAgICAgaWYoY2FuU2Nyb2xsKXtcclxuICAgICAgICAvLy0tLT4gU0NST0xMIFRPIE5FWFQgU0xJREVcclxuICAgICAgICBjb25zb2xlLmxvZyhjYW5TY3JvbGwpXHJcbiAgICAgICAgY2FuU2Nyb2xsID0gZmFsc2U7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coY2FuU2Nyb2xsLCBhbmltYXRpdG9uRW5kKVxyXG4gICAgICAgIC8vIC0tLT4gQUREIFBPU0lCSUxJVFkgVE8gU0NST0xMIEFHQUlOIFRIUk9VR0ggT05FIFNFQ09ORFxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgIGNhblNjcm9sbCA9IHRydWVcclxuICAgICAgICB9LCAxNTA1KVxyXG4gICAgICAvLyA8LS0tIEFERCBQT1NJQklMSVRZIFRPIFNDUk9MTCBBR0FJTiBUSFJPVUdIIE9ORSBTRUNPTkRcclxuICAgICAgICBpZihlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSA8IDApIHtcclxuICAgICAgICAgICQoJy5tYWluLXBhZ2UnKS5hZGRDbGFzcygncHJldlNsaWRlJylcclxuICAgICAgICAgIC8vICQoJy5zY3JvbGwtZG93bicpLmFkZENsYXNzKCdoaWRlJylcclxuICAgICAgICAgICAgIGlmKGN1cmVudFNsaWRlIDw9ICQoJy50aHJlZS1wYXJ0LWJsb2NrIC5ib3R0b20tcGFydCAuYm90dG9tLXBhcnRfX3JpZ2h0IC5pbWcnKS5sZW5ndGggLSAxKXtcclxuICAgICAgICAgICAgICAvLyAtLS0+IEFERCBCRyBGT1IgRklSU1QgU0xJREVcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICBpZihjdXJlbnRTbGlkZSA9PSAxKXtcclxuICAgICAgICAgICAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrIC50b3AtcGFydCcpLmFkZENsYXNzKCd0b3AtcGFydC0tYmctcG9zaXRpb24nKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZSBpZihjdXJlbnRTbGlkZSA9PSAzKXtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgJCgnLmJ1cmdlcicpLmFkZENsYXNzKCdzcGFuLWNvbG9yLS1ibGFjay1pbXBvcnRhbnQnKVxyXG4gICAgICAgICAgICAgICAgfSwgMTUwMClcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgLy8gPC0tLSBBREQgQkcgRk9SIEZJUlNUIFNMSURFXHJcblxyXG4gICAgICAgICAgICAgIC8vIC0tLT4gVEVYVCBBTklNQVRJT05cclxuICAgICAgICAgICAgICAkKCcudGhyZWUtcGFydC1ibG9jayAudG9wLXBhcnQgLnRleHQtc2Nyb2xsJykuY3NzKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlM2QoLScrICgxMDAgKiBjdXJlbnRTbGlkZSkgKyd2dywgMCwgMCknKVxyXG5cclxuICAgICAgICAgICAgICAkKCcudGV4dF9fd3JhcHBlcicpLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgICAgICAgICAgICAgaWYoaW5kZXggPT0gY3VyZW50U2xpZGUpe1xyXG4gICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtY3VyZW50JywgJ3RydWUnKVxyXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoaW5kZXggPT0gY3VyZW50U2xpZGUgLSAxKXtcclxuICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLWN1cmVudCcsICdmYWxzZScpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAvLyA8LS0tIFRFWFQgQU5JTUFUSU9OXHJcblxyXG4gICAgICAgICAgICAgIC8vIC0tLT4gQ0hBTkdFIERBVEEtQVRSSUJVVEVTIEZPUiBJTUFHRVNcclxuICAgICAgICAgICAgICAkKCcudGhyZWUtcGFydC1ibG9jayAuYm90dG9tLXBhcnQgLmJvdHRvbS1wYXJ0X19yaWdodCAuaW1nJykuZWFjaChmdW5jdGlvbihpbmRleCl7XHJcbiAgICAgICAgICAgICAgICBpZihpbmRleCA9PSBjdXJlbnRTbGlkZSAtIDEpe1xyXG4gICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJ2N1cmVudCcpXHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihpbmRleCA9PSBjdXJlbnRTbGlkZSAtIDIpe1xyXG4gICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJ3ByZXYnKVxyXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoaW5kZXggPT0gY3VyZW50U2xpZGUpe1xyXG4gICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJ25leHQnKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLy8gPC0tLSBDSEFOR0UgREFUQS1BVFJJQlVURVMgRk9SIElNQUdFU1xyXG4gICAgICAgICAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrJykuYXR0cignZGF0YS1zY3JvbGwnLCBjdXJlbnRTbGlkZSlcclxuICAgICAgICAgICAgICBjdXJlbnRTbGlkZSsrXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlbHNlIGlmKGN1cmVudFNsaWRlID09IDYpe1xyXG4gICAgICAgICAgICAgIGN1cmVudFNsaWRlID0gN1xyXG4gICAgICAgICAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrJykuYWRkQ2xhc3MoJ3ByZXYnKVxyXG4gICAgICAgICAgICAgICQoJy52aWRlby13aXRoLWhhbmRsZScpLmFkZENsYXNzKCdjdXJlbnQnKVxyXG4gICAgICAgICAgICAgICQoJy5idXJnZXInKS5hZGRDbGFzcygnc3Bhbi1jb2xvci0tYmxhY2snKVxyXG4gICAgICAgICAgICAgICQoJy52aWRlby13aXRoLWhhbmRsZSB2aWRlbycpLnRyaWdnZXIoJ3BsYXknKVxyXG4gICAgICAgICAgICAgICQoJy5zY3JvbGwtZG93bicpLmFkZENsYXNzKCdoaWRlJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKGN1cmVudFNsaWRlID09IDcpe1xyXG4gICAgICAgICAgICAgIGN1cmVudFNsaWRlID0gOFxyXG4gICAgICAgICAgICAgICQoJy5iaWctdmlkZW8nKS5hZGRDbGFzcygnY3VyZW50Jyk7XHJcbiAgICAgICAgICAgICAgJCgnLnZpZGVvLXdpdGgtaGFuZGxlJykuYWRkQ2xhc3MoJ3ByZXYnKTtcclxuICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkKCcuYnVyZ2VyJykucmVtb3ZlQ2xhc3MoJ3NwYW4tY29sb3ItLWJsYWNrLWltcG9ydGFudCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmJ1cmdlcicpLnJlbW92ZUNsYXNzKCdzcGFuLWNvbG9yLS1ibGFjaycpO1xyXG4gICAgICAgICAgICAgIH0sIDE1MDApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZihjdXJlbnRTbGlkZSA9PSA4KXtcclxuICAgICAgICAgICAgICBjdXJlbnRTbGlkZSA9IDk7XHJcbiAgICAgICAgICAgICAgJCgnLmJpZy12aWRlbycpLmFkZENsYXNzKCdwcmV2Jyk7XHJcbiAgICAgICAgICAgICAgJCgnLnByb2R1Y3RzLWxpc3QnKS5hZGRDbGFzcygnY3VyZW50JylcclxuICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkKCcuYnVyZ2VyJykuYWRkQ2xhc3MoJ3NwYW4tY29sb3ItLWJsYWNrLWltcG9ydGFudCcpXHJcbiAgICAgICAgICAgICAgfSwgMTUwMClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKGN1cmVudFNsaWRlID09IDkpe1xyXG4gICAgICAgICAgICAgIGN1cmVudFNsaWRlID0gMTA7XHJcbiAgICAgICAgICAgICAgJCgnLnJlY2lwaWVzJykuYWRkQ2xhc3MoJ2N1cmVudCcpO1xyXG4gICAgICAgICAgICAgICQoJy5wcm9kdWN0cy1saXN0JykuYWRkQ2xhc3MoJ3ByZXYnKTsgXHJcbiAgICAgICAgICAgICAgJCgnLmJ1cmdlcicpLmFkZENsYXNzKCdidXJnZXItLW9wYWNpdHktMCcpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2snKS5hZGRDbGFzcygnYW5pbWF0ZScpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gPC0tLSBTQ1JPTEwgVE8gTkVYVCBTTElERVxyXG5cclxuICAgICAgICAvLyAtLS0+IFNDUk9MTCBUTyBQUkVWSU9VUyBTTElERSBcclxuICAgICAgICBlbHNlIGlmKGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhID4gMCl7XHJcbiAgICAgICAgICBpZigkKCcudGhyZWUtcGFydC1ibG9jaycpLmhhc0NsYXNzKCdhbmltYXRlJykgICYmIGN1cmVudFNsaWRlID49IDEgJiYgY3VyZW50U2xpZGUgPD0gNil7XHJcbiAgICAgICAgICAgIC8vIC0tLT4gVEVYVCBBTklNQVRJT05cclxuICAgICAgICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2sgLnRvcC1wYXJ0IC50ZXh0LXNjcm9sbCcpLmNzcygndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZTNkKC0nKyAoMTAwICogKGN1cmVudFNsaWRlIC0gMikpICsndncsIDAsIDApJylcclxuICAgICAgICAgICAgJCgnLnRleHRfX3dyYXBwZXInKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcclxuICAgICAgICAgICAgICBpZihpbmRleCA9PSBjdXJlbnRTbGlkZS0xKXtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1jdXJlbnQnLCAnJylcclxuICAgICAgICAgICAgICB9ZWxzZSBpZihpbmRleCA9PSBjdXJlbnRTbGlkZSAtIDIpe1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLWN1cmVudCcsICd0cnVlJylcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC8vIC0tLT4gVEVYVCBBTklNQVRJT05cclxuXHJcbiAgICAgICAgICAgIC8vIFJFTU9WRSBJRiBJVCBGSVJTVCBTTElERVxyXG4gICAgICAgICAgICBpZigrKCQoJy5hbmltYXRlJykuYXR0cignZGF0YS1zY3JvbGwnKSkgPT0gMCApe1xyXG4gICAgICAgICAgICAgICQoJy5tYWluLXBhZ2UnKS5yZW1vdmVDbGFzcygncHJldlNsaWRlJylcclxuICAgICAgICAgICAgICAkKCcudGhyZWUtcGFydC1ibG9jaycpLnJlbW92ZUNsYXNzKCdhbmltYXRlJylcclxuICAgICAgICAgICAgICAkKCcuc2Nyb2xsLWRvd24nKS5yZW1vdmVDbGFzcygnaGlkZScpXHJcbiAgICAgICAgICAgICAgJCgnLnRleHRfX3dyYXBwZXInKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcclxuICAgICAgICAgICAgICAgIGlmKGluZGV4ID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtY3VyZW50JywgJ3RydWUnKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIC8vIFJFTU9WRSBJRiBJVCBGSVJTVCBTTElERVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIC8vIFJFVFVSTiBCQUNLIEJHIElNQUdFXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgZWxzZSBpZihjdXJlbnRTbGlkZSA8PSAyKXtcclxuICAgICAgICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2sgLnRvcC1wYXJ0JykucmVtb3ZlQ2xhc3MoJ3RvcC1wYXJ0LS1iZy1wb3NpdGlvbicpXHJcbiAgICAgICAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrIC5ib3R0b20tcGFydCAuYm90dG9tLXBhcnRfX3JpZ2h0IC5pbWcnKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcclxuICAgICAgICAgICAgICBpZihpbmRleCA9PSBjdXJlbnRTbGlkZSAtIDIpe1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcsICduZXh0JylcclxuICAgICAgICAgICAgICB9ZWxzZSBpZihpbmRleCA9PSBjdXJlbnRTbGlkZSAtIDMpe1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcsICdjdXJlbnQnKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIFJFVFVSTiBCQUNLIEJHIElNQUdFXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIGlmKGN1cmVudFNsaWRlID09IDQpe1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgJCgnLmJ1cmdlcicpLnJlbW92ZUNsYXNzKCdzcGFuLWNvbG9yLS1ibGFjay1pbXBvcnRhbnQnKVxyXG4gICAgICAgICAgICB9LCAxNTAwKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgIC8vIC0tLT4gQ0hBTkdFIERBVEEtQVRSSUJVVEVTIEZPUiBJTUFHRVNcclxuICAgICAgICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2sgLmJvdHRvbS1wYXJ0IC5ib3R0b20tcGFydF9fcmlnaHQgLmltZycpLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgICAgICAgICAgIGlmKGluZGV4ID09IGN1cmVudFNsaWRlIC0gMil7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJ25leHQnKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIGlmKGluZGV4ID09IGN1cmVudFNsaWRlIC0gMyl7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJ2N1cmVudCcpXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2UgaWYoIGluZGV4ID09IGN1cmVudFNsaWRlIC0gMSl7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJycpXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2UgaWYoIGluZGV4ID09IGN1cmVudFNsaWRlKXtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1zY3JvbGwnLCAnJylcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAvLyA8LS0tIENIQU5HRSBEQVRBLUFUUklCVVRFUyBGT1IgSU1BR0VTXHJcbiAgICAgICAgICAgIC0tY3VyZW50U2xpZGVcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChjdXJlbnRTbGlkZSA+PSAxKXtcclxuICAgICAgICAgICAgICAkKCcudGhyZWUtcGFydC1ibG9jaycpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgY3VyZW50U2xpZGUgLSAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGN1cmVudFNsaWRlID09IDcpe1xyXG4gICAgICAgICAgY3VyZW50U2xpZGUgPSA2XHJcbiAgICAgICAgICAkKCcudGhyZWUtcGFydC1ibG9jaycpLnJlbW92ZUNsYXNzKCdwcmV2Jyk7XHJcbiAgICAgICAgICAkKCcudmlkZW8td2l0aC1oYW5kbGUnKS5yZW1vdmVDbGFzcygnY3VyZW50Jyk7XHJcbiAgICAgICAgICAkKCcudmlkZW8td2l0aC1oYW5kbGUgdmlkZW8nKS50cmlnZ2VyKCdwYXVzZScpXHJcbiAgICAgICAgICAkKCcuc2Nyb2xsLWRvd24nKS5yZW1vdmVDbGFzcygnaGlkZScpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoY3VyZW50U2xpZGUgPT0gOCl7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygndGVzdCcpXHJcbiAgICAgICAgICBjdXJlbnRTbGlkZSA9IDdcclxuICAgICAgICAgICQoJy5iaWctdmlkZW8nKS5yZW1vdmVDbGFzcygnY3VyZW50Jyk7XHJcbiAgICAgICAgICAkKCcudmlkZW8td2l0aC1oYW5kbGUnKS5yZW1vdmVDbGFzcygncHJldicpO1xyXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkKCcuYnVyZ2VyJykuYWRkQ2xhc3MoJ3NwYW4tY29sb3ItLWJsYWNrLWltcG9ydGFudCcpXHJcbiAgICAgICAgICB9LCAxNTAwKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKGN1cmVudFNsaWRlID09IDkpe1xyXG4gICAgICAgICAgY3VyZW50U2xpZGUgPSA4O1xyXG4gICAgICAgICAgJCgnLmJpZy12aWRlbycpLnJlbW92ZUNsYXNzKCdwcmV2Jyk7XHJcbiAgICAgICAgICAkKCcucHJvZHVjdHMtbGlzdCcpLnJlbW92ZUNsYXNzKCdjdXJlbnQnKTtcclxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCgnLmJ1cmdlcicpLnJlbW92ZUNsYXNzKCdzcGFuLWNvbG9yLS1ibGFjay1pbXBvcnRhbnQnKVxyXG4gICAgICAgICAgfSwgMTUwMClcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoY3VyZW50U2xpZGUgPT0gMTApe1xyXG4gICAgICAgICAgY3VyZW50U2xpZGUgPSA5O1xyXG4gICAgICAgICAgJCgnLnByb2R1Y3RzLWxpc3QnKS5yZW1vdmVDbGFzcygncHJldicpO1xyXG4gICAgICAgICAgJCgnLnJlY2lwaWVzJykucmVtb3ZlQ2xhc3MoJ2N1cmVudCcpO1xyXG4gICAgICAgICAgJCgnLmJ1cmdlcicpLnJlbW92ZUNsYXNzKCdidXJnZXItLW9wYWNpdHktMCcpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICAgIC8vIC0tLT4gQUREIFBPU0lCSUxJVFkgVE8gU0NST0xMIEFHQUlOIFRIUk9VR0ggT05FIFNFQ09ORFxyXG4gICAgICAgICAgLy8gc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgLy8gICBjYW5TY3JvbGwgPSB0cnVlXHJcbiAgICAgICAgICAvLyB9LCAxMDAwKVxyXG4gICAgICAgICAgLy8gPC0tLSBBREQgUE9TSUJJTElUWSBUTyBTQ1JPTEwgQUdBSU4gVEhST1VHSCBPTkUgU0VDT05EXHJcblxyXG4gICAgICB9XHJcbiAgICAgIC8vIDwtLS0gU0NST0xMIFRPIFBSRVZJT1VTIFNMSURFXHJcblxyXG4gICAgICAvLyAvLyAtLS0+IFJFTU9WRSBQT1NJQklMSVRZIFRPIFNDUk9MTCBBR0FJTlxyXG4gICAgICAvLyBjYW5TY3JvbGwgPSBmYWxzZVxyXG4gICAgICAvLyAvLyA8LS0tIFJFTU9WRSBQT1NJQklMSVRZIFRPIFNDUk9MTCBBR0FJTlxyXG4gIH0pO1xyXG4vLyA8LS0tIFNMSURFUiBMT0dJQ0tcclxuXHJcbiAgLy8gLS0tPiBURVhUIFNQTElUSU5HXHJcbiAgU3BsaXR0aW5nKHtcclxuICAgIHRhcmdldDogXCJbZGF0YS1zcGxpdHRpbmddXCJcclxuICB9KTtcclxuICAvLyA8LS0tIFRFWFQgU1BMSVRJTkdcclxuXHJcbiAgLy8gLS0tPiBTRUVLIEJBUiBGT1IgJ3ZpZGVvLXdpdGgtaGFuZGxlJ1xyXG4gIHZhciB2aWRlbyA9ICQoJy52aWRlby13aXRoLWhhbmRsZSB2aWRlbycpO1xyXG4gIHZhciBzZWVrQmFyID0gJChcIi5zZWVrQmFyXCIpO1xyXG4gIHZhciBzZWVrQmFyQnRuID0gJChcIi5zZWVrQmFyIGJ1dHRvblwiKVxyXG4gICBcclxuICB2aWRlby5vbihcclxuICAgIFwidGltZXVwZGF0ZVwiLCBcclxuICAgIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgc2Vla0Jhci5jc3MoJ3dpZHRoJywgJycrICgoMTAwIC8gdGhpcy5kdXJhdGlvbikgKiB0aGlzLmN1cnJlbnRUaW1lKSArJyUnKVxyXG4gIH0pO1xyXG5cclxuICBzZWVrQmFyQnRuLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgfSk7XHJcblxyXG4gIHNlZWtCYXJCdG4ubW91c2Vkb3duKGZ1bmN0aW9uKGUpe1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmlkZW8udHJpZ2dlcigncGF1c2UnKTtcclxuICAgIHNlZWtCYXIuY3NzKHtcclxuICAgICAgdHJhbnNpdGlvbjogJ25vbmUnLFxyXG4gICAgfSlcclxuICAgIFxyXG4gICAgJCh3aW5kb3cpLm1vdXNlbW92ZShmdW5jdGlvbihlKSB7XHJcbiAgICAgIGlmKGUucGFnZVggPiBzZWVrQmFyLm9mZnNldCgpLmxlZnQgJiYgKHNlZWtCYXIub2Zmc2V0KCkubGVmdCArIGUucGFnZVgpIDw9ICQod2luZG93KS53aWR0aCgpKXtcclxuICAgICAgICBzZWVrQmFyLmNzcygnd2lkdGgnLCAgZS5wYWdlWCAtIHNlZWtCYXIub2Zmc2V0KCkubGVmdClcclxuICAgICAgICAkKCcudmlkZW8td2l0aC1oYW5kbGUgdmlkZW8nKVswXS5jdXJyZW50VGltZSA9ICgoc2Vla0Jhci53aWR0aCgpIC8gc2Vla0Jhci5wYXJlbnQoKS53aWR0aCgpKSkgKiAkKCcudmlkZW8td2l0aC1oYW5kbGUgdmlkZW8nKVswXS5kdXJhdGlvblxyXG4gICAgICB9IFxyXG4gICAgfSlcclxuICB9KTtcclxuXHJcbiAgJCh3aW5kb3cpLm1vdXNldXAoZnVuY3Rpb24oZSl7XHJcbiAgICB2aWRlby50cmlnZ2VyKCdwbGF5Jyk7XHJcbiAgICAkKHdpbmRvdykub2ZmKCdtb3VzZW1vdmUnKTtcclxuICAgIHNlZWtCYXIuY3NzKCd3aWR0aCcsICBlLnBhZ2VYIC0gc2Vla0Jhci5vZmZzZXQoKS5sZWZ0KVxyXG4gICAgc2Vla0Jhci5jc3MoJ3RyYW5zaXRpb24nLCAnYWxsIC4zcyBsaW5lYXInKVxyXG4gIH0pO1xyXG4gIC8vIDwtLS0gU0VFSyBCQVIgRk9SICd2aWRlby13aXRoLWhhbmRsZSdcclxuXHJcbiAgLy8gLS0tPiBCSUcgVklERU8gQkxPQ0tcclxuICAgIHZhciBiaWdWaWRlb1BsYXkgPSB0cnVlXHJcblxyXG4gICAgJCgnLmJpZy12aWRlbyAucGxheS1zdG9wLWJ0biBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgaWYoYmlnVmlkZW9QbGF5KXtcclxuICAgICAgICBiaWdWaWRlb1BsYXkgPSBmYWxzZTtcclxuICAgICAgICAkKCcuYmlnLXZpZGVvIC52aWRlb19fd3JhcHBlciB2aWRlbycpLnRyaWdnZXIoJ3BsYXknKTtcclxuICAgICAgICAkKCcubG9nby1hbmQtdGl0bGUsIC5zZW8sIC5zb2NpYWwtbGlua3MsIC5wbGF5LXN0b3AtYnRuJykuYWRkQ2xhc3MoJ3ZpZGVvLS1wbGF5ZWQnKTtcclxuICAgICAgICAkKCcuYmlnLXZpZGVvJykuYWRkQ2xhc3MoJ2N1cnNvci0tbm9uZScpO1xyXG4gICAgICAgICQoJy5iaWctdmlkZW8gLnBsYXktc3RvcC1idG4gYSBpJykucmVtb3ZlQ2xhc3MoJ2ZhLXBsYXknKTtcclxuICAgICAgICAkKCcuYmlnLXZpZGVvIC5wbGF5LXN0b3AtYnRuIGEgaScpLmFkZENsYXNzKCdmYS1wYXVzZScpO1xyXG4gICAgICAgICQoJy5iaWctdmlkZW8nKS5tb3VzZW1vdmUoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICQoJy5wbGF5LXN0b3AtYnRuJykucmVtb3ZlQ2xhc3MoJ3ZpZGVvLS1wbGF5ZWQnKVxyXG4gICAgICAgICAgJCgnLmJpZy12aWRlbycpLnJlbW92ZUNsYXNzKCdjdXJzb3ItLW5vbmUnKVxyXG4gICAgICAgICAgaWYoIWJpZ1ZpZGVvUGxheSl7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAkKCcucGxheS1zdG9wLWJ0bicpLmFkZENsYXNzKCd2aWRlby0tcGxheWVkJylcclxuICAgICAgICAgICAgfSwgMjAwMClcclxuICAgICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgYmlnVmlkZW9QbGF5ID0gdHJ1ZTtcclxuICAgICAgICAkKCcuYmlnLXZpZGVvIC5wbGF5LXN0b3AtYnRuIGEgaScpLmFkZENsYXNzKCdmYS1wbGF5Jyk7XHJcbiAgICAgICAgJCgnLmJpZy12aWRlbyAucGxheS1zdG9wLWJ0biBhIGknKS5yZW1vdmVDbGFzcygnZmEtcGF1c2UnKTtcclxuICAgICAgICAkKCcuYmlnLXZpZGVvIC52aWRlb19fd3JhcHBlciB2aWRlbycpLnRyaWdnZXIoJ3BhdXNlJyk7XHJcbiAgICAgICAgJCgnLmxvZ28tYW5kLXRpdGxlLCAuc2VvLCAuc29jaWFsLWxpbmtzLCAucGxheS1zdG9wLWJ0bicpLnJlbW92ZUNsYXNzKCd2aWRlby0tcGxheWVkJylcclxuICAgICAgICAkKCcuYmlnLXZpZGVvJykuYWRkQ2xhc3MoJ2N1cnNvci0tbm9uZScpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gIC8vIDwtLS0gQklHIFZJREVPIEJMT0NLXHJcblxyXG4gIC8vIC0tLT4gUkVDSVBJRVMgQkxPQ0tcclxuXHJcbiAgICAkKCcucmVjaXBpZXMgLnJlY2lwaWVzX19pdGVtIC5wbGF5LWJ0biBhLCAucmVjaXBpZXMgLnJlY2lwaWVzX19pdGVtIC5tb3JlLWJ0biBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgJCgnLnJlY2lwaWVzX19wb3B1cCB2aWRlbycpLmF0dHIoJ3NyYycsICQodGhpcykucGFyZW50KCkucGFyZW50KCkuYXR0cignZGF0YS12aWRlbycpKVxyXG4gICAgICAkKCcucmVjaXBpZXNfX3BvcHVwJykuYWRkQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgICQoJy5idXJnZXInKS5hZGRDbGFzcygnYnVyZ2VyLS1hY3RpdmUnKVxyXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCgnLmJ1cmdlcicpLnJlbW92ZUNsYXNzKCdidXJnZXItLW9wYWNpdHktMCcpXHJcbiAgICAgIH0sIDMwMClcclxuICAgIH0pXHJcbiAgICAvLyAtLS0+IFNMSURFUlxyXG5cclxuICAgICQoJy5yZWNpcGllcyAubWFpbi1maWVsZCcpLnNsaWNrKHtcclxuICAgICAgaW5maW5pdGU6IHRydWUsXHJcbiAgICAgIHNsaWRlc1RvU2hvdzogMixcclxuICAgICAgc2xpZGVzVG9TY3JvbGw6IDIsXHJcbiAgICAgIGRvdHM6IHRydWUsXHJcbiAgICAgIGFycm93czogZmFsc2UsXHJcbiAgICAgIHJlc3BvbnNpdmU6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBicmVha3BvaW50OiA5OTIsXHJcbiAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxIFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgXVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gPC0tLSBTTElERVJcclxuICAvLyA8LS0tIFJFQ0lQSUVTIEJMT0NLXHJcblxyXG4gIC8vIC0tLT4gQ0FURUdPUklFUyBMT0dJQ1xyXG4gICAgdmFyIHdoaWNoQ2F0ZWdvcnkgPSBudWxsXHJcblxyXG4gICAgJCgnLnByb2R1Y3RzLWludHJvIC5jYXRlZ29yaWVzIGEnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgdmFyIGluZGV4ID0gJCh0aGlzKS5pbmRleCgpXHJcbiAgICAgIHdoaWNoQ2F0ZWdvcnkgPSBpbmRleFxyXG4gICAgICBjaGFuZ2VDYXRlZ29ydSgpXHJcbiAgICAgIHJldHVybiB3aGljaENhdGVnb3J5XHJcbiAgICB9KVxyXG5cclxuICAgIGZ1bmN0aW9uIGNoYW5nZUNhdGVnb3J1KCl7XHJcbiAgICAgICQoJy5wcm9kdWN0cy1pbnRybyAuY2F0ZWdvcmllcyBhJykuZWFjaChmdW5jdGlvbihpbmRleCl7XHJcbiAgICAgICAgaWYgKGluZGV4ID09IHdoaWNoQ2F0ZWdvcnkpe1xyXG4gICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJylcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgY2hhbmdlQ2F0ZWdvcnUoKVxyXG5cclxuICAvLyA8LS0tIENBVEVHT1JJRVMgTE9HSUNcclxuICAkKCcuYnV5LWZyb20tcGFydG5lcnNfX2J0biBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAkKCcuYnV5LWZyb20tcGFydG5lcnMnKS5hZGRDbGFzcyhcImFjdGl2ZVwiKVxyXG4gICAgJCgnLmJ1cmdlcicpLmFkZENsYXNzKCdzcGFuLWNvbG9yLS1ibGFjay1idXktZnJvbS1wYXJ0bmVycyBidXJnZXItLWFjdGl2ZScpXHJcbiAgfSlcclxuXHJcbiAgJCgnLmJ1eS1mcm9tLXBhcnRuZXJzIC5jbG9zZS1idG4gYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgJCgnLmJ1eS1mcm9tLXBhcnRuZXJzJykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIilcclxuICB9KVxyXG5cclxuICAkKCcucHJvZHVjdHNfX3NsaWRlcicpLnNsaWNrKHtcclxuICAgIGluZmluaXRlOiB0cnVlLFxyXG4gICAgcHJldkFycm93OiAkKCcucHJvZHVjdHMtc2xpZGVyIC5hcnJvd3MgLnByZXYgYScpLFxyXG4gICAgbmV4dEFycm93OiAkKCcucHJvZHVjdHMtc2xpZGVyIC5hcnJvd3MgLm5leHQgYScpLFxyXG4gICAgZG90czogdHJ1ZVxyXG4gIH0pO1xyXG5cclxuICAkKCcucHJvZHVjdHMtbGlzdF9faXRlbScpLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24oKXtcclxuICAgICQoJy5wcm9kdWN0cy1saXN0X19pdGVtJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAkKHRoaXMpLmFkZENsYXNzKCd1bmFjdGl2ZScpXHJcbiAgICB9KVxyXG4gICAgJCh0aGlzKS5yZW1vdmVDbGFzcygndW5hY3RpdmUnKVxyXG4gICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJylcclxuICB9KVxyXG4gICQoJy5wcm9kdWN0cy1saXN0X19pdGVtJykub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbigpe1xyXG4gICAgJCgnLnByb2R1Y3RzLWxpc3RfX2l0ZW0nKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3VuYWN0aXZlJylcclxuICAgIH0pXHJcbiAgfSlcclxuXHJcbiAgLy8gLS0tPiBVU0UgVEhJUyBGVU5DVElPTiBJRiBZT1UgV0FOVCBUTyBTQ1JPTEwgT04gU09NRSBTTElERSBXSEVOIENMSUNLIE9OIEJUTlxyXG4gIHZhciBzY3JvbGxUb1NvbWVTbGlkZSA9IGZ1bmN0aW9uKHdoaWNoU2xpZGUpe1xyXG4gICAgY2FuU2Nyb2xsID0gZmFsc2VcclxuICAgICQoJy5idXJnZXInKS5yZW1vdmVDbGFzcygnYnVyZ2VyLS1hY3RpdmUnKSBcclxuXHJcbiAgICAkKCcuc2xpZGUnKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2N1cmVudCBwcmV2JylcclxuICAgICAgaWYoKyQodGhpcykuYXR0cignZGF0YS1zbGlkZScpID09ICt3aGljaFNsaWRlKXtcclxuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdjdXJlbnQnKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCd0ZXN0MScpXHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZigrJCh0aGlzKS5hdHRyKCdkYXRhLXNsaWRlJykgPCArd2hpY2hTbGlkZSl7XHJcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnY3VyZW50IHByZXYnKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCd0ZXN0MicpXHJcbiAgICAgIH1cclxuICAgICAgZWxzZXtcclxuICAgICAgICAkKHRoaXMpLnJlbW92ZSgnY3VyZW50IHByZXYnKVxyXG4gICAgICAgIGNvbnNvbGUubG9nKCd0ZXN0MycpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgY3VyZW50U2xpZGUgPSA0ICsgK3doaWNoU2xpZGU7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICQoJy5tYWluLXBhZ2UnKS5hZGRDbGFzcygncHJldlNsaWRlJylcclxuICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2snKS5hZGRDbGFzcygnYW5pbWF0ZSBwcmV2JylcclxuICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2snKS5hdHRyKCdkYXRhLXNjcm9sbCcsICc1JylcclxuICAgICAgJCgnLnRocmVlLXBhcnQtYmxvY2sgLmJvdHRvbS1wYXJ0IC5ib3R0b20tcGFydF9fcmlnaHQgLmltZycpLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgICAgIGlmKGluZGV4ID09IChjdXJlbnRTbGlkZSAtICggK3doaWNoU2xpZGUpKSl7XHJcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJ2N1cmVudCcpXHJcbiAgICAgICAgfWVsc2UgaWYoaW5kZXggPT0gKGN1cmVudFNsaWRlIC0gKC0xICsgK3doaWNoU2xpZGUpKSl7XHJcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtc2Nyb2xsJywgJ25leHQnKVxyXG4gICAgICAgIH1lbHNlIGlmKGluZGV4ID09ICAoY3VyZW50U2xpZGUgLSAoMSArICt3aGljaFNsaWRlKSkpe1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLXNjcm9sbCcsICdwcmV2JylcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICQodGhpcykuYXR0cignZGF0YS1zY3JvbGwnLCAncHJldicpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAkKCcudGhyZWUtcGFydC1ibG9jayAudG9wLXBhcnQnKS5hZGRDbGFzcygndG9wLXBhcnQtLWJnLXBvc2l0aW9uJyk7XHJcbiAgICAgICQoJy50aHJlZS1wYXJ0LWJsb2NrIC50b3AtcGFydCAudGV4dC1zY3JvbGwnKS5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUzZCgtJysgKDEwMCAqIGN1cmVudFNsaWRlKSArJ3Z3LCAwLCAwKScpXHJcblxyXG4gICAgICAkKCcudGV4dF9fd3JhcHBlcicpLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgICAgIGlmKGluZGV4ID09IGN1cmVudFNsaWRlIC0gMil7XHJcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2RhdGEtY3VyZW50JywgJ3RydWUnKVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgJCh0aGlzKS5hdHRyKCdkYXRhLWN1cmVudCcsICdmYWxzZScpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAkKCcuYnVyZ2VyJykuYWRkQ2xhc3MoJ3NwYW4tY29sb3ItLWJsYWNrLWltcG9ydGFudCcpXHJcbiAgICAgIFxyXG4gICAgfSwgMTUwMClcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgY2FuU2Nyb2xsID0gdHJ1ZVxyXG4gICAgfSwgMjUwMClcclxuICB9XHJcbiAgLy8gPC0tLSBVU0UgVEhJUyBGVU5DVElPTiBJRiBZT1UgV0FOVCBUTyBTQ1JPTEwgT04gU09NRSBTTElERSBXSEVOIENMSUNLIE9OIEJUTlxyXG5cclxuICAkKCcuZHJvcC1tZW51IG5hdiBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgIHZhciBzbGlkZSA9ICQodGhpcykucGFyZW50KCkuYXR0cignZGF0YS1zY3JvbGxUbycpXHJcbiAgICBzY3JvbGxUb1NvbWVTbGlkZShzbGlkZSlcclxuICAgICQoJy5kcm9wLW1lbnUnKS5yZW1vdmVDbGFzcygnZHJvcC1tZW51LS1hY3RpdmUnKVxyXG4gIH0pXHJcblxyXG4gICQoJy5zY3JvbGwtZG93biBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB2YXIgc2xpZGUgPSAkKHRoaXMpLnBhcmVudCgpLmF0dHIoJ2RhdGEtc2Nyb2xsVG8nKVxyXG4gICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnaGlkZScpXHJcbiAgICBzY3JvbGxUb1NvbWVTbGlkZShzbGlkZSlcclxuICB9KVxyXG5cclxufSkoalF1ZXJ5KTsiXX0=
